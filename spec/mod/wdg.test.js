require("wdg.test",function(t,e,n){function r(t){function e(t){for(var r=0;r<f;r++)s=t/700+r*Math.PI*2/f,c[3*r+0]=.7*Math.cos(s),c[3*r+1]=.2*Math.sin(s),c[3*r+2]=.7*Math.sin(s);n.bindBuffer(n.ARRAY_BUFFER,o),n.bufferData(n.ARRAY_BUFFER,c,n.STATIC_DRAW),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.drawArrays(n.POINTS,0,f),window.requestAnimationFrame(e)}var n=t.getContext("webgl")||t.getContext("experimental-webgl");console.info("[wdg.gl3] 'fragment-' + this.fragment=...","fragment-"+this.fragment);var r=n.createProgram();n.attachShader(r,a(n,l.vertex)),n.attachShader(r,i(n,l.fragment)),n.linkProgram(r),n.useProgram(r);var o=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,o),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-.8,.8,.5,-.6,.6,.4,-.4,.4,.7,-.2,.2,.6,-0,0,.8,.2,-.2,0,.4,-.4,.1,.6,-.6,.3,.8,-.8,.2]),n.STATIC_DRAW);var g=n.getAttribLocation(r,"attVertexPosition");n.enableVertexAttribArray(g),n.vertexAttribPointer(g,3,n.FLOAT,!1,0,0),n.enable(n.BLEND),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST);var s,f=7,c=new Float32Array(3*f);window.requestAnimationFrame(e)}function o(t,e,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(console.log(n),console.error("An error occurred compiling the shader: "+e.getShaderInfoLog(r)),null)}function i(t,e){return o(t.FRAGMENT_SHADER,t,e)}function a(t,e){return o(t.VERTEX_SHADER,t,e)}var g=function(){function e(){return r(n,arguments)}var n={en:{}},r=t("$").intl;return e.all=n,e}(),l={vertex:"attribute vec3 attVertexPosition;\n\nvarying vec4 attPosition;\n\nvoid main() {\n  gl_Position = vec4( attVertexPosition.xyz, 1.0 );\n  gl_PointSize = 250.0\n    + (attVertexPosition.z - 1.0) * 120.0;\n  attPosition = gl_Position;\n}\n",fragment:"precision mediump float;\n\nvarying vec4 attPosition;\n\nvoid main() {\n  float x = gl_PointCoord.x - 0.5;\n  float y = gl_PointCoord.y - 0.5;\n  float r = x*x + y*y;\n\n  if (r > 0.25) {\n    gl_FragColor = vec4( 0.0, 0.0, 0.0, 0.0 );\n  } else if (r > 0.24) {\n    gl_FragColor = vec4( 1.0, 1.0, 1.0, 1.0 );\n  } else {\n    gl_FragColor = vec4( gl_PointCoord.y, gl_PointCoord.x, 0.0, 1.0 );\n  }\n}\n"},s=t("dom"),f=t("tfw.data-binding"),c=function(t){var e=s.elem(this,"canvas");f.propInteger(this,"width")(function(t){e.setAttribute("width",t),e.style.width=t+"px"}),f.propInteger(this,"height")(function(t){e.setAttribute("height",t),e.style.height=t+"px"}),f.propString(this,"fragment"),t=f.extend({width:640,height:480,fragment:"a"},t,this),window.setTimeout(r.bind(this,e),20)};e.exports=c,e.exports._=g});
//# sourceMappingURL=wdg.test.js.map