require("tfw.data-binding",function(n,r){function t(){return o(i,arguments)}function e(r,t,e,i){var o="function"==typeof i;"undefined"==typeof t[f]&&(t[f]={}),t[f][e]={value:i,event:new u};var a;a="function"==typeof r?function(n){n=r(n),(o||t[f][e].value!==n)&&(t[f][e].value=n,t[f][e].event.fire(n,t,e))}:function(n){(o||t[f][e].value!==n)&&(t[f][e].value=n,t[f][e].event.fire(n,t,e))};var l=i;return o||(l=function(){return t[f][e].value}),Object.defineProperty(t,e,{get:l,set:a,configurable:!1,enumerable:!0}),n.bind.bind(n,t,e)}var i={en:{}},o=require("$").intl;require("polyfill.string");var u=require("tfw.listeners"),f="_tfw.data-binding_",a={castBoolean:function(n){if("boolean"==typeof n)return n;if("string"==typeof n){if(n=n.trim().toLowerCase(),"1"==n||"true"==n||"yes"==n)return!0;if("0"==n||"false"==n||"no"==n)return!1}return"number"==typeof n?!!n:null},castColor:function(n){return""+n},castEnum:function(n){var r=n.map(String.toLowerCase);return function(t){if("number"==typeof t)return n[Math.floor(t)%n.length];if("string"!=typeof t)return n[0];var e=r.indexOf(t.trim().toLowerCase());return e<0&&(e=0),n[e]}},castInteger:function(n){return"number"==typeof n?Math.floor(n):"boolean"==typeof n?n?1:0:"string"==typeof n?parseInt(n):Number.NaN},castString:function(n){return"string"==typeof n?n:void 0===n||null===n?"":JSON.stringify(n)},castStringArray:function(n){return Array.isArray(n)?n:"string"==typeof n?n.split(",").map(String.trim):[JSON.stringify(n)]},castUnit:function(n){return""+n},castValidator:function(n){if("function"==typeof n)return n;if("boolean"==typeof n)return function(){return n};if("string"==typeof n&&0!=n.trim().length)try{var r=new RegExp(n);return r.test.bind(r)}catch(r){console.error("[castValidator] /"+n+"/ ",r)}return function(){return null}}};n.fire=function(n,r,t){var e=n[r];"undefined"==typeof t&&(t=e),n[r]=t,t===e&&n[f][r].event.fire(n[r],n,r)},n.prop=e.bind(null,null),n.propBoolean=e.bind(null,a.castBoolean),n.propColor=e.bind(null,a.castColor),n.propEnum=function(n){return e.bind(null,a.castEnum(n))},n.propInteger=e.bind(null,a.castInteger),n.propString=e.bind(null,a.castString),n.propStringArray=e.bind(null,a.castStringArray),n.propUnit=e.bind(null,a.castUnit),n.propValidator=e.bind(null,a.castValidator),n.bind=function(n,r,t,e,i){if("undefined"==typeof n[f]||"undefined"==typeof n[f][r])throw console.error(r+" is not a bindable property of ",n),Error(r+" is not a bindable property!");"undefined"==typeof i&&(i={});var o="function"==typeof t?t:function(n,r,o){t[e]="function"==typeof i.converter?i.converter(n):n};return n[f][r].event.add(o),i},n.extend=function(n,r,t){var e,i,o=JSON.parse(JSON.stringify(n));for(e in r)"$"!=e.charAt(0)&&(i=r[e],"undefined"==typeof o[e]?console.error("[tfw.data-binding.extend] Undefined argument: `"+e+"`!"):o[e]=i);if("undefined"!=typeof t){for(e in r)"$"==e.charAt(0)&&Object.defineProperty(t,e,{value:r[e],writable:!1,configurable:!1,enumerable:!1});for(e in o)"$"!=e.charAt(0)&&(t[e]=o[e])}return o},n.converters=a,r.exports._=t});
//# sourceMappingURL=tfw.data-binding.js.map