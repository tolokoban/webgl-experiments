"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}require("dom",function(require,module){function $(dom){if(dom instanceof Node)return dom;if(void 0===dom||null===dom)throw Error("`dom` is not a valid element!",dom);if(dom.$ instanceof Node)return dom.$;if(dom.element instanceof Node)return dom.element;if("string"==typeof dom){var elem=document.getElementById(dom);return elem||console.error("[dom] There is no DOM element with this ID: `"+dom+"`"),elem}return"function"==typeof dom.element?dom.element():dom}function css(element,styles){element=$(element);var key,val;for(key in styles)val=styles[key],element.style[key]=val;return element}function att(element,attribs,value){element=$(element);var key,val;for(key in"string"==typeof attribs&&("undefined"==typeof value&&(value=""),key=attribs,attribs={},attribs[key]=value),attribs)val=attribs[key],element.setAttribute(key,val);return element}function add(element){element=$(element);try{var i,child,isValidArgument;for(i=1;i<arguments.length;i++)if(child=arguments[i],isValidArgument=addArray(element,child)||addText(element,child)||addNode(element,child),!isValidArgument){console.error("Argument #"+i+" of dom.add() is invalid!",arguments);debugger}return element}catch(ex){console.error("[DOM.add] arguments=",[].slice.call(arguments)),console.error("[DOM.add] exception=",ex)}}function addNode(element,child){return child=$(child),!!(child instanceof Node)&&(element.appendChild(child),!0)}function addText(element,child){if("number"==typeof child&&(child=""+child),"string"!=typeof child)return!1;if("<html>"==child.substr(0,6).toLowerCase()){var html=child.substr(6);child=$.tag("span"),child.innerHTML=html}else if(RX_ENTITY.test(child)){var text=child;child=$.tag("span"),child.innerHTML=text}else child=document.createTextNode(child);return element.appendChild(child),!0}function addArray(element,array){return!!Array.isArray(array)&&(array.forEach(function(child){add(element,child)}),!0)}function off(element){if(Array.isArray(element))return element.forEach(function(elem){off(elem)}),element;if("undefined"==typeof element[SYMBOL])return element;var pe=element[SYMBOL].events;return"undefined"==typeof pe?element:void(pe.off(),delete element[SYMBOL].events)}function on(element,slots,extra){if("function"==typeof slots||null===slots)slots={tap:slots};else if("string"==typeof slots&&"function"==typeof extra){var obj={};obj[slots]=extra,slots=obj}if(Array.isArray(element))return element.forEach(function(elem){on(elem,slots)}),element;element=$(element),"undefined"==typeof element[SYMBOL]&&(element[SYMBOL]={}),"undefined"==typeof element[SYMBOL].events&&(element[SYMBOL].events=Gestures(element));var key,val,preview;for(key in slots)val=slots[key],"!"==key.charAt(0)?(key=key.substr(1),preview=!0):preview=!1,-1<NON_POINTER_EVENTS.indexOf(key.toLowerCase())?element.addEventListener(key,val,preview):element[SYMBOL].events.on(key,val,preview);return element}function tagNS(ns,name){try{var i,arg,key,val,e=document.createElementNS(ns,name.trim().toLowerCase());for(i=2;i<arguments.length;i++)if(arg=arguments[i],Array.isArray(arg))arg.forEach(function(child){switch(_typeof(child)){case"string":case"number":case"boolean":if(child=""+child,"<html>"==child.substr(0,6)){var html=child.substr(6);child=$.tag("span"),child.innerHTML=html}else child=document.createTextNode(child);}add(e,child)});else switch(_typeof(arg)){case"string":arg.split(" ").forEach(function(item){0<item.length&&addClass(e,item)});break;case"object":for(key in arg)val=arg[key],e.setAttribute(key,val);break;default:throw Error("[dom.tag] Error creating <"+name+">: Invalid argument #"+i+"!");}return e}catch(ex){console.error("[dom.tagNS] Error with `ns` = ",ns," and `name` = ",name),console.error(ex)}}function addClass(elem){var args=[].slice.call(arguments,1);return Array.isArray(elem)?(args.unshift(null),elem.forEach(function(child){args[0]=child,addClass.apply(void 0,args)}),elem):(elem=$(elem),args.forEach(function(className){if("string"==typeof className&&(className=className.trim(),0!=className.length))try{elem.classList&&elem.classList.add(className)}catch(ex){console.error("[dom.addClass] Invalid class name: ",className),console.error(ex)}}),elem)}function hasClass(elem,className){return elem=$(elem),!!elem.classList&&elem.classList.contains(className)}function removeClass(elem){var args=[].slice.call(arguments,1);return Array.isArray(elem)?(args.unshift(null),elem.forEach(function(child){args[0]=child,removeClass.apply(void 0,args)}),elem):(elem=$(elem),args.forEach(function(className){if("string"==typeof className)try{elem.classList&&elem.classList.remove(className)}catch(ex){console.error("[dom.removeClass] Invalid class name: ",className),console.error(ex)}}),elem)}function toggleClass(elem){var args=[].slice.call(arguments,1);return args.forEach(function(className){hasClass(elem,className)?removeClass(elem,className):addClass(elem,className)}),elem}function saveStyle(elements){return Array.isArray(elements)?void elements.forEach(function(elem){elem=$(elem),"undefined"==typeof elem[SYMBOL]&&(elem[SYMBOL]={}),Array.isArray(elem[SYMBOL].style)||(elem[SYMBOL].style=[]),elem[SYMBOL].style.push(JSON.stringify(elem.style))}):saveStyle(Array.prototype.slice.call(arguments))}function restoreStyle(elements){return Array.isArray(elements)?void elements.forEach(function(elem){if(elem=$(elem),"undefined"==typeof elem[SYMBOL]||!Array.isArray(elem[SYMBOL].style))throw Error("[dom.restoreStyle] `saveStyle()` has never been used on this element!");if(0==elem[SYMBOL].style.length)throw Error("[dom.restoreStyle] more `restore` than `save`!");var k,v,styles=JSON.parse(elem[SYMBOL].style.pop());for(k in styles)v=styles[k],"undefined"!=typeof v&&(elem.style[k]=v)}):restoreStyle(Array.prototype.slice.call(arguments))}var _=function(){function _(){return X(D,arguments)}var D={en:{}},X=require("$").intl;return _.all=D,_}();require("polyfill.classList");var Theme=require("dom.theme"),Gestures=require("tfw.gestures"),SYMBOL="@dom"+Date.now(),RX_ENTITY=/^&(#[0-9]+|[a-zA-Z0-9]+);$/;module.exports=$,$.tagNS=tagNS,$.svgRoot=tagNS.bind(void 0,"http://www.w3.org/2000/svg","svg",{version:"1.1","xmlns:svg":"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),$.svg=tagNS.bind(void 0,"http://www.w3.org/2000/svg"),$.tag=tagNS.bind(void 0,"http://www.w3.org/1999/xhtml"),$.div=tagNS.bind(void 0,"http://www.w3.org/1999/xhtml","div"),$.txt=window.document.createTextNode.bind(window.document),$.textOrHtml=function(element,content){return"undefined"==typeof content&&(content=""),null===content&&(content=""),"string"!=typeof content&&(content=JSON.stringify(content)),"<html>"==content.substr(0,6)?element.innerHTML=content.substr(6):element.textContent=content,element},$.get=function(element,query){return element=$(element),"undefined"==typeof query&&(query=element,element=window.document),element.querySelector(query)},$.elem=function(target){var args=[].slice.call(arguments);args.shift(),0==args.length&&(args=["div"]),args.push("dom","custom");var e;return"undefined"==typeof args[0].element?"function"==typeof args[0].appendChild?(e=args[0],addClass(e,"dom","custom")):e=$.tag.apply($,args):(e=args[0].element,addClass(e,"dom","custom")),Object.defineProperty(target,"element",{value:e,writable:!1,configurable:!1,enumerable:!0}),e},$.css=css,$.att=att,$.removeAtt=function(element,attrib){return element=$(element),element.removeAttribute(attrib),element},$.addClass=addClass,$.hasClass=hasClass,$.removeClass=removeClass,$.toggleClass=toggleClass,$.saveStyle=saveStyle,$.restoreStyle=restoreStyle,$.registerTheme=Theme.register.bind($),$.applyTheme=Theme.apply.bind($),$.registerAndApplyTheme=function(name,styles){Theme.register.call(this,name,styles),Theme.apply.call(this,name)},$.replace=function(newElem,oldElem){return newElem=$(newElem),oldElem=$(oldElem),oldElem.parentNode.replaceChild(newElem,oldElem),newElem},$.detach=function(element){element=$(element);var parent=element.parentElement;return parent?(parent.removeChild(element),parent):parent},$.on=on,$.off=off,$.add=add,$.wrap=function(obj,element,nomethods){return(Object.defineProperty(obj,"element",{value:element,writable:!1,configurable:!1,enumerable:!0}),nomethods)?obj:(obj.on=on.bind(obj,element),obj.css=css.bind(obj,element),obj.add=add.bind(obj,element),obj.att=att.bind(obj,element),obj.addClass=addClass.bind(obj,element),obj.hasClass=hasClass.bind(obj,element),obj.removeClass=removeClass.bind(obj,element),obj.toggleClass=toggleClass.bind(obj,element),obj)},$.clear=function(element){element=$(element);for(var e=element;e.firstChild;)e.removeChild(e.firstChild);var args=[].slice.call(arguments);return 1<args.length&&add.apply(this,args),element};var NON_POINTER_EVENTS=["keyup","keydown","scroll","load","error"];module.exports._=_});
//# sourceMappingURL=dom.js.map