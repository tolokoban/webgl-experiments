"use strict";require("tfw.color",function(require,module){function Color(code){this.R=0,this.G=0,this.B=0,this.A=0,this.H=0,this.S=0,this.L=0,"string"==typeof code&&this.parse(code)}function parseHexa(text){if("#"!==text.charAt(0))return!1;var R=0,G=0,B=0,A=1;switch(text.length){case 4:R=parseInt(text.charAt(1),16)*INV15,G=parseInt(text.charAt(2),16)*INV15,B=parseInt(text.charAt(3),16)*INV15;break;case 5:R=parseInt(text.charAt(1),16)*INV15,G=parseInt(text.charAt(2),16)*INV15,B=parseInt(text.charAt(3),16)*INV15,A=parseInt(text.charAt(4),16)*INV15;break;case 7:R=parseInt(text.substr(1,2),16)*INV255,G=parseInt(text.substr(3,2),16)*INV255,B=parseInt(text.substr(5,2),16)*INV255;break;case 9:R=parseInt(text.substr(1,2),16)*INV255,G=parseInt(text.substr(3,2),16)*INV255,B=parseInt(text.substr(5,2),16)*INV255,A=parseInt(text.substr(7,2),16)*INV255;break;default:}return isNaN(R)||isNaN(G)||isNaN(B)||isNaN(A)?this.R=this.G=this.B=this.A=0:(this.R=R,this.G=G,this.B=B,this.A=A),!0}function parseRGB(text){var m=RX_RGB.exec(text);return!!m&&(this.R=clamp01(parseInt(m[1],10)*INV255),this.G=clamp01(parseInt(m[2],10)*INV255),this.B=clamp01(parseInt(m[3],10)*INV255),this.A=1,!0)}function parseRGBA(text){var m=RX_RGBA.exec(text);return!!m&&(this.R=clamp01(parseInt(m[1],10)*INV255),this.G=clamp01(parseInt(m[2],10)*INV255),this.B=clamp01(parseInt(m[3],10)*INV255),this.A=clamp01(parseFloat(m[4])),!0)}function parseHSL(text){var m=RX_HSL.exec(text);return!!m&&(this.H=clamp01(parseInt(m[1],10)*INV359),this.S=clamp01(parseInt(m[2],10)*INV99),this.L=clamp01(parseInt(m[3],10)*INV99),this.A=1,this.hsl2rgb(),!0)}function hexa2(value){var out=Math.floor(value).toString(16);return 2>out.length&&(out="0"+out),out}function clamp01(v){return 0>v?0:1<v?1:v}function staticParse(text){var color=new Color;return color.parse(text),color}var _=function(){function _(){return X(D,arguments)}var D={en:{},fr:{}},X=require("$").intl;return _.all=D,_}();"use strict",module.exports=Color,Color.prototype.luminance=function(){return .2126*this.R+.7152*this.G+.0722*this.B},Color.prototype.stringify=function(){var color=hexa2(255*this.R)+hexa2(255*this.G)+hexa2(255*this.B);return 1>this.A&&(color+=hexa2(255*this.A)),"#".concat(color)},Color.prototype.parse=function(_text){var text="undefined"==typeof _text?"#000000":_text,input=text.trim().toUpperCase();return!!parseHexa.call(this,input)||!!parseRGB.call(this,input)||!!parseRGBA.call(this,input)||!!parseHSL.call(this,input)},Color.prototype.copy=function(){var newColor=new Color;return newColor.R=this.R,newColor.G=this.G,newColor.B=this.B,newColor.A=this.A,newColor.H=this.H,newColor.S=this.S,newColor.L=this.L,newColor},Color.prototype.hsl2rgb=function(){var H=6*this.H,S=this.S,L=this.L,chroma=(1-Math.abs(2*L-1))*S,x=chroma*(1-Math.abs(H%2-1)),R=0,G=0,B=0;3>H?1>H?(R=chroma,G=x,B=0):2>H?(R=x,G=chroma,B=0):(R=0,G=chroma,B=x):4>H?(R=0,G=x,B=chroma):5>H?(R=x,G=0,B=chroma):(R=chroma,G=0,B=x);var shift=L-.5*chroma;this.R=R+shift,this.G=G+shift,this.B=B+shift},Color.prototype.rgb2hsl=function(){var R=this.R,G=this.G,B=this.B,min=Math.min(R,G,B),max=Math.max(R,G,B),delta=max-min;this.L=.5*(max+min),1e-6>delta?(this.H=0,this.S=0):(this.S=delta/(1-Math.abs(2*this.L-1)),this.H=max===R?G>=B?INV6*((G-B)/delta):1-INV6*((B-G)/delta):max===G?INV6*(2+(B-R)/delta):INV6*(4+(R-G)/delta))};var INSTANCE=new Color;Color.instance=INSTANCE,Color.parse=staticParse,Color.luminance=function(text){var color=staticParse(text);return color.luminance()},Color.newRGB=function(red){var color=new Color;return color.R=red,color.G=red,color.B=red,color},Color.newRGBA=function(red){var color=new Color;return color.R=red,color.G=red,color.B=red,color.A=red,color};var INV6=1/6,INV15=1/15,INV99=1/99,INV255=1/255,INV359=1/359,RX_RGB=/^RGB[\s\(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/,RX_RGBA=/^RGBA[\s\(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)[^0-9\.]+([0-9\.]+)/,RX_HSL=/^HSL[\s\(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/;module.exports._=_});
//# sourceMappingURL=tfw.color.js.map