{"version":3,"sources":["tfw.data-binding.js"],"names":["require","module","exports","propCast","caster","obj","att","val","hasSpecialGetter","value","event","Listeners","setter","v","fire","getter","Object","defineProperty","get","set","configurable","enumerable","bind","toLowerCase","txt","trim","_","X","D","arguments","intl","all","$","ParseUnit","parseUnit","ID","converters","castFunction","castArray","Array","isArray","castBoolean","castColor","castDate","Date","castEnum","enumeration","lowerCaseEnum","map","Math","floor","length","idx","indexOf","castInteger","parseInt","Number","NaN","castFloat","parseFloat","castRegexp","RegExp","ex","console","error","castString","JSON","stringify","castStringArray","split","castUnit","u","isNaN","castValidator","rx","test","currentValue","readOnly","name","writtable","prop","propWidget","widget","widgetAttribute","propToggleClass","target","attribute","values","prefix","convertedValues","forEach","itm","key","addClass","element","removeClass","propAddClass","className","propRemoveClass","propArray","propBoolean","propColor","propDate","propEnum","propFunction","propInteger","propFloat","propRegexp","propString","propStringArray","propUnit","propValidator","srcObj","srcAtt","dstObj","dstAtt","options","Error","converter","lambda","add","extend","_def","_ext","_obj","callback","ext","out","parse","extKeys","keys","charAt","writable"],"mappings":"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","sourcesContent":["/** @module tfw.data-binding */require( 'tfw.data-binding', function(require, module, exports) { var _=function(){var D={\"en\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\r\n   \"use strict\";\r\n\r\n\r\n/**\r\n * @module\r\n *\r\n * Provide all the functions needed for data-binding.\r\n * JavaScript object have __attributes__.\r\n * Data-binding add a new comcept to objects: __properties__.\r\n * A property is an attribute you can listen for get and set operations.\r\n *\r\n * @example\r\n * var DB = require('tfw.data-binding');\r\n * DB.propAddClass( widget, 'visible', 'show' );\r\n */\r\nrequire(\"polyfill.string\");\r\nconst\r\n    $ = require(\"dom\"),\r\n    ParseUnit = require(\"tfw.css\").parseUnit,\r\n    Listeners = require(\"tfw.listeners\");\r\n\r\nconst\r\n    ID = '_tfw.data-binding_',\r\n    converters = {\r\n        castFunction: function(v) {\r\n            if (typeof v !== 'function') return null;\r\n            return v;\r\n        },\r\n        castArray: function(v) {\r\n            if (Array.isArray(v)) return v;\r\n            if (v === null || v === undefined) return [];\r\n            return [v];\r\n        },\r\n        castBoolean: function(v) {\r\n            if (typeof v === 'boolean') return v;\r\n            if (typeof v === 'string') {\r\n                v = v.trim().toLowerCase();\r\n                if (v === '0' || v === 'false' || v === 'no' || v === 'null' || v === 'undefined') {\r\n                    return false;\r\n                }\r\n                return true;\r\n            }\r\n            if (typeof v === 'number') {\r\n                return v !== 0 ? true : false;\r\n            }\r\n            return null;\r\n        },\r\n        castColor: function(v) {\r\n            return \"\" + v;\r\n        },\r\n        castDate: function(v) {\r\n            if (typeof v === 'number' || typeof v === 'string')\r\n                return new Date(v);\r\n            if (v instanceof Date) return v;\r\n            return new Date();\r\n        },\r\n        castEnum: function(enumeration) {\r\n            var lowerCaseEnum = enumeration.map(toLowerCase);\r\n            return function(v) {\r\n                if (typeof v === 'number') {\r\n                    return enumeration[Math.floor(v) % enumeration.length];\r\n                }\r\n                if (typeof v !== 'string') return enumeration[0];\r\n                var idx = lowerCaseEnum.indexOf(v.trim().toLowerCase());\r\n                if (idx < 0) idx = 0;\r\n                return enumeration[idx];\r\n            };\r\n        },\r\n        castInteger: function(v) {\r\n            if (typeof v === 'number') {\r\n                return Math.floor(v);\r\n            }\r\n            if (typeof v === 'boolean') return v ? 1 : 0;\r\n            if (typeof v === 'string') {\r\n                return parseInt(v);\r\n            }\r\n            return Number.NaN;\r\n        },\r\n        castFloat: function(v) {\r\n            if (typeof v === 'number') {\r\n                return v;\r\n            }\r\n            if (typeof v === 'boolean') return v ? 1 : 0;\r\n            if (typeof v === 'string') {\r\n                return parseFloat(v);\r\n            }\r\n            return Number.NaN;\r\n        },\r\n        castRegexp: function(v) {\r\n            if (v instanceof RegExp) return v;\r\n            if (typeof v === 'string' && v.trim().length != 0) {\r\n                try {\r\n                    return new RegExp(v);\r\n                }\r\n                // Ignore Regular Expression errors.\r\n                catch (ex) {\r\n                    console.error(\"[castRegexp] /\" + v + \"/ \", ex);\r\n                }\r\n            };\r\n            return null;\r\n        },\r\n        castString: function(v) {\r\n            if (typeof v === 'string') return v;\r\n            if (v === undefined || v === null) return '';\r\n            return JSON.stringify(v);\r\n        },\r\n        castStringArray: function(v) {\r\n            if (Array.isArray(v)) return v;\r\n            if (v === null || v === undefined) return [];\r\n            if (typeof v === 'string') {\r\n                return v.split(',').map(trim);\r\n            }\r\n            return [JSON.stringify(v)];\r\n        },\r\n        castUnit: function(v) {\r\n            if (!v) return { v: 0, u: 'px' };\r\n            if (typeof v.v !== 'undefined') {\r\n                v.v = parseFloat(v.v);\r\n                if (isNaN(v.v)) return { v: 0, u: 'px' };\r\n                if (typeof v.u !== 'string') {\r\n                    v.u = 'px';\r\n                } else {\r\n                    v.u = v.u.trim().toLowerCase();\r\n                }\r\n                if (v.u === '') {\r\n                    v.u = 'px';\r\n                }\r\n                return { v: v.v, u: v.u };\r\n            }\r\n            if (typeof v === 'number') return { v: v, u: 'px' };\r\n            if (typeof v !== 'string') return { v: 0, u: 'px' };\r\n            return ParseUnit('' + v);\r\n        },\r\n        castValidator: function(v) {\r\n            if (typeof v === 'function') return v;\r\n            if (typeof v === 'boolean') return function() { return v; };\r\n            if (typeof v === 'string' && v.trim().length != 0) {\r\n                try {\r\n                    var rx = new RegExp(v);\r\n                    return rx.test.bind(rx);\r\n                }\r\n                // Ignore Regular Expression errors.\r\n                catch (ex) {\r\n                    console.error(\"[castValidator] /\" + v + \"/ \", ex);\r\n                }\r\n            };\r\n            return function() { return null; };\r\n        }\r\n    };\r\n\r\n/**\r\n * @param {any|function} val - Default value, or a specific getter (if `val` is a function).\r\n */\r\nfunction propCast(caster, obj, att, val) {\r\n    var hasSpecialGetter = typeof val === 'function';\r\n    if (typeof obj[ID] === 'undefined') obj[ID] = {};\r\n    obj[ID][att] = {\r\n        value: val,\r\n        event: new Listeners()\r\n    };\r\n    var setter;\r\n    if (typeof caster === 'function') {\r\n        setter = function(v) {\r\n            v = caster(v);\r\n            // If there is a special getter, any set will fire.\r\n            // Otherwise, we fire only if the value has changed.\r\n            if (hasSpecialGetter || obj[ID][att].value !== v) {\r\n                obj[ID][att].value = v;\r\n                obj[ID][att].event.fire(v, obj, att);\r\n            }\r\n        };\r\n    } else {\r\n        setter = function(v) {\r\n            // If there is a special getter, any set will fire.\r\n            // Otherwise, we fire only if the value has changed.\r\n            if (hasSpecialGetter || obj[ID][att].value !== v) {\r\n                obj[ID][att].value = v;\r\n                obj[ID][att].event.fire(v, obj, att);\r\n            }\r\n        };\r\n    }\r\n    var getter = val;\r\n    if (!hasSpecialGetter) {\r\n        // Default getter.\r\n        getter = function() { return obj[ID][att].value; };\r\n    }\r\n    Object.defineProperty(obj, att, {\r\n        get: getter,\r\n        set: setter,\r\n        configurable: false,\r\n        enumerable: true\r\n    });\r\n    return exports.bind.bind(exports, obj, att);\r\n};\r\n\r\n/**\r\n * @export function fire\r\n *\r\n * Set a new value and fire the event even if the value has not changed.\r\n */\r\nexports.fire = function(obj, att, val) {\r\n    var currentValue = obj[att];\r\n    if (typeof val === 'undefined') val = currentValue;\r\n\r\n    obj[ID][att].value = val;\r\n    obj[ID][att].event.fire(obj[att], obj, att);\r\n};\r\n\r\n/**\r\n * @export function set\r\n *\r\n * Set a new value without firing any event.\r\n */\r\nexports.set = function(obj, att, val) {\r\n    if (typeof obj[ID] === 'undefined') obj[ID] = {};\r\n    if (typeof obj[ID][att] === 'undefined') obj[ID][att] = {};\r\n    obj[ID][att].value = val;\r\n};\r\n\r\n/**\r\n * @export function get\r\n *\r\n * Get a value without firing any event.\r\n */\r\nexports.get = function(obj, att) {\r\n    if (typeof obj[ID] === 'undefined') return undefined;\r\n    if (typeof obj[ID][att] === 'undefined') return undefined;\r\n    return obj[ID][att].value;\r\n};\r\n\r\n/**\r\n * @export function readOnly\r\n * @param {object} obj - Object to which we want to add a read only attribute.\r\n * @param {string} name - Attribute's name.\r\n * @param {function} value - Function to execute anytime someone gets the value of this attribute.\r\n * @param {any} value - Constatn value of this attribute.\r\n */\r\nexports.readOnly = function(obj, name, value) {\r\n    if (typeof value === 'function') {\r\n        Object.defineProperty(obj, name, {\r\n            get: value,\r\n            set: function() {},\r\n            configurable: false,\r\n            enumerable: true\r\n        });\r\n    } else {\r\n        Object.defineProperty(obj, name, {\r\n            value: value,\r\n            writtable: false,\r\n            configurable: false,\r\n            enumerable: true\r\n        });\r\n    }\r\n};\r\n\r\n/**\r\n * Create a property on which we can bind another property.\r\n *\r\n * @param {object} obj - Object to which we want to add a property.\r\n * @param {string} att - Name of the attribute of `obj`.\r\n *\r\n */\r\nexports.prop = propCast.bind(null, null);\r\nexports.propWidget = function(obj, att, widget, widgetAttribute) {\r\n    if (typeof widgetAttribute === 'undefined') widgetAttribute = att;\r\n\r\n    if (typeof obj[ID] === 'undefined') obj[ID] = {};\r\n    obj[ID][att] = {\r\n        event: new Listeners()\r\n    };\r\n    exports.bind(widget, widgetAttribute, function(v) {\r\n        obj[ID][att].event.fire(v, obj, att);\r\n    });\r\n    Object.defineProperty(obj, att, {\r\n        get: function() {\r\n            return widget[widgetAttribute];\r\n        },\r\n        set: function(v) {\r\n            widget[widgetAttribute] = v;\r\n        },\r\n        configurable: false,\r\n        enumerable: true\r\n    });\r\n    return exports.bind.bind(exports, obj, att);\r\n};\r\n/**\r\n * @export @function propToggleClass\r\n * Create an enum attribute which toggles a CSS class when assigned.\r\n *\r\n * @param {array|object} values - If this is an array, we will convert\r\n * it  into an  object.  For instance `[\"show\",  \"hide\"]` will  become\r\n * `{show: \"show\", hide: \"hide\"}`.\r\n */\r\nexports.propToggleClass = function(target, attribute, values, prefix) {\r\n    if (typeof prefix !== 'string') prefix = '';\r\n    var convertedValues = {};\r\n    if (typeof values === 'string') {\r\n        convertedValues[values] = values;\r\n    } else if (Array.isArray(values)) {\r\n        values.forEach(function(itm) {\r\n            convertedValues[itm] = itm;\r\n        });\r\n    } else {\r\n        convertedValues = values;\r\n    }\r\n    return propCast(null, target, attribute)(function(v) {\r\n        var key, val;\r\n        for (key in convertedValues) {\r\n            val = convertedValues[key];\r\n            if (key == v) {\r\n                $.addClass(target.element, prefix + val);\r\n            } else {\r\n                $.removeClass(target.element, prefix + val);\r\n            }\r\n        }\r\n    });\r\n};\r\n/**\r\n * @export @function propAddClass\r\n * Create a boolean attribute that toggle a CSS class on the `element` attribute of `target`.\r\n * If the value id `true`, `className` is added.\r\n * @example\r\n * DB.propAddClass( this, 'wide', 'fullscreen' );\r\n * DB.propAddClass( this, 'wide' );\r\n */\r\nexports.propAddClass = function(target, attribute, className) {\r\n    if (typeof className === 'undefined') className = attribute;\r\n    return propCast(converters.castBoolean, target, attribute)(function(v) {\r\n        if (v) $.addClass(target.element, className);\r\n        else $.removeClass(target.element, className);\r\n    });\r\n};\r\n/**\r\n * @export @function propAddClass\r\n * Create a boolean attribute that toggle a CSS class on the `element` attribute of `target`.\r\n * If the value id `true`, `className` is removed.\r\n * @example\r\n * DB.propRemoveClass( this, 'visible', 'hide' );\r\n */\r\nexports.propRemoveClass = function(target, attribute, className) {\r\n    if (typeof className === 'undefined') className = attribute;\r\n    return propCast(converters.castBoolean, target, attribute)(function(v) {\r\n        if (v) $.removeClass(target.element, className);\r\n        else $.addClass(target.element, className);\r\n    });\r\n};\r\nexports.propArray = propCast.bind(null, converters.castArray);\r\nexports.propBoolean = propCast.bind(null, converters.castBoolean);\r\nexports.propColor = propCast.bind(null, converters.castColor);\r\nexports.propDate = propCast.bind(null, converters.castDate);\r\nexports.propEnum = function(enumeration) {\r\n    return propCast.bind(null, converters.castEnum(enumeration));\r\n};\r\nexports.propFunction = propCast.bind(null, converters.castFunction);\r\nexports.propInteger = propCast.bind(null, converters.castInteger);\r\nexports.propFloat = propCast.bind(null, converters.castFloat);\r\nexports.propRegexp = propCast.bind(null, converters.castRegexp);\r\nexports.propString = propCast.bind(null, converters.castString);\r\nexports.propStringArray = propCast.bind(null, converters.castStringArray);\r\nexports.propUnit = propCast.bind(null, converters.castUnit);\r\nexports.propValidator = propCast.bind(null, converters.castValidator);\r\n\r\nexports.bind = function(srcObj, srcAtt, dstObj, dstAtt, options) {\r\n    if (typeof srcObj[ID] === 'undefined' || typeof srcObj[ID][srcAtt] === 'undefined') {\r\n        console.error(JSON.stringify(srcAtt) + \" is not a bindable property!\", {\r\n            srcObj: srcObj,\r\n            srcAtt: srcAtt,\r\n            dstObj: dstObj,\r\n            dstAtt: dstAtt,\r\n            options: options\r\n        });\r\n        throw Error(JSON.stringify(srcAtt) + \" is not a bindable property!\");\r\n    }\r\n\r\n    if (typeof options === 'undefined') options = {};\r\n    if (options.value) {\r\n        options.converter = function() {\r\n            return options.value;\r\n        };\r\n    }\r\n    var lambda = typeof dstObj === 'function' ? dstObj : function(v, obj, att) {\r\n        dstObj[dstAtt] = typeof options.converter === 'function' ? options.converter(v) : v;\r\n    };\r\n    srcObj[ID][srcAtt].event.add(lambda);\r\n\r\n    return options;\r\n};\r\n\r\n\r\n/**\r\n * @export.extend\r\n * @function extend\r\n * @param {object} _def - Default values for properties.\r\n * @param {object} _ext - Properties to override.\r\n * @param {object} _obj - DOM object whose properties belong.\r\n * @param {function}  callback -  Optional. Functioin  to call  when a\r\n * bindable property of `obj` changes.\r\n * @returns {object} A copy of `def` with values of `ext`.\r\n */\r\nexports.extend = function(_def, _ext, _obj, callback) {\r\n    const\r\n        def = _def || {},\r\n        ext = _ext || {},\r\n        obj = _obj || {},\r\n        out = JSON.parse(JSON.stringify(def)),\r\n        extKeys = Object.keys(ext);\r\n\r\n    extKeys.forEach((key) => {\r\n        if (key.charAt(0) === '$') return;\r\n        const val = ext[key];\r\n        if (typeof out[key] === 'undefined') {\r\n            console.error(`[tfw.data-binding.extend] Undefined argument: \"${key}\"!`);\r\n        } else {\r\n            out[key] = val;\r\n        }\r\n    });\r\n\r\n    if (typeof obj !== 'undefined') {\r\n        extKeys.forEach((key) => {\r\n            if (key.charAt(0) !== '$') return;\r\n            Object.defineProperty(obj, key, {\r\n                value: ext[key],\r\n                writable: false,\r\n                configurable: false,\r\n                enumerable: false\r\n            });\r\n        });\r\n        // Setting values.\r\n        Object.keys(out).forEach((key) => {\r\n            if (key.charAt(0) !== '$') {\r\n                try {\r\n                    obj[key] = out[key];\r\n                } catch (ex) {\r\n                    console.error(`Trying to extend property \"${key}\" of object `, obj);\r\n                    console.error(\"...with object \", out);\r\n                    console.error(\"...but got \", ex);\r\n                }\r\n            }\r\n        });\r\n        // General callback.\r\n        if (typeof callback === 'function') {\r\n            Object.keys(obj[ID]).forEach((key) => {\r\n                exports.bind(obj, key, callback);\r\n            });\r\n            callback();\r\n        }\r\n    }\r\n\r\n    return out;\r\n};\r\n\r\n\r\nfunction toLowerCase(txt) {\r\n    return txt.toLowerCase();\r\n}\r\n\r\nfunction trim(txt) {\r\n    return txt.trim();\r\n}\r\n\r\nexports.converters = converters;\r\n\r\n\r\nmodule.exports._ = _;\n})"]}