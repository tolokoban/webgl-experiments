"use strict";require("tfw.view.icon",function(require,module){function createSvgFromDefinition(def){var svgParent=$.svg("g",{"stroke-width":6,fill:"none","stroke-linecap":"round","stroke-linejoin":"round"}),elementsToFillPerColor=[[],[],[],[],[],[],[],[]],elementsToStrokePerColor=[[],[],[],[],[],[],[],[]],svgRootGroup=addChild(this.$,elementsToFillPerColor,elementsToStrokePerColor,def);return svgRootGroup?($.att(svgRootGroup,{"stroke-width":6,fill:"none","stroke-linecap":"round","stroke-linejoin":"round"}),{svgRootGroup:svgRootGroup,elementsToFillPerColor:elementsToFillPerColor,elementsToStrokePerColor:elementsToStrokePerColor}):null}function addChild(parent,elementsToFillPerColor,elementsToStrokePerColor,def){if("string"==typeof def)return $.add(parent,def);if(!checkDefinitionSyntax(def))return null;var elementName=def[0],element=$.svg(elementName);return def.forEach(function(childItem,index){0===index||(Array.isArray(childItem)?childItem.forEach(addChild.bind(null,element,elementsToFillPerColor,elementsToStrokePerColor)):setAttributesAndRegisterElementsWithSpecialColors(element,elementsToFillPerColor,elementsToStrokePerColor,childItem))}),$.add(parent,element),element}function setAttributesAndRegisterElementsWithSpecialColors(node,elementsToFillPerColor,elementsToStrokePerColor,attribs){var attName,attValue,valueAsIndex,elementsPerColor;for(attName in attribs)attValue=attribs[attName],"fill"===attName||"stroke"===attName?(valueAsIndex=parseInt(attValue),isNaN(valueAsIndex)?$.att(node,attName,attValue):(elementsPerColor="fill"===attName?elementsToFillPerColor:elementsToStrokePerColor,valueAsIndex=clamp(valueAsIndex,0,elementsPerColor.length-1),elementsPerColor[valueAsIndex].push(node))):$.att(node,attName,attValue)}function checkDefinitionSyntax(def){if("undefined"==typeof def)return!1;if(!Array.isArray(def))throw"Definition of SVG elements must be arrays!\n"+JSON.stringify(def);var svgElementTagName=def[0];if("string"!=typeof svgElementTagName)throw"The first item of a SVG element must be a string!\n"+svgElementTagName;return!0}function updatePen(penIndex){var penColor=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"0";if(this._content){var elementsToFill=this._content.elementsToFillPerColor[penIndex];Array.isArray(elementsToFill)||(elementsToFill=[]);var elementsToStroke=this._content.elementsToStrokePerColor[penIndex];Array.isArray(elementsToStroke)||(elementsToStroke=[]),updateColor(elementsToFill,elementsToStroke,penColor)}}function updateColor(elementsToFill,elementsToStroke,color){updateColorForType("fill",elementsToFill,FILL_COLORS_TO_CLASSES,color),updateColorForType("stroke",elementsToStroke,STROKE_COLORS_TO_CLASSES,color)}function updateColorForType(attName,elements,classes,color){var className=classes[color];elements.forEach(function(element){Object.values(classes).forEach(function(classNameToRemove){$.removeClass(element,classNameToRemove)})}),"undefined"==typeof className?elements.forEach(function(element){$.att(element,attName,color)}):elements.forEach(function(element){$.addClass(element,className),$.removeAtt(element,attName)})}function clamp(value,min,max){return value<min?min:value>max?max:value}var _=function(){function _(){return X(D,arguments)}var D={en:{},fr:{}},X=require("$").intl;return _.all=D,_}();"use strict",require("polyfill.object.values");var $=require("dom"),Icons=require("tfw.icons"),CODE_BEHIND={onContentChanged:function(contentStringOrObject){try{var content="string"==typeof contentStringOrObject?Icons.iconsBook[contentStringOrObject]:contentStringOrObject;if(this._content=createSvgFromDefinition.call(this,content),!this._content)return;$.clear(this,this._content.svgRootGroup);for(var penIndex,_arr=[0,1,2,3,4,5,6,7],_i=0;_i<_arr.length;_i++)penIndex=_arr[_i],updatePen.call(this,penIndex,this["pen".concat(penIndex)]);this.$.style.display=""}catch(ex){this.$.style.display="none",""!==this.content&&(this.content="")}},onPen0Changed:function onPen0Changed(v){updatePen.call(this,0,v)},onPen1Changed:function onPen1Changed(v){updatePen.call(this,1,v)},onPen2Changed:function onPen2Changed(v){updatePen.call(this,2,v)},onPen3Changed:function onPen3Changed(v){updatePen.call(this,3,v)},onPen4Changed:function onPen4Changed(v){updatePen.call(this,4,v)},onPen5Changed:function onPen5Changed(v){updatePen.call(this,5,v)},onPen6Changed:function onPen6Changed(v){updatePen.call(this,6,v)},onPen7Changed:function onPen7Changed(v){updatePen.call(this,7,v)}},FILL_COLORS_TO_CLASSES={0:"thm-svg-fill0",1:"thm-svg-fill1",P:"thm-svg-fill-P",PL:"thm-svg-fill-PL",PD:"thm-svg-fill-PD",S:"thm-svg-fill-S",SL:"thm-svg-fill-SL",SD:"thm-svg-fill-SD"},STROKE_COLORS_TO_CLASSES={0:"thm-svg-stroke0",1:"thm-svg-stroke1",P:"thm-svg-stroke-P",PL:"thm-svg-stroke-PL",PD:"thm-svg-stroke-PD",S:"thm-svg-stroke-S",SL:"thm-svg-stroke-SL",SD:"thm-svg-stroke-SD"};try{module.exports=function(){function defVal(args,attName,attValue){return args[attName]===void 0?attValue:args[attName]}function addClassIfFalse(element,className,value){value?$.removeClass(element,className):$.addClass(element,className)}function addClassIfTrue(element,className,value){value?$.addClass(element,className):$.removeClass(element,className)}var $=require("dom"),PM=require("tfw.binding.property-manager"),Tag=require("tfw.view").Tag,Link=require("tfw.binding.link"),View=require("tfw.view");var Converters=require("tfw.binding.converters");View.ensureCodeBehind(CODE_BEHIND,"onContentChanged","onPen0Changed","onPen1Changed","onPen2Changed","onPen3Changed","onPen4Changed","onPen6Changed","onPen7Changed");var conv_boolean=Converters.get("boolean"),conv_unit=Converters.get("unit"),conv_string=Converters.get("string");return function ViewClass(args){try{"undefined"==typeof args&&(args={}),this.$elements={};var that=this,pm=PM(this);pm.create("visible",{cast:conv_boolean}),pm.create("content"),pm.create("size",{cast:conv_unit}),pm.create("animate",{cast:conv_boolean}),pm.create("flipH",{cast:conv_boolean}),pm.create("flipV",{cast:conv_boolean}),pm.create("pen0",{cast:conv_string}),pm.create("pen1",{cast:conv_string}),pm.create("pen2",{cast:conv_string}),pm.create("pen3",{cast:conv_string}),pm.create("pen4",{cast:conv_string}),pm.create("pen5",{cast:conv_string}),pm.create("pen6",{cast:conv_string}),pm.create("pen7",{cast:conv_string});var e_=new Tag("SVG",["class","width","height","viewBox","preserveAspectRatio"]);Object.defineProperty(this,"$",{value:e_.$,writable:!1,enumerable:!1,configurable:!1}),new Link({A:{obj:that,name:"visible"},B:{action:function action(v){addClassIfFalse(e_,"hide",v)}},name:"visible > undefined"}),new Link({A:{obj:that,name:"animate"},B:{action:function action(v){addClassIfTrue(e_,"animate",v)}},name:"animate > undefined"}),new Link({A:{obj:that,name:"flipH"},B:{action:function action(v){addClassIfTrue(e_,"flipH",v)}},name:"flip-h > undefined"}),new Link({A:{obj:that,name:"flipV"},B:{action:function action(v){addClassIfTrue(e_,"flipV",v)}},name:"flip-v > undefined"}),pm.on("content",function(v){try{CODE_BEHIND.onContentChanged.call(that,v)}catch(ex){console.error("Exception in function behind \"onContentChanged\" of module \"mod/tfw.view.icon.js\" for attribute \"content\"!"),console.error(ex)}}),pm.on("pen0",function(v){try{CODE_BEHIND.onPen0Changed.call(that,v)}catch(ex){console.error("Exception in function behind \"onPen0Changed\" of module \"mod/tfw.view.icon.js\" for attribute \"pen0\"!"),console.error(ex)}}),pm.on("pen1",function(v){try{CODE_BEHIND.onPen1Changed.call(that,v)}catch(ex){console.error("Exception in function behind \"onPen1Changed\" of module \"mod/tfw.view.icon.js\" for attribute \"pen1\"!"),console.error(ex)}}),pm.on("pen2",function(v){try{CODE_BEHIND.onPen2Changed.call(that,v)}catch(ex){console.error("Exception in function behind \"onPen2Changed\" of module \"mod/tfw.view.icon.js\" for attribute \"pen2\"!"),console.error(ex)}}),pm.on("pen3",function(v){try{CODE_BEHIND.onPen3Changed.call(that,v)}catch(ex){console.error("Exception in function behind \"onPen3Changed\" of module \"mod/tfw.view.icon.js\" for attribute \"pen3\"!"),console.error(ex)}}),pm.on("pen4",function(v){try{CODE_BEHIND.onPen3Changed.call(that,v)}catch(ex){console.error("Exception in function behind \"onPen3Changed\" of module \"mod/tfw.view.icon.js\" for attribute \"pen4\"!"),console.error(ex)}}),pm.on("pen5",function(v){try{CODE_BEHIND.onPen4Changed.call(that,v)}catch(ex){console.error("Exception in function behind \"onPen4Changed\" of module \"mod/tfw.view.icon.js\" for attribute \"pen5\"!"),console.error(ex)}}),pm.on("pen6",function(v){try{CODE_BEHIND.onPen6Changed.call(that,v)}catch(ex){console.error("Exception in function behind \"onPen6Changed\" of module \"mod/tfw.view.icon.js\" for attribute \"pen6\"!"),console.error(ex)}}),pm.on("pen7",function(v){try{CODE_BEHIND.onPen7Changed.call(that,v)}catch(ex){console.error("Exception in function behind \"onPen7Changed\" of module \"mod/tfw.view.icon.js\" for attribute \"pen7\"!"),console.error(ex)}}),pm.on("size",function(v){e_.$.style.width=v}),pm.on("size",function(v){e_.$.style.height=v}),e_.class="tfw-view-icon",e_.width="100%",e_.height="100%",e_.viewBox="-65 -65 130 130",e_.preserveAspectRatio="xMidYMid meet",pm.set("visible",defVal(args,"visible",!0)),pm.set("content",defVal(args,"content","")),pm.set("size",defVal(args,"size",28)),pm.set("animate",defVal(args,"animate",!1)),pm.set("flipH",defVal(args,"flipH",!1)),pm.set("flipV",defVal(args,"flipV",!1)),pm.set("pen0",defVal(args,"pen0",0)),pm.set("pen1",defVal(args,"pen1",1)),pm.set("pen2",defVal(args,"pen2","P")),pm.set("pen3",defVal(args,"pen3","PD")),pm.set("pen4",defVal(args,"pen4","PL")),pm.set("pen5",defVal(args,"pen5","S")),pm.set("pen6",defVal(args,"pen6","SD")),pm.set("pen7",defVal(args,"pen7","SL")),pm.fire("visible"),pm.fire("content"),pm.fire("size"),pm.fire("animate"),pm.fire("flipH"),pm.fire("flipV"),pm.fire("pen0"),pm.fire("pen1"),pm.fire("pen2"),pm.fire("pen3"),pm.fire("pen4"),pm.fire("pen5"),pm.fire("pen6"),pm.fire("pen7"),$.addClass(this,"view","custom")}catch(ex){throw console.error("mod/tfw.view.icon.js",ex),Error("Instantiation error in XJS of \"mod/tfw.view.icon.js\":\n"+ex)}}}()}catch(ex){throw Error("Definition error in XJS of \"mod/tfw.view.icon.js\"\n"+ex)}module.exports._=_});
//# sourceMappingURL=tfw.view.icon.js.map