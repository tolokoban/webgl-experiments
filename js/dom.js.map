{"version":3,"sources":["dom.js"],"names":["require","module","exports","_","D","X","intl","arguments","all","Theme","Gestures","SYMBOL","Date","now","RX_ENTITY","$","dom","Node","undefined","Error","element","elem","document","getElementById","console","error","tagNS","svgRoot","bind","version","xmlns","svg","tag","div","txt","window","createTextNode","textOrHtml","get","css","att","removeAtt","addClass","hasClass","removeClass","toggleClass","saveStyle","restoreStyle","registerTheme","register","applyTheme","apply","registerAndApplyTheme","replace","detach","on","off","add","wrap","clear","obj","nomethods","Object","defineProperty","value","writable","configurable","enumerable","newElem","oldElem","parentNode","replaceChild","styles","key","val","style","attribs","setAttribute","attrib","removeAttribute","i","child","isValidArgument","length","addArray","addText","addNode","ex","slice","call","appendChild","substr","toLowerCase","html","innerHTML","test","text","array","Array","isArray","forEach","pe","events","NON_POINTER_EVENTS","slots","extra","tap","preview","charAt","indexOf","addEventListener","ns","name","e","createElementNS","trim","arg","split","item","args","unshift","className","classList","contains","remove","firstChild","removeChild","query","querySelector","parent","parentElement","target","shift","push","content","JSON","stringify","textContent","elements","prototype","parse","pop","k","v"],"mappings":"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","sourcesContent":["/** @module dom */require( 'dom', function(require, module, exports) { var _=function(){var D={\"en\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\r\n   /**\r\n * @module dom\r\n *\r\n * @description\r\n * Functions which facilitate DOM manipulations.\r\n *\r\n * @example\r\n * var mod = require('dom');\r\n */\r\nrequire(\"polyfill.classList\");\r\n\r\nconst\r\n    Theme = require(\"dom.theme\"),\r\n    Gestures = require(\"tfw.gestures\");\r\n\r\nconst\r\n    // Used to store data on the DOM element without colliding with existing attributes.\r\n    SYMBOL = '@dom' + Date.now(),\r\n    RX_ENTITY = /^&(#[0-9]+|[a-zA-Z0-9]+);$/;\r\n\r\n\r\nfunction $(dom) {\r\n    if (dom instanceof Node) return dom;\r\n    if (dom === undefined || dom === null) {\r\n        throw Error(\"`dom` is not a valid element!\", dom);\r\n    }\r\n    if (dom.$ instanceof Node) return dom.$;\r\n    if (dom.element instanceof Node) return dom.element;\r\n    if (typeof dom === 'string') {\r\n        var elem = document.getElementById(dom);\r\n        if (!elem) {\r\n            console.error(\"[dom] There is no DOM element with this ID: `\" + dom + \"`\");\r\n        }\r\n        return elem;\r\n    }\r\n    if (typeof dom.element === 'function') return dom.element();\r\n    return dom;\r\n};\r\n\r\nmodule.exports = $;\r\n\r\n$.tagNS = tagNS;\r\n$.svgRoot = tagNS.bind(undefined, \"http://www.w3.org/2000/svg\", \"svg\", {\r\n    version: '1.1',\r\n    'xmlns:svg': 'http://www.w3.org/2000/svg',\r\n    xmlns: 'http://www.w3.org/2000/svg',\r\n    'xmlns:xlink': 'http://www.w3.org/1999/xlink'\r\n});\r\n$.svg = tagNS.bind(undefined, \"http://www.w3.org/2000/svg\");\r\n$.tag = tagNS.bind(undefined, \"http://www.w3.org/1999/xhtml\");\r\n$.div = tagNS.bind(undefined, \"http://www.w3.org/1999/xhtml\", \"div\");\r\n$.txt = window.document.createTextNode.bind(window.document);\r\n$.textOrHtml = textOrHtml;\r\n$.get = get;\r\n/**\r\n * Add a readonly `element` property to `obj` and return it.\r\n */\r\n$.elem = elem;\r\n/**\r\n * Apply css rules on `element`.\r\n *\r\n * @return `element`.\r\n *\r\n * @example\r\n * var $ = require('dom');\r\n * $.css( element, { width: '800px'. height: '600px' });\r\n */\r\n$.css = css;\r\n$.att = att;\r\n$.removeAtt = removeAtt;\r\n$.addClass = addClass;\r\n$.hasClass = hasClass;\r\n$.removeClass = removeClass;\r\n$.toggleClass = toggleClass;\r\n$.saveStyle = saveStyle;\r\n$.restoreStyle = restoreStyle;\r\n/**\r\n * @param {string} name - Name of this theme.\r\n * @param {object} style - Colors.\r\n * @param {string} style.bg0 - [optional] Background level 0.\r\n * @param {string} style.bg1 - [optional] Background level 1.\r\n * @param {string} style.bg2 - [optional] Background level 2.\r\n * @param {string} style.bg3 - [optional] Background level 3.\r\n * @param {string} style.bgP - [optional] Primary color.\r\n * @param {string} style.bgPD - [optional] Primary color (dark version).\r\n * @param {string} style.bgPL - [optional] Primary color (light version).\r\n * @param {string} style.bgS - [optional] Accent color.\r\n * @param {string} style.bgSD - [optional] Accent color (dark version).\r\n * @param {string} style.bgSL - [optional] Accent color (light version).\r\n * @param  {string} style.fg*  - [optional]  To each  background color\r\n * (bg) correspond a text color (fg).\r\n */\r\n$.registerTheme = Theme.register.bind($);\r\n/**\r\n * @param {string} name - Name of the heme to apply.\r\n */\r\n$.applyTheme = Theme.apply.bind($);\r\n$.registerAndApplyTheme = registerAndApplyTheme;\r\n/**\r\n * @param newElem {Element} - Replacement element.\r\n * @param oldElem {Element} - Element to replace.\r\n */\r\n$.replace = replace;\r\n/**\r\n * Remove element from its parent.\r\n * @param element {Element} - Element to detach from its parent.\r\n * @return The parent element.\r\n */\r\n$.detach = detach;\r\n/**\r\n * Add event handlers to one or many elements.\r\n *\r\n * @param {object|array}  element -  list of  elements on  which apply\r\n * events handlers.\r\n *\r\n * @param  {object|function} slots  - If  a function  is given,  it is\r\n * considered as a slot for the event `tap`.  Otherwise, the object is\r\n * a map  between events' names (the  key) and function to  handle the\r\n * event (the value).\r\n * Events' names are:\r\n * * __tap__: When  the element is  pressed and released in  less than\r\n 900 ms and without too much sliding.\r\n * * __doubletap__\r\n * * __dragmove__\r\n *\r\n * @param {boolean} capture - If `true` events are captured before they reach the children.\r\n *\r\n * @example\r\n *    DOM.on( [screen, button], function() {...} );\r\n *    DOM.on( body, null );   // Do nothing, but stop propagation.\r\n *    DOM.on( element, { tap: function() {...} } );\r\n */\r\n$.on = on;\r\n$.off = off;\r\n/**\r\n * Append all the `children` to `element`.\r\n * @param element\r\n * @param ...children\r\n */\r\n$.add = add;\r\n/**\r\n * Add the attribute `element` and the following functions to `obj`:\r\n * * __css__\r\n * * __addClass__\r\n * * __removeClass__\r\n * * __toggleClass__\r\n */\r\n$.wrap = wrap;\r\n/**\r\n * Remove all children of the `element`.\r\n * @param element {Element} - Element from which remove all the children.\r\n */\r\n$.clear = clear;\r\n\r\nfunction wrap(obj, element, nomethods) {\r\n    Object.defineProperty(obj, 'element', {\r\n        value: element,\r\n        writable: false,\r\n        configurable: false,\r\n        enumerable: true\r\n    });\r\n    if (nomethods) return obj;\r\n\r\n    obj.on = on.bind(obj, element);\r\n    obj.css = css.bind(obj, element);\r\n    obj.add = add.bind(obj, element);\r\n    obj.att = att.bind(obj, element);\r\n    obj.addClass = addClass.bind(obj, element);\r\n    obj.hasClass = hasClass.bind(obj, element);\r\n    obj.removeClass = removeClass.bind(obj, element);\r\n    obj.toggleClass = toggleClass.bind(obj, element);\r\n    return obj;\r\n}\r\n\r\nfunction replace(newElem, oldElem) {\r\n    newElem = $(newElem);\r\n    oldElem = $(oldElem);\r\n    oldElem.parentNode.replaceChild(newElem, oldElem);\r\n    return newElem;\r\n}\r\n\r\nfunction css(element, styles) {\r\n    element = $(element);\r\n    var key, val;\r\n    for (key in styles) {\r\n        val = styles[key];\r\n        element.style[key] = val;\r\n    }\r\n    return element;\r\n}\r\n\r\nfunction att(element, attribs, value) {\r\n    element = $(element);\r\n    var key, val;\r\n    if (typeof attribs === 'string') {\r\n        if (typeof value === 'undefined') value = \"\";\r\n        key = attribs;\r\n        attribs = {};\r\n        attribs[key] = value;\r\n    }\r\n    for (key in attribs) {\r\n        val = attribs[key];\r\n        element.setAttribute(key, val);\r\n    }\r\n    return element;\r\n}\r\n\r\nfunction removeAtt(element, attrib) {\r\n    element = $(element);\r\n    element.removeAttribute(attrib);\r\n    return element;\r\n}\r\n\r\nfunction add(element) {\r\n    element = $(element);\r\n    try {\r\n        var i, child, isValidArgument;\r\n        for (i = 1; i < arguments.length; i++) {\r\n            child = arguments[i];\r\n            isValidArgument = addArray(element, child) ||\r\n                addText(element, child) ||\r\n                addNode(element, child);\r\n            if (!isValidArgument) {\r\n                console.error(\"Argument #\" + i + \" of dom.add() is invalid!\", arguments);\r\n                debugger;\r\n            }\r\n        }\r\n        return element;\r\n    } catch (ex) {\r\n        console.error(\"[DOM.add] arguments=\", [].slice.call(arguments));\r\n        console.error(\"[DOM.add] exception=\", ex);\r\n    }\r\n}\r\n\r\nfunction addNode(element, child) {\r\n    child = $(child);\r\n    if (child instanceof Node) {\r\n        element.appendChild(child);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction addText(element, child) {\r\n    if (typeof child === 'number') child = '' + child;\r\n    if (typeof child !== 'string') return false;\r\n\r\n    if (child.substr(0, 6).toLowerCase() == '<html>') {\r\n        // Text starting with '<html>' is HTML code to parse.\r\n        var html = child.substr(6);\r\n        child = $.tag('span');\r\n        child.innerHTML = html;\r\n    } else if (RX_ENTITY.test(child)) {\r\n        // HTML entity, for instance: &amp;, &lt;, ...\r\n        var text = child;\r\n        child = $.tag('span');\r\n        child.innerHTML = text;\r\n    } else {\r\n        child = document.createTextNode(child);\r\n    }\r\n    element.appendChild(child);\r\n    return true;\r\n}\r\n\r\nfunction addArray(element, array) {\r\n    if (!Array.isArray(array)) return false;\r\n    array.forEach(function(child) {\r\n        add(element, child);\r\n    });\r\n    return true;\r\n}\r\n\r\nfunction off(element) {\r\n    if (Array.isArray(element)) {\r\n        element.forEach(function(elem) {\r\n            off(elem);\r\n        });\r\n        return element;\r\n    }\r\n\r\n    if (typeof element[SYMBOL] === 'undefined') return element;\r\n    var pe = element[SYMBOL].events;\r\n    if (typeof pe === 'undefined') return element;\r\n    pe.off();\r\n    delete element[SYMBOL].events;\r\n}\r\n\r\nvar NON_POINTER_EVENTS = [\r\n  'keyup', 'keydown', 'scroll', 'load', 'error'\r\n];\r\n\r\nfunction on(element, slots, extra) {\r\n    // If only a function is passed, we consider this is a Tap event.\r\n    if (typeof slots === 'function' || slots === null) slots = { tap: slots };\r\n    else if (typeof slots === 'string' && typeof extra === 'function') {\r\n        // Syntax: $.on( elem, 'tap', function(evt) {...} )\r\n        var obj = {};\r\n        obj[slots] = extra;\r\n        slots = obj;\r\n    }\r\n\r\n    if (Array.isArray(element)) {\r\n        element.forEach(function(elem) {\r\n            on(elem, slots);\r\n        });\r\n        return element;\r\n    }\r\n\r\n    element = $(element);\r\n    if (typeof element[SYMBOL] === 'undefined') element[SYMBOL] = {};\r\n    if (typeof element[SYMBOL].events === 'undefined') {\r\n        element[SYMBOL].events = Gestures(element);\r\n    }\r\n\r\n    var key, val, preview;\r\n    for (key in slots) {\r\n        val = slots[key];\r\n        if (key.charAt(0) == '!') {\r\n            key = key.substr(1);\r\n            preview = true;\r\n        } else {\r\n            preview = false;\r\n        }\r\n        if (NON_POINTER_EVENTS.indexOf(key.toLowerCase()) > -1) {\r\n            element.addEventListener(key, val, preview);\r\n        } else {\r\n            element[SYMBOL].events.on(key, val, preview);\r\n        }\r\n    }\r\n\r\n    return element;\r\n}\r\n\r\nfunction tagNS(ns, name) {\r\n    try {\r\n        var e = document.createElementNS(ns, name.trim().toLowerCase());\r\n        var i, arg, key, val;\r\n        for (i = 2; i < arguments.length; i++) {\r\n            arg = arguments[i];\r\n            if (Array.isArray(arg)) {\r\n                // Arrays are for children.\r\n                arg.forEach(function(child) {\r\n                    switch (typeof child) {\r\n                        case 'string':\r\n                        case 'number':\r\n                        case 'boolean':\r\n                            child = '' + child;\r\n                            if (child.substr(0, 6) == '<html>') {\r\n                                var html = child.substr(6);\r\n                                child = $.tag('span');\r\n                                child.innerHTML = html;\r\n                            } else {\r\n                                child = document.createTextNode(child);\r\n                            }\r\n                            break;\r\n                    }\r\n                    add(e, child);\r\n                });\r\n            } else {\r\n                switch (typeof arg) {\r\n                    case \"string\":\r\n                        arg.split(' ').forEach(function(item) {\r\n                            if (item.length > 0) {\r\n                                addClass(e, item);\r\n                            }\r\n                        });\r\n                        break;\r\n                    case \"object\":\r\n                        for (key in arg) {\r\n                            val = arg[key];\r\n                            e.setAttribute(key, val);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        throw Error(\"[dom.tag] Error creating <\" + name + \">: Invalid argument #\" + i + \"!\");\r\n                }\r\n            }\r\n        }\r\n        return e;\r\n    } catch (ex) {\r\n        console.error(\"[dom.tagNS] Error with `ns` = \", ns, \" and `name` = \", name);\r\n        console.error(ex);\r\n    }\r\n};\r\n\r\n\r\nfunction addClass(elem) {\r\n    var args = [].slice.call(arguments, 1);\r\n    if (Array.isArray(elem)) {\r\n        // Loop on each element.\r\n        args.unshift(null);\r\n        elem.forEach(function(child) {\r\n            args[0] = child;\r\n            addClass.apply(undefined, args);\r\n        });\r\n        return elem;\r\n    }\r\n    elem = $(elem);\r\n    args.forEach(function(className) {\r\n        if (typeof className !== 'string') return;\r\n        className = className.trim();\r\n        if (className.length == 0) return;\r\n        try {\r\n            if (elem.classList)\r\n                elem.classList.add(className);\r\n        } catch (ex) {\r\n            console.error(\"[dom.addClass] Invalid class name: \", className);\r\n            console.error(ex);\r\n        }\r\n    });\r\n    return elem;\r\n}\r\n\r\n\r\nfunction hasClass(elem, className) {\r\n    elem = $(elem);\r\n    if (!elem.classList) return false;\r\n    return elem.classList.contains(className);\r\n}\r\n\r\n\r\nfunction removeClass(elem) {\r\n    var args = [].slice.call(arguments, 1);\r\n    if (Array.isArray(elem)) {\r\n        // Loop on each element.\r\n        args.unshift(null);\r\n        elem.forEach(function(child) {\r\n            args[0] = child;\r\n            removeClass.apply(undefined, args);\r\n        });\r\n        return elem;\r\n    }\r\n    elem = $(elem);\r\n    args.forEach(function(className) {\r\n        if (typeof className !== 'string') return;\r\n        try {\r\n            if (elem.classList)\r\n                elem.classList.remove(className);\r\n        } catch (ex) {\r\n            console.error(\"[dom.removeClass] Invalid class name: \", className);\r\n            console.error(ex);\r\n        }\r\n    });\r\n    return elem;\r\n}\r\n\r\n\r\nfunction toggleClass(elem) {\r\n    var args = [].slice.call(arguments, 1);\r\n    args.forEach(function(className) {\r\n        if (hasClass(elem, className)) {\r\n            removeClass(elem, className);\r\n        } else {\r\n            addClass(elem, className);\r\n        }\r\n    });\r\n    return elem;\r\n}\r\n\r\n\r\nfunction clear(element) {\r\n    // (!) On préfère retirer les éléments un par un du DOM plutôt que d'utiliser simplement\r\n    // this.html(\"\").\r\n    // En effet, le code simplifié a des conséquences inattendues dans IE9 et IE10 au moins.\r\n    // Le bug des markers qui disparaissaients sur les cartes de Trail-Passion 4 a été corrigé\r\n    // avec cette modification.\r\n    element = $(element);\r\n    var e = element;\r\n    while (e.firstChild) {\r\n        e.removeChild(e.firstChild);\r\n    }\r\n    var args = [].slice.call(arguments);\r\n    if (args.length > 1) {\r\n        add.apply(this, args);\r\n    }\r\n    return element;\r\n}\r\n\r\nfunction get(element, query) {\r\n    element = $(element);\r\n    if (typeof query === 'undefined') {\r\n        query = element;\r\n        element = window.document;\r\n    }\r\n    return element.querySelector(query);\r\n}\r\n\r\nfunction detach(element) {\r\n    element = $(element);\r\n    var parent = element.parentElement;\r\n    if (!parent) return parent;\r\n    parent.removeChild(element);\r\n    return parent;\r\n}\r\n\r\nfunction elem(target) {\r\n    var args = [].slice.call(arguments);\r\n    args.shift();\r\n    if (args.length == 0) args = ['div'];\r\n    args.push('dom', 'custom');\r\n    var e;\r\n    if (typeof args[0].element !== 'undefined') {\r\n        e = args[0].element;\r\n        addClass(e, 'dom', 'custom');\r\n    } else if (typeof args[0].appendChild === 'function') {\r\n        e = args[0];\r\n        addClass(e, 'dom', 'custom');\r\n    } else {\r\n        e = $.tag.apply($, args);\r\n    }\r\n    Object.defineProperty(target, 'element', {\r\n        value: e,\r\n        writable: false,\r\n        configurable: false,\r\n        enumerable: true\r\n    });\r\n    return e;\r\n}\r\n\r\nfunction textOrHtml(element, content) {\r\n    if (typeof content === 'undefined') content = '';\r\n    if (content === null) content = '';\r\n    if (typeof content !== 'string') content = JSON.stringify(content);\r\n    if (content.substr(0, 6) == '<html>') {\r\n        element.innerHTML = content.substr(6);\r\n    } else {\r\n        element.textContent = content;\r\n    }\r\n    return element;\r\n}\r\n\r\nfunction saveStyle(elements) {\r\n    if (!Array.isArray(elements)) return saveStyle(Array.prototype.slice.call(arguments));\r\n    elements.forEach(function(elem) {\r\n        elem = $(elem);\r\n        if (typeof elem[SYMBOL] === 'undefined') elem[SYMBOL] = {};\r\n        if (!Array.isArray(elem[SYMBOL].style)) elem[SYMBOL].style = [];\r\n        elem[SYMBOL].style.push(JSON.stringify(elem.style));\r\n    });\r\n}\r\n\r\nfunction restoreStyle(elements) {\r\n    if (!Array.isArray(elements)) return restoreStyle(Array.prototype.slice.call(arguments));\r\n    elements.forEach(function(elem) {\r\n        elem = $(elem);\r\n        if (typeof elem[SYMBOL] === 'undefined' || !Array.isArray(elem[SYMBOL].style)) throw Error(\r\n            \"[dom.restoreStyle] `saveStyle()` has never been used on this element!\");\r\n        if (elem[SYMBOL].style.length == 0) throw Error(\r\n            \"[dom.restoreStyle] more `restore` than `save`!\");\r\n        var styles = JSON.parse(elem[SYMBOL].style.pop());\r\n        var k, v;\r\n        for (k in styles) {\r\n            v = styles[k];\r\n            if (typeof v !== 'undefined') {\r\n                elem.style[k] = v;\r\n            }\r\n        }\r\n    });\r\n};\r\n\r\nfunction registerAndApplyTheme(name, styles) {\r\n    Theme.register.call(this, name, styles);\r\n    Theme.apply.call(this, name);\r\n}\r\n\r\n\r\nmodule.exports._ = _;\n})"]}