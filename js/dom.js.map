{"version":3,"sources":["dom.js"],"names":["require","module","$","dom","Node","Error","element","elem","document","getElementById","console","error","css","styles","key","val","style","att","attribs","value","setAttribute","add","i","child","isValidArgument","arguments","length","addArray","addText","addNode","ex","slice","call","appendChild","substr","toLowerCase","html","tag","innerHTML","RX_ENTITY","test","text","createTextNode","array","Array","isArray","forEach","off","SYMBOL","pe","events","on","slots","extra","tap","obj","Gestures","preview","charAt","NON_POINTER_EVENTS","indexOf","addEventListener","tagNS","ns","name","arg","e","createElementNS","trim","split","item","addClass","args","unshift","apply","className","classList","hasClass","contains","removeClass","remove","toggleClass","saveStyle","elements","push","JSON","stringify","prototype","restoreStyle","k","v","parse","pop","_","X","D","intl","all","Theme","Date","now","exports","svgRoot","bind","version","xmlns","svg","div","txt","window","textOrHtml","content","textContent","get","query","querySelector","target","shift","Object","defineProperty","writable","configurable","enumerable","removeAtt","attrib","removeAttribute","registerTheme","register","applyTheme","registerAndApplyTheme","replace","newElem","oldElem","parentNode","replaceChild","detach","parent","parentElement","removeChild","wrap","nomethods","clear","firstChild"],"mappings":"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","sourcesContent":["/** @module dom */require( 'dom', function(require, module, exports) { var _=function(){var D={\"en\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\r\n   /**\r\n * @module dom\r\n *\r\n * @description\r\n * Functions which facilitate DOM manipulations.\r\n *\r\n * @example\r\n * var mod = require('dom');\r\n */\r\nrequire(\"polyfill.classList\");\r\n\r\nconst\r\n    Theme = require(\"dom.theme\"),\r\n    Gestures = require(\"tfw.gestures\");\r\n\r\nconst\r\n    // Used to store data on the DOM element without colliding with existing attributes.\r\n    SYMBOL = '@dom' + Date.now(),\r\n    RX_ENTITY = /^&(#[0-9]+|[a-zA-Z0-9]+);$/;\r\n\r\n\r\nfunction $(dom) {\r\n    if (dom instanceof Node) return dom;\r\n    if (dom === undefined || dom === null) {\r\n        throw Error(\"`dom` is not a valid element!\", dom);\r\n    }\r\n    if (dom.$ instanceof Node) return dom.$;\r\n    if (dom.element instanceof Node) return dom.element;\r\n    if (typeof dom === 'string') {\r\n        var elem = document.getElementById(dom);\r\n        if (!elem) {\r\n            console.error(\"[dom] There is no DOM element with this ID: `\" + dom + \"`\");\r\n        }\r\n        return elem;\r\n    }\r\n    if (typeof dom.element === 'function') return dom.element();\r\n    return dom;\r\n};\r\n\r\nmodule.exports = $;\r\n\r\n$.tagNS = tagNS;\r\n$.svgRoot = tagNS.bind(undefined, \"http://www.w3.org/2000/svg\", \"svg\", {\r\n    version: '1.1',\r\n    'xmlns:svg': 'http://www.w3.org/2000/svg',\r\n    xmlns: 'http://www.w3.org/2000/svg',\r\n    'xmlns:xlink': 'http://www.w3.org/1999/xlink'\r\n});\r\n$.svg = tagNS.bind(undefined, \"http://www.w3.org/2000/svg\");\r\n$.tag = tagNS.bind(undefined, \"http://www.w3.org/1999/xhtml\");\r\n$.div = tagNS.bind(undefined, \"http://www.w3.org/1999/xhtml\", \"div\");\r\n$.txt = window.document.createTextNode.bind(window.document);\r\n$.textOrHtml = textOrHtml;\r\n$.get = get;\r\n/**\r\n * Add a readonly `element` property to `obj` and return it.\r\n */\r\n$.elem = elem;\r\n/**\r\n * Apply css rules on `element`.\r\n *\r\n * @return `element`.\r\n *\r\n * @example\r\n * var $ = require('dom');\r\n * $.css( element, { width: '800px'. height: '600px' });\r\n */\r\n$.css = css;\r\n$.att = att;\r\n$.removeAtt = removeAtt;\r\n$.addClass = addClass;\r\n$.hasClass = hasClass;\r\n$.removeClass = removeClass;\r\n$.toggleClass = toggleClass;\r\n$.saveStyle = saveStyle;\r\n$.restoreStyle = restoreStyle;\r\n/**\r\n * @param {string} name - Name of this theme.\r\n * @param {object} style - Colors.\r\n * @param {string} style.bg0 - [optional] Background level 0.\r\n * @param {string} style.bg1 - [optional] Background level 1.\r\n * @param {string} style.bg2 - [optional] Background level 2.\r\n * @param {string} style.bg3 - [optional] Background level 3.\r\n * @param {string} style.bgP - [optional] Primary color.\r\n * @param {string} style.bgPD - [optional] Primary color (dark version).\r\n * @param {string} style.bgPL - [optional] Primary color (light version).\r\n * @param {string} style.bgS - [optional] Accent color.\r\n * @param {string} style.bgSD - [optional] Accent color (dark version).\r\n * @param {string} style.bgSL - [optional] Accent color (light version).\r\n * @param  {string} style.fg*  - [optional]  To each  background color\r\n * (bg) correspond a text color (fg).\r\n */\r\n$.registerTheme = Theme.register.bind($);\r\n/**\r\n * @param {string} name - Name of the heme to apply.\r\n */\r\n$.applyTheme = Theme.apply.bind($);\r\n$.registerAndApplyTheme = registerAndApplyTheme;\r\n/**\r\n * @param newElem {Element} - Replacement element.\r\n * @param oldElem {Element} - Element to replace.\r\n */\r\n$.replace = replace;\r\n/**\r\n * Remove element from its parent.\r\n * @param element {Element} - Element to detach from its parent.\r\n * @return The parent element.\r\n */\r\n$.detach = detach;\r\n/**\r\n * Add event handlers to one or many elements.\r\n *\r\n * @param {object|array}  element -  list of  elements on  which apply\r\n * events handlers.\r\n *\r\n * @param  {object|function} slots  - If  a function  is given,  it is\r\n * considered as a slot for the event `tap`.  Otherwise, the object is\r\n * a map  between events' names (the  key) and function to  handle the\r\n * event (the value).\r\n * Events' names are:\r\n * * __tap__: When  the element is  pressed and released in  less than\r\n 900 ms and without too much sliding.\r\n * * __doubletap__\r\n * * __dragmove__\r\n *\r\n * @param {boolean} capture - If `true` events are captured before they reach the children.\r\n *\r\n * @example\r\n *    DOM.on( [screen, button], function() {...} );\r\n *    DOM.on( body, null );   // Do nothing, but stop propagation.\r\n *    DOM.on( element, { tap: function() {...} } );\r\n */\r\n$.on = on;\r\n$.off = off;\r\n/**\r\n * Append all the `children` to `element`.\r\n * @param element\r\n * @param ...children\r\n */\r\n$.add = add;\r\n/**\r\n * Add the attribute `element` and the following functions to `obj`:\r\n * * __css__\r\n * * __addClass__\r\n * * __removeClass__\r\n * * __toggleClass__\r\n */\r\n$.wrap = wrap;\r\n/**\r\n * Remove all children of the `element`.\r\n * @param element {Element} - Element from which remove all the children.\r\n */\r\n$.clear = clear;\r\n\r\nfunction wrap(obj, element, nomethods) {\r\n    Object.defineProperty(obj, 'element', {\r\n        value: element,\r\n        writable: false,\r\n        configurable: false,\r\n        enumerable: true\r\n    });\r\n    if (nomethods) return obj;\r\n\r\n    obj.on = on.bind(obj, element);\r\n    obj.css = css.bind(obj, element);\r\n    obj.add = add.bind(obj, element);\r\n    obj.att = att.bind(obj, element);\r\n    obj.addClass = addClass.bind(obj, element);\r\n    obj.hasClass = hasClass.bind(obj, element);\r\n    obj.removeClass = removeClass.bind(obj, element);\r\n    obj.toggleClass = toggleClass.bind(obj, element);\r\n    return obj;\r\n}\r\n\r\nfunction replace(newElem, oldElem) {\r\n    newElem = $(newElem);\r\n    oldElem = $(oldElem);\r\n    oldElem.parentNode.replaceChild(newElem, oldElem);\r\n    return newElem;\r\n}\r\n\r\nfunction css(element, styles) {\r\n    element = $(element);\r\n    var key, val;\r\n    for (key in styles) {\r\n        val = styles[key];\r\n        element.style[key] = val;\r\n    }\r\n    return element;\r\n}\r\n\r\nfunction att(element, attribs, value) {\r\n    element = $(element);\r\n    var key, val;\r\n    if (typeof attribs === 'string') {\r\n        if (typeof value === 'undefined') value = \"\";\r\n        key = attribs;\r\n        attribs = {};\r\n        attribs[key] = value;\r\n    }\r\n    for (key in attribs) {\r\n        val = attribs[key];\r\n        element.setAttribute(key, val);\r\n    }\r\n    return element;\r\n}\r\n\r\nfunction removeAtt(element, attrib) {\r\n    element = $(element);\r\n    element.removeAttribute(attrib);\r\n    return element;\r\n}\r\n\r\nfunction add(element) {\r\n    element = $(element);\r\n    try {\r\n        var i, child, isValidArgument;\r\n        for (i = 1; i < arguments.length; i++) {\r\n            child = arguments[i];\r\n            isValidArgument = addArray(element, child) ||\r\n                addText(element, child) ||\r\n                addNode(element, child);\r\n            if (!isValidArgument) {\r\n                console.error(\"Argument #\" + i + \" of dom.add() is invalid!\", arguments);\r\n                debugger;\r\n            }\r\n        }\r\n        return element;\r\n    } catch (ex) {\r\n        console.error(\"[DOM.add] arguments=\", [].slice.call(arguments));\r\n        console.error(\"[DOM.add] exception=\", ex);\r\n    }\r\n}\r\n\r\nfunction addNode(element, child) {\r\n    child = $(child);\r\n    if (child instanceof Node) {\r\n        element.appendChild(child);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction addText(element, child) {\r\n    if (typeof child === 'number') child = '' + child;\r\n    if (typeof child !== 'string') return false;\r\n\r\n    if (child.substr(0, 6).toLowerCase() == '<html>') {\r\n        // Text starting with '<html>' is HTML code to parse.\r\n        var html = child.substr(6);\r\n        child = $.tag('span');\r\n        child.innerHTML = html;\r\n    } else if (RX_ENTITY.test(child)) {\r\n        // HTML entity, for instance: &amp;, &lt;, ...\r\n        var text = child;\r\n        child = $.tag('span');\r\n        child.innerHTML = text;\r\n    } else {\r\n        child = document.createTextNode(child);\r\n    }\r\n    element.appendChild(child);\r\n    return true;\r\n}\r\n\r\nfunction addArray(element, array) {\r\n    if (!Array.isArray(array)) return false;\r\n    array.forEach(function(child) {\r\n        add(element, child);\r\n    });\r\n    return true;\r\n}\r\n\r\nfunction off(element) {\r\n    if (Array.isArray(element)) {\r\n        element.forEach(function(elem) {\r\n            off(elem);\r\n        });\r\n        return element;\r\n    }\r\n\r\n    if (typeof element[SYMBOL] === 'undefined') return element;\r\n    var pe = element[SYMBOL].events;\r\n    if (typeof pe === 'undefined') return element;\r\n    pe.off();\r\n    delete element[SYMBOL].events;\r\n}\r\n\r\nvar NON_POINTER_EVENTS = [\r\n  'keyup', 'keydown', 'scroll', 'load', 'error'\r\n];\r\n\r\nfunction on(element, slots, extra) {\r\n    // If only a function is passed, we consider this is a Tap event.\r\n    if (typeof slots === 'function' || slots === null) slots = { tap: slots };\r\n    else if (typeof slots === 'string' && typeof extra === 'function') {\r\n        // Syntax: $.on( elem, 'tap', function(evt) {...} )\r\n        var obj = {};\r\n        obj[slots] = extra;\r\n        slots = obj;\r\n    }\r\n\r\n    if (Array.isArray(element)) {\r\n        element.forEach(function(elem) {\r\n            on(elem, slots);\r\n        });\r\n        return element;\r\n    }\r\n\r\n    element = $(element);\r\n    if (typeof element[SYMBOL] === 'undefined') element[SYMBOL] = {};\r\n    if (typeof element[SYMBOL].events === 'undefined') {\r\n        element[SYMBOL].events = Gestures(element);\r\n    }\r\n\r\n    var key, val, preview;\r\n    for (key in slots) {\r\n        val = slots[key];\r\n        if (key.charAt(0) == '!') {\r\n            key = key.substr(1);\r\n            preview = true;\r\n        } else {\r\n            preview = false;\r\n        }\r\n        if (NON_POINTER_EVENTS.indexOf(key.toLowerCase()) > -1) {\r\n            element.addEventListener(key, val, preview);\r\n        } else {\r\n            element[SYMBOL].events.on(key, val, preview);\r\n        }\r\n    }\r\n\r\n    return element;\r\n}\r\n\r\nfunction tagNS(ns, name) {\r\n    try {\r\n        var e = document.createElementNS(ns, name.trim().toLowerCase());\r\n        var i, arg, key, val;\r\n        for (i = 2; i < arguments.length; i++) {\r\n            arg = arguments[i];\r\n            if (Array.isArray(arg)) {\r\n                // Arrays are for children.\r\n                arg.forEach(function(child) {\r\n                    switch (typeof child) {\r\n                        case 'string':\r\n                        case 'number':\r\n                        case 'boolean':\r\n                            child = '' + child;\r\n                            if (child.substr(0, 6) == '<html>') {\r\n                                var html = child.substr(6);\r\n                                child = $.tag('span');\r\n                                child.innerHTML = html;\r\n                            } else {\r\n                                child = document.createTextNode(child);\r\n                            }\r\n                            break;\r\n                    }\r\n                    add(e, child);\r\n                });\r\n            } else {\r\n                switch (typeof arg) {\r\n                    case \"string\":\r\n                        arg.split(' ').forEach(function(item) {\r\n                            if (item.length > 0) {\r\n                                addClass(e, item);\r\n                            }\r\n                        });\r\n                        break;\r\n                    case \"object\":\r\n                        for (key in arg) {\r\n                            val = arg[key];\r\n                            e.setAttribute(key, val);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        throw Error(\"[dom.tag] Error creating <\" + name + \">: Invalid argument #\" + i + \"!\");\r\n                }\r\n            }\r\n        }\r\n        return e;\r\n    } catch (ex) {\r\n        console.error(\"[dom.tagNS] Error with `ns` = \", ns, \" and `name` = \", name);\r\n        console.error(ex);\r\n    }\r\n};\r\n\r\n\r\nfunction addClass(elem) {\r\n    var args = [].slice.call(arguments, 1);\r\n    if (Array.isArray(elem)) {\r\n        // Loop on each element.\r\n        args.unshift(null);\r\n        elem.forEach(function(child) {\r\n            args[0] = child;\r\n            addClass.apply(undefined, args);\r\n        });\r\n        return elem;\r\n    }\r\n    elem = $(elem);\r\n    args.forEach(function(className) {\r\n        if (typeof className !== 'string') return;\r\n        className = className.trim();\r\n        if (className.length == 0) return;\r\n        try {\r\n            if (elem.classList)\r\n                elem.classList.add(className);\r\n        } catch (ex) {\r\n            console.error(\"[dom.addClass] Invalid class name: \", className);\r\n            console.error(ex);\r\n        }\r\n    });\r\n    return elem;\r\n}\r\n\r\n\r\nfunction hasClass(elem, className) {\r\n    elem = $(elem);\r\n    if (!elem.classList) return false;\r\n    return elem.classList.contains(className);\r\n}\r\n\r\n\r\nfunction removeClass(elem) {\r\n    var args = [].slice.call(arguments, 1);\r\n    if (Array.isArray(elem)) {\r\n        // Loop on each element.\r\n        args.unshift(null);\r\n        elem.forEach(function(child) {\r\n            args[0] = child;\r\n            removeClass.apply(undefined, args);\r\n        });\r\n        return elem;\r\n    }\r\n    elem = $(elem);\r\n    args.forEach(function(className) {\r\n        if (typeof className !== 'string') return;\r\n        try {\r\n            if (elem.classList)\r\n                elem.classList.remove(className);\r\n        } catch (ex) {\r\n            console.error(\"[dom.removeClass] Invalid class name: \", className);\r\n            console.error(ex);\r\n        }\r\n    });\r\n    return elem;\r\n}\r\n\r\n\r\nfunction toggleClass(elem) {\r\n    var args = [].slice.call(arguments, 1);\r\n    args.forEach(function(className) {\r\n        if (hasClass(elem, className)) {\r\n            removeClass(elem, className);\r\n        } else {\r\n            addClass(elem, className);\r\n        }\r\n    });\r\n    return elem;\r\n}\r\n\r\n\r\nfunction clear(element) {\r\n    // (!) On préfère retirer les éléments un par un du DOM plutôt que d'utiliser simplement\r\n    // this.html(\"\").\r\n    // En effet, le code simplifié a des conséquences inattendues dans IE9 et IE10 au moins.\r\n    // Le bug des markers qui disparaissaients sur les cartes de Trail-Passion 4 a été corrigé\r\n    // avec cette modification.\r\n    element = $(element);\r\n    var e = element;\r\n    while (e.firstChild) {\r\n        e.removeChild(e.firstChild);\r\n    }\r\n    var args = [].slice.call(arguments);\r\n    if (args.length > 1) {\r\n        add.apply(this, args);\r\n    }\r\n    return element;\r\n}\r\n\r\nfunction get(element, query) {\r\n    element = $(element);\r\n    if (typeof query === 'undefined') {\r\n        query = element;\r\n        element = window.document;\r\n    }\r\n    return element.querySelector(query);\r\n}\r\n\r\nfunction detach(element) {\r\n    element = $(element);\r\n    var parent = element.parentElement;\r\n    if (!parent) return parent;\r\n    parent.removeChild(element);\r\n    return parent;\r\n}\r\n\r\nfunction elem(target) {\r\n    var args = [].slice.call(arguments);\r\n    args.shift();\r\n    if (args.length == 0) args = ['div'];\r\n    args.push('dom', 'custom');\r\n    var e;\r\n    if (typeof args[0].element !== 'undefined') {\r\n        e = args[0].element;\r\n        addClass(e, 'dom', 'custom');\r\n    } else if (typeof args[0].appendChild === 'function') {\r\n        e = args[0];\r\n        addClass(e, 'dom', 'custom');\r\n    } else {\r\n        e = $.tag.apply($, args);\r\n    }\r\n    Object.defineProperty(target, 'element', {\r\n        value: e,\r\n        writable: false,\r\n        configurable: false,\r\n        enumerable: true\r\n    });\r\n    return e;\r\n}\r\n\r\nfunction textOrHtml(element, content) {\r\n    if (typeof content === 'undefined') content = '';\r\n    if (content === null) content = '';\r\n    if (typeof content !== 'string') content = JSON.stringify(content);\r\n    if (content.substr(0, 6) == '<html>') {\r\n        element.innerHTML = content.substr(6);\r\n    } else {\r\n        element.textContent = content;\r\n    }\r\n    return element;\r\n}\r\n\r\nfunction saveStyle(elements) {\r\n    if (!Array.isArray(elements)) return saveStyle(Array.prototype.slice.call(arguments));\r\n    elements.forEach(function(elem) {\r\n        elem = $(elem);\r\n        if (typeof elem[SYMBOL] === 'undefined') elem[SYMBOL] = {};\r\n        if (!Array.isArray(elem[SYMBOL].style)) elem[SYMBOL].style = [];\r\n        elem[SYMBOL].style.push(JSON.stringify(elem.style));\r\n    });\r\n}\r\n\r\nfunction restoreStyle(elements) {\r\n    if (!Array.isArray(elements)) return restoreStyle(Array.prototype.slice.call(arguments));\r\n    elements.forEach(function(elem) {\r\n        elem = $(elem);\r\n        if (typeof elem[SYMBOL] === 'undefined' || !Array.isArray(elem[SYMBOL].style)) throw Error(\r\n            \"[dom.restoreStyle] `saveStyle()` has never been used on this element!\");\r\n        if (elem[SYMBOL].style.length == 0) throw Error(\r\n            \"[dom.restoreStyle] more `restore` than `save`!\");\r\n        var styles = JSON.parse(elem[SYMBOL].style.pop());\r\n        var k, v;\r\n        for (k in styles) {\r\n            v = styles[k];\r\n            if (typeof v !== 'undefined') {\r\n                elem.style[k] = v;\r\n            }\r\n        }\r\n    });\r\n};\r\n\r\nfunction registerAndApplyTheme(name, styles) {\r\n    Theme.register.call(this, name, styles);\r\n    Theme.apply.call(this, name);\r\n}\r\n\r\n\r\nmodule.exports._ = _;\n})"]}