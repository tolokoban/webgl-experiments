{"version":3,"sources":["tfw.binding.list.js"],"names":["require","module","exports","_","D","X","intl","arguments","all","PM","Listeners","ID","COUNT","List","arg","readOnly","Array","isArray","isList","_array","link","prototype","fire","functionName","args","wave","id","indexOf","push","_listeners","_links","forEach","list","properties","getProperties","prop","manager","name","addListener","listener","add","removeListener","remove","console","error","Error","unlink","index","splice","get","put","newValue","oldValue","elem","removeAt","mapInPlace","func","that","_Array","itm","idx","DEFAULT_COMPARATOR","a","b","sort","comparator","isAlreadySorted","array","length","previous","current","k","funcName","slice","call","result","apply","includes","item","Object","defineProperty","set","v","configurable","enumerable","candidate","object","attrib","value","writable"],"mappings":"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","sourcesContent":["/** @module tfw.binding.list */require( 'tfw.binding.list', function(require, module, exports) { var _=function(){var D={\"en\":{},\"fr\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\r\n   \"use strict\";\r\n\r\n/*\r\n  fire( functionName, arguments, wave )\r\n  addListener( listener )\r\n  removeListener( listener )\r\n\r\n  link( list )\r\n  unlink( list )\r\n\r\n  get( index )\r\n  put( index, elem )\r\n\r\n  remove( elem )\r\n  removeAt( index )\r\n\r\n  mapInPlace( function(elem, index) )\r\n*/\r\nconst\r\n    PM = require(\"tfw.binding.property-manager\"),\r\n    Listeners = require(\"tfw.listeners\");\r\n\r\nconst ID = \"__tfw.binding.list__\";\r\nlet COUNT = 1;\r\n\r\n/**\r\n * A list is an observable array.\r\n *\r\n * Several lists can share the same internal array. In that case, when\r\n * one list modifies the array, all  lists will emit the same event as\r\n * it. Such lists are linked.\r\n */\r\nvar List = function(arg) {\r\n    readOnly(this, ID, COUNT++);\r\n    readOnly(this, \"_listeners\", new Listeners());\r\n    readOnly(this, \"_links\", []);\r\n    // An object  with the  attribute `isContentChangeAware  === true`\r\n    // can fire a property value changed when its contant has change.\r\n    readOnly(this, \"isContentChangeAware\", true);\r\n    if (Array.isArray(arg)) {\r\n        readOnly(this, \"_array\", arg);\r\n    } else if (isList(arg)) {\r\n        readOnly(this, \"_array\", arg._array);\r\n        this.link(arg);\r\n    } else {\r\n        readOnly(this, \"_array\", [arg]);\r\n    }\r\n};\r\n\r\nmodule.exports = List;\r\nList.isList = isList;\r\n\r\n\r\nList.prototype.fire = function(functionName, args, wave) {\r\n    var id = this[ID];\r\n    if (!Array.isArray(wave)) wave = [id];\r\n    else if (wave.indexOf(id) === -1) wave.push(id);\r\n\r\n    // Listeners for content change.\r\n    this._listeners.fire(functionName, args, wave);\r\n\r\n    // Two Lists are linked if and only if they share the same array.\r\n    this._links.forEach(function(list) {\r\n        if (wave.indexOf(list[ID]) > -1) return;\r\n        list.fire(functionName, args, wave);\r\n    });\r\n\r\n    // The content  of the List  has changed.  We must fire  a 'changed'\r\n    // event on the manager if this list is linkable.\r\n    var properties = PM.getProperties(this);\r\n    if (Array.isArray(properties)) {\r\n        properties.forEach(function(prop) {\r\n            prop.manager.fire(prop.name);\r\n        });\r\n    }\r\n};\r\n\r\nList.prototype.addListener = function(listener) {\r\n    this._listeners.add(listener);\r\n};\r\n\r\nList.prototype.removeListener = function(listener) {\r\n    this._listeners.remove(listener);\r\n};\r\n\r\n\r\nList.prototype.link = function(list) {\r\n    if (!isList(list)) {\r\n        console.error(\"Argument: \", list);\r\n        throw Error(\"[tfw.binding.list.link] Argument must be a tfw.binding.list object!\");\r\n    }\r\n\r\n    if (this._links.indexOf(list) === -1) {\r\n        this._links.push(list);\r\n        list.link(this);\r\n    }\r\n};\r\n\r\nList.prototype.unlink = function(list) {\r\n    var index = this._links.indexOf(list);\r\n    if (index === -1) return;\r\n\r\n    this._links.splice(index, 1);\r\n    list.unlink(this);\r\n};\r\n\r\n/**\r\n * The braket notation doesn't work with list.\r\n * This function\r\n */\r\nList.prototype.get = function(index) {\r\n    return this._array[index];\r\n};\r\n\r\nList.prototype.put = function(index, newValue) {\r\n    var oldValue = this._array[index];\r\n    if (oldValue === newValue) return false;\r\n    this._array[index] = newValue;\r\n    this.fire(\"put\", {\r\n        index: index,\r\n        oldValue: oldValue,\r\n        newValue: newValue\r\n    });\r\n    return true;\r\n};\r\n\r\nList.prototype.remove = function(elem) {\r\n    var index = this._array.indexOf(elem);\r\n    if (index === -1) return false;\r\n    this._array.splice(index, 1);\r\n    this.fire(\"remove\", { elem: elem, index: index });\r\n    return true;\r\n};\r\n\r\nList.prototype.removeAt = function(index) {\r\n    var elem = this._array[index];\r\n    this._array.splice(index, 1);\r\n    this.fire(\"remove\", { elem: elem, index: index });\r\n    return true;\r\n};\r\n\r\nList.prototype.mapInPlace = function(func) {\r\n    var that = this;\r\n\r\n    this._Array.forEach(function(itm, idx) {\r\n        var newValue = func(itm);\r\n        that.put(idx, newValue);\r\n    });\r\n\r\n    return this;\r\n};\r\n\r\nvar DEFAULT_COMPARATOR = function(a, b) {\r\n    if (a == b) return 0;\r\n    return a < b ? -1 : 1;\r\n};\r\n\r\n/**\r\n * Sort and fire only if the array is not already in order.\r\n */\r\nList.prototype.sort = function(comparator) {\r\n    if (typeof comparator !== 'function') comparator = DEFAULT_COMPARATOR;\r\n    if (isAlreadySorted(this._array, comparator)) return this;\r\n    this._array.sort(comparator);\r\n    this.fire(\"sort\", comparator);\r\n    return this;\r\n};\r\n\r\nfunction isAlreadySorted(array, comparator) {\r\n    if (array.length < 2) return true;\r\n\r\n    var previous = array[0];\r\n    var current;\r\n\r\n    for (var k = 1; k < array.length; k++) {\r\n        current = array[k];\r\n        if (comparator(previous, current) > 0) return false;\r\n        previous = current;\r\n    }\r\n    return true;\r\n}\r\n\r\n[\r\n    \"push\", \"pop\", \"shift\", \"unshift\", \"splice\", \"reverse\"\r\n]\r\n.forEach(function(funcName) {\r\n    List.prototype[funcName] = function() {\r\n        var args = Array.prototype.slice.call(arguments);\r\n        var result = Array.prototype[funcName].apply(this._array, args);\r\n        this.fire(funcName, args);\r\n        return result;\r\n    };\r\n});\r\n\r\n/**\r\n * Functions that don't change the array.\r\n */\r\n[\r\n    \"slice\", \"forEach\", \"filter\", \"map\", \"reduce\",\r\n    \"indexOf\", \"lastIndexOf\"\r\n].forEach((funcName) => {\r\n    List.prototype[funcName] = function(...args) {\r\n        // const args = Array.prototype.slice.call(arguments);\r\n        return Array.prototype[funcName].apply(this._array, args);\r\n    };\r\n});\r\n\r\nif (!Array.prototype.includes) {\r\n    // Polyfill for IE11.\r\n    Array.prototype.includes = function(item) {\r\n        return this.indexOf(item) !== -1;\r\n    }\r\n}\r\nList.prototype.includes = function(item) {\r\n    return Array.prototype.includes.call(this._array, item);\r\n};\r\n\r\n/**\r\n * Define the `length` property.\r\n */\r\nObject.defineProperty(List.prototype, \"length\", {\r\n    get: function() {\r\n        return this._array.length;\r\n    },\r\n    set: function(v) {\r\n        this._array.length = v;\r\n        this.fire(\"length\", v);\r\n    },\r\n    configurable: false,\r\n    enumerable: true\r\n});\r\n\r\n\r\nfunction isList(candidate) {\r\n    if (!candidate) return false;\r\n    return typeof candidate[ID] === 'number';\r\n}\r\n\r\nfunction readOnly(object, attrib, value) {\r\n    Object.defineProperty(object, attrib, {\r\n        value: value,\r\n        writable: false,\r\n        configurable: false,\r\n        enumerable: true\r\n    });\r\n}\r\n\r\n\r\nmodule.exports._ = _;\n})"]}