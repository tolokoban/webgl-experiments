{"version":3,"sources":["blur.js"],"names":["require","module","GLOBAL","ImageProcessor","Blur","gl","framebuffers","sourceName","centerCoeff","segmentCoeff","cornerCoeff","imageProcessor","frag","prg","time","delta","fb","use","$uniTexture","$uniDx","width","$uniDy","height","$uniCenter","$uniSegment","$uniCorner","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","texture","paint","exports","_"],"mappings":"ynBAA+BA,OAAO,CAAE,kBAAF,CAAsB,SAASA,OAAT,CAAkBC,MAAlB,CAAmC,IAAqCC,CAAAA,MAAM,CAAG,CAC3I,KAAQ,w4BADmI,CAA9C,IAIzFC,CAAAA,cAAc,CAAGH,OAAO,CAAE,6BAAF,CAJiE,CAMzFI,IANyF,YAO3F,cACIC,EADJ,CACQC,YADR,CACsBC,UADtB,CAGE,IADEC,CAAAA,WACF,wDADgB,IAChB,CADuBC,YACvB,wDADsC,IACtC,CAD6CC,WAC7C,wDAD2D,IAC3D,4BACE,KAAKL,EAAL,CAAUA,EADZ,CAEE,KAAKC,YAAL,CAAoBA,YAFtB,CAGE,KAAKC,UAAL,CAAkBA,UAHpB,CAIE,KAAKI,cAAL,CAAsB,GAAIR,CAAAA,cAAJ,CAAoBE,EAApB,CAAwBH,MAAM,CAACU,IAA/B,CAJxB,CAKE,KAAKC,GAAL,CAAW,KAAKF,cAAL,CAAoBE,GALjC,CAME,KAAKL,WAAL,CAAmBA,WANrB,CAOE,KAAKC,YAAL,CAAoBA,YAPtB,CAQE,KAAKC,WAAL,CAAmBA,WACtB,CAnB0F,4DAqBpFI,IArBoF,CAqB9EC,KArB8E,CAqBtE,IACTV,CAAAA,EADS,CAC6C,IAD7C,CACTA,EADS,CACLQ,GADK,CAC6C,IAD7C,CACLA,GADK,CACAF,cADA,CAC6C,IAD7C,CACAA,cADA,CACgBL,YADhB,CAC6C,IAD7C,CACgBA,YADhB,CAC8BC,UAD9B,CAC6C,IAD7C,CAC8BA,UAD9B,CAEXS,EAAE,CAAGV,YAAY,CAAEC,UAAF,CAFN,CAIjBM,GAAG,CAACI,GAAJ,EAJiB,CAKjBJ,GAAG,CAACK,WAAJ,CAAkB,CALD,CAMjBL,GAAG,CAACM,MAAJ,CAAa,EAAIH,EAAE,CAACI,KANH,CAOjBP,GAAG,CAACQ,MAAJ,CAAa,EAAIL,EAAE,CAACM,MAPH,CAQjBT,GAAG,CAACU,UAAJ,CAAiB,KAAKf,WARL,CASjBK,GAAG,CAACW,WAAJ,CAAkB,KAAKf,YATN,CAUjBI,GAAG,CAACY,UAAJ,CAAiB,KAAKf,WAVL,CAWjBL,EAAE,CAACqB,aAAH,CAAkBrB,EAAE,CAACsB,QAArB,CAXiB,CAYjBtB,EAAE,CAACuB,WAAH,CAAgBvB,EAAE,CAACwB,UAAnB,CAA+Bb,EAAE,CAACc,OAAlC,CAZiB,CAcjBnB,cAAc,CAACoB,KAAf,CAAsBjB,IAAtB,CAA4BC,KAA5B,CACH,CApC0F,YAwC/Fd,MAAM,CAAC+B,OAAP,CAAiB5B,IAxC8E,CA2C/FH,MAAM,CAAC+B,OAAP,CAAeC,CAAf,CA3CuG,QAAFA,CAAAA,CAAE,EAAU,CAAC,MAAO,EAAG,CA4C3H,CA5CqC,C","sourcesContent":["/** @module light-saber.blur */require( 'light-saber.blur', function(require, module, exports) { var _=function(){return ''}; const GLOBAL = {\n  \"frag\": \"precision mediump float;\\r\\n\\r\\nuniform sampler2D uniTexture;\\r\\nuniform float uniDx;\\r\\nuniform float uniDy;\\r\\nuniform float uniCenter;\\r\\nuniform float uniSegment;\\r\\nuniform float uniCorner;\\r\\n\\r\\nvarying vec2 varUV;\\r\\n\\r\\nvec4 pickColor(float x, float y, float alpha ) {\\r\\n    vec4 color = texture2D( uniTexture, varUV + vec2(x, y) );\\r\\n    return color * alpha;\\r\\n}\\r\\n\\r\\nvoid main() {\\r\\n    vec4 color =\\r\\n        pickColor( 0.0, 0.0, uniCenter ) +\\r\\n        pickColor( -uniDx, 0.0, uniSegment ) +\\r\\n        pickColor( uniDx, 0.0, uniSegment ) +\\r\\n        pickColor( 0.0, -uniDy, uniSegment ) +\\r\\n        pickColor( 0.0, uniDy, uniSegment ) +\\r\\n        pickColor( -uniDx, -uniDy, uniCorner ) +\\r\\n        pickColor( -uniDx, uniDy, uniCorner ) +\\r\\n        pickColor( uniDx, uniDy, uniCorner ) +\\r\\n        pickColor( uniDx, -uniDy, uniCorner );\\r\\n    gl_FragColor = color;\\r\\n}\\r\\n\"};\n  \"use strict\";\r\n\r\nconst ImageProcessor = require( \"light-saber.image-processor\" );\r\n\r\nclass Blur {\r\n    constructor(\r\n        gl, framebuffers, sourceName,\r\n        centerCoeff = 0.332, segmentCoeff = 0.122, cornerCoeff = 0.045\r\n    ) {\r\n        this.gl = gl;\r\n        this.framebuffers = framebuffers;\r\n        this.sourceName = sourceName;\r\n        this.imageProcessor = new ImageProcessor( gl, GLOBAL.frag );\r\n        this.prg = this.imageProcessor.prg;\r\n        this.centerCoeff = centerCoeff;\r\n        this.segmentCoeff = segmentCoeff;\r\n        this.cornerCoeff = cornerCoeff;\r\n    }\r\n\r\n    paint( time, delta ) {\r\n        const { gl, prg, imageProcessor, framebuffers, sourceName } = this;\r\n        const fb = framebuffers[ sourceName ];\r\n\r\n        prg.use();\r\n        prg.$uniTexture = 0;\r\n        prg.$uniDx = 1 / fb.width;\r\n        prg.$uniDy = 1 / fb.height;\r\n        prg.$uniCenter = this.centerCoeff;\r\n        prg.$uniSegment = this.segmentCoeff;\r\n        prg.$uniCorner = this.cornerCoeff;\r\n        gl.activeTexture( gl.TEXTURE0 );\r\n        gl.bindTexture( gl.TEXTURE_2D, fb.texture );\r\n\r\n        imageProcessor.paint( time, delta );\r\n    }\r\n}\r\n\r\n\r\nmodule.exports = Blur;\r\n\r\n\r\nmodule.exports._ = _;\n})"]}