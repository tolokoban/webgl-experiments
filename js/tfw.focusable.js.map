{"version":3,"sources":["tfw.focusable.js"],"names":["require","module","exports","_","D","X","intl","arguments","all","$","DB","Focusable","widget","onKeyDown","addClass","input","tag","insertAdjacentElement","div","addEventListener","evt","value","focus","removeClass","propBoolean","v","window","setTimeout","blur"],"mappings":";;AAAA;AAA4BA,OAAO,CAAE,eAAF,EAAmB,UAASA,OAAT,EAAkBC,MAAlB,EAA0BC,OAA1B,EAAmC;AAAE,MAAIC,CAAC,GAAC,YAAU;AAAC,QAAIC,CAAC,GAAC;AAAC,YAAK,EAAN;AAAS,YAAK;AAAd,KAAN;AAAA,QAAwBC,CAAC,GAACL,OAAO,CAAC,GAAD,CAAP,CAAaM,IAAvC;;AAA4C,aAASH,CAAT,GAAY;AAAC,aAAOE,CAAC,CAACD,CAAD,EAAGG,SAAH,CAAR;AAAuB;;AAAAJ,IAAAA,CAAC,CAACK,GAAF,GAAMJ,CAAN;AAAQ,WAAOD,CAAP;AAAS,GAA5G,EAAN;;AACxF;;AAEH,MAAIM,CAAC,GAAGT,OAAO,CAAC,KAAD,CAAf;;AACA,MAAIU,EAAE,GAAGV,OAAO,CAAC,kBAAD,CAAhB;AAEA;;;;;;;;;;;;;;;;;;;;;AAmBA,MAAIW,SAAS,GAAG,SAAZA,SAAY,CAAUC,MAAV,EAAkBC,SAAlB,EAA8B;AAC1C,QAAI,OAAOA,SAAP,KAAqB,UAAzB,EAAsCA,SAAS,GAAG,qBAAW,CAAE,CAAzB;AAEtCJ,IAAAA,CAAC,CAACK,QAAF,CAAYF,MAAZ,EAAoB,eAApB;AACA,QAAIG,KAAK,GAAGN,CAAC,CAACO,GAAF,CAAO,OAAP,CAAZ;AACAP,IAAAA,CAAC,CAACG,MAAD,CAAD,CAAUK,qBAAV,CAAiC,YAAjC,EAA+CR,CAAC,CAACS,GAAF,CAAM,yBAAN,EAAiC,CAACH,KAAD,CAAjC,CAA/C;AAEAA,IAAAA,KAAK,CAACI,gBAAN,CAAwB,SAAxB,EAAmC,UAASC,GAAT,EAAc;AAC7CP,MAAAA,SAAS,CAAEO,GAAF,CAAT;AACAL,MAAAA,KAAK,CAACM,KAAN,GAAc,EAAd;AACH,KAHD;AAIAN,IAAAA,KAAK,CAACI,gBAAN,CAAwB,OAAxB,EAAiC,YAAW;AACxCV,MAAAA,CAAC,CAACK,QAAF,CAAYF,MAAZ,EAAoB,OAApB;AACAA,MAAAA,MAAM,CAACU,KAAP,GAAe,IAAf;AACH,KAHD;AAIAP,IAAAA,KAAK,CAACI,gBAAN,CAAwB,MAAxB,EAAgC,YAAW;AACvCV,MAAAA,CAAC,CAACc,WAAF,CAAeX,MAAf,EAAuB,OAAvB;AACAA,MAAAA,MAAM,CAACU,KAAP,GAAe,KAAf;AACH,KAHD;AAKAZ,IAAAA,EAAE,CAACc,WAAH,CAAgBZ,MAAhB,EAAwB,OAAxB,EAAkC,UAASa,CAAT,EAAY;AAC1CC,MAAAA,MAAM,CAACC,UAAP,CAAkB,YAAW;AACzB,YAAIF,CAAJ,EAAQV,KAAK,CAACO,KAAN,GAAR,KACKP,KAAK,CAACa,IAAN;AACR,OAHD;AAIH,KALD;AAMH,GA1BD;;AA6BA3B,EAAAA,MAAM,CAACC,OAAP,GAAiBS,SAAjB;AAIAV,EAAAA,MAAM,CAACC,OAAP,CAAeC,CAAf,GAAmBA,CAAnB;AACC,CA3DkC,CAAP","sourcesContent":["/** @module tfw.focusable */require( 'tfw.focusable', function(require, module, exports) { var _=function(){var D={\"en\":{},\"fr\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\r\n   \"use strict\";\r\n\r\nvar $ = require(\"dom\");\r\nvar DB = require(\"tfw.data-binding\");\r\n\r\n/**\r\n * ```\r\n * var Focusable = require(\"tfw.focusable\");\r\n * \r\n * function Showhide( opts ) {\r\n *     var that = this;\r\n * \r\n *     var elem = $.elem( this, 'div', 'wdg-showhide', 'theme-elevation-2', [...] );\r\n * \r\n *     Focusable( this, function(evt) {\r\n *         switch( evt.keyCode ) {\r\n *         case 13:\r\n *         case 32:\r\n *             that.value = !that.value;\r\n *             break;\r\n *         }\r\n *     });\r\n * ```\r\n */\r\nvar Focusable = function( widget, onKeyDown ) {\r\n    if( typeof onKeyDown !== 'function' ) onKeyDown = function() {};\r\n\r\n    $.addClass( widget, 'tfw-focusable' );\r\n    var input = $.tag( 'input' );\r\n    $(widget).insertAdjacentElement( 'afterbegin', $.div('tfw-focusable-invisible', [input]) );\r\n\r\n    input.addEventListener( 'keydown', function(evt) {\r\n        onKeyDown( evt );\r\n        input.value = '';\r\n    });\r\n    input.addEventListener( 'focus', function() {\r\n        $.addClass( widget, 'focus' );\r\n        widget.focus = true;\r\n    });\r\n    input.addEventListener( 'blur', function() {\r\n        $.removeClass( widget, 'focus' );\r\n        widget.focus = false;\r\n    });\r\n\r\n    DB.propBoolean( widget, 'focus' )(function(v) {\r\n        window.setTimeout(function() {\r\n            if( v ) input.focus();\r\n            else input.blur();\r\n        });\r\n    });\r\n};\r\n\r\n\r\nmodule.exports = Focusable;\r\n\r\n\r\n\r\nmodule.exports._ = _;\n})"]}