"use strict";function addListener(e,t){window.addEventListener?window.addEventListener(e,t,!1):window.attachEvent("on"+e,t)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n,r=0;r<t.length;r++)n=t[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!((r=(a=s.next()).done)||(n.push(a.value),t&&n.length===t));r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n,r=0;r<t.length;r++)n=t[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n,r=0;r<t.length;r++)n=t[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n,r=0;r<t.length;r++)n=t[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!((r=(a=s.next()).done)||(n.push(a.value),t&&n.length===t));r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n,r=0;r<t.length;r++)n=t[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n,r=0;r<t.length;r++)n=t[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n,r=0;r<t.length;r++)n=t[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n,r=0;r<t.length;r++)n=t[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}!function(e){const t="node://".length,n={},r={},i="function"==typeof window.require?window.require:null,o=function(a,s){if("node://"===a.substr(0,t)){if(!i)throw Error("[require] NodeJS is not available to load module "+a.substr(t));return i(a.substr(t))}if("function"==typeof s)return r[a]=s,s;const l=r[a];if(void 0===l){const c=new Error("Required module is missing: "+a);throw console.error(c.stack),c}var u=n[a];if(void 0===u){u={exports:{}};const f=u.exports;l.call(e,o,u,f),n[a]=u.exports,u=u.exports}return u};e.APP={},e.require=o}(this),addListener("DOMContentLoaded",function(){document.body.parentNode.$data={};var e=require("x-widget");e("wdg.article117","wdg.article",{title:"Sabre laser",content:[e({elem:"p",children:[e("light-saber.view118","light-saber.view",{},{id:"light-saber.view118",name:"light-saber.view",class:"right"})]}),e({elem:"p",children:["Dans cet article, nous allons parler du rendu des lumières intenses."]}),e({elem:"p",children:["Quel meilleur exemple qu","&#39;","un sabre laser pour illustrer le concept ?\nCelui qui tourne en ce moment sous vos yeux paraît bien fade,\nmais si vous cliquez sur le bouton ",e({elem:"strong",children:["Halo"]})," il devient plus crédible."]}),e({elem:"p",children:["Jouez avec les trois réglages pour modifier l","&#39;","intensité et la trainée."]}),e({elem:"h1",attr:{id:"post-processing"},children:["Post-processing"]}),e({elem:"p",children:[e({elem:"img",attr:{src:"css/assets/light-saber/layers.png",class:"right"}})]}),e({elem:"p",children:["Ajouter de la brillance n","&#39;","est pas une affaire de 3D, mais une bonne vieille technique\nde traitement d","&#39;","image à plusieurs passes que vous pourriez faire avec GIMP par exemple."]}),e({elem:"p",children:["Pour commencer, il faut faire un rendu 3D de votre scène complete que vous n","&#39;","affichez pas à\nl","&#39;","écran, mais plutôt dans une texture ",e({elem:"strong",children:["(A)"]}),".\nNous verrons plus bas comment faire cela en WebGL."]}),e({elem:"p",children:["Ensuite, il s","&#39;","agit d","&#39;","extraire les zones qui devront émettre un halo. Dans notre cas,\non garde simplement les zones oranges ",e({elem:"strong",children:["(B)"]}),". On aurait aussi pu décider de dessiner\nla lame directement sur B et pas sur A."]}),e({elem:"p",children:["Cette dernière image devra être flouttée à l","&#39;","aide d","&#39;","un filtre Gaussien ",e({elem:"strong",children:["(C)"]}),".\nIl faut souvent répéter ce flou plusieurs fois afin que la couleur s","&#39;","étale bien autour\ndes limites du dessin initial. C","&#39;","est ça qui donnera l","&#39;","effet de halo désiré."]}),e({elem:"p",children:["Il ne reste plus qu","&#39;","à combiner l","&#39;","image A avec la C par addition des couleurs ",e({elem:"strong",children:["(D)"]}),".\nOn voit que le sabre devient jaune. Cela est dû à l","&#39;","addition des couleurs qui se fait canal\npar canal avec troncature à 1. Si on additionne deux oranges, par exemple, on obtient\n",e({elem:"code",children:["(1, 0.5, 0) + (1, 0.5, 0) = (2, 1, 0)"]}),", et après troncage : ",e({elem:"code",children:["(1, 1, 0)"]}),"."]}),e({elem:"hr"}),e({elem:"p",children:["Notre sabre est composé de deux objets : une ",e({elem:"strong",children:["poignée"]})," et une ",e({elem:"strong",children:["lame"]}),"."]}),e({elem:"p",children:["Le premier est rendu avec un shading Gouraud qui reflète la lumière et donne un effet de\nvolume tel qu","&#39;","attendu dans un scène 3D classique. Le Gouraud ne donne pas les résultats\nles plus réalistes, mais il est rapide et suffit largement pour notre exemple."]}),e({elem:"p",children:[e("wdg.showhide119","wdg.showhide",{value:"false",label:"Vertex Shader pour Gouraud",content:[e({elem:"pre",attr:{class:"custom highlight glsl"},children:[e({elem:"span",attr:{class:"comment"},children:["// Perspective"]}),"\r\n",e({elem:"span",attr:{class:"keyword"},children:["uniform"]})," ",e({elem:"span",attr:{class:"keyword"},children:["mat4"]})," ",e({elem:"span",attr:{class:"identifier"},children:["uniProjection"]}),e({elem:"span",attr:{class:"symbol"},children:[";"]}),"\r\n",e({elem:"span",attr:{class:"comment"},children:["// Rotation"]}),"\r\n",e({elem:"span",attr:{class:"keyword"},children:["uniform"]})," ",e({elem:"span",attr:{class:"keyword"},children:["mat4"]})," ",e({elem:"span",attr:{class:"identifier"},children:["uniRotation"]}),e({elem:"span",attr:{class:"symbol"},children:[";"]}),"\r\n",e({elem:"span",attr:{class:"comment"},children:["// Translation"]}),"\r\n",e({elem:"span",attr:{class:"keyword"},children:["uniform"]})," ",e({elem:"span",attr:{class:"keyword"},children:["vec4"]})," ",e({elem:"span",attr:{class:"identifier"},children:["uniTranslation"]}),e({elem:"span",attr:{class:"symbol"},children:[";"]}),"\r\n\r\n",e({elem:"span",attr:{class:"comment"},children:["// Coordonnées du sommet"]}),"\r\n",e({elem:"span",attr:{class:"keyword"},children:["attribute"]})," ",e({elem:"span",attr:{class:"keyword"},children:["vec3"]})," ",e({elem:"span",attr:{class:"identifier"},children:["attPoint"]}),e({elem:"span",attr:{class:"symbol"},children:[";"]}),"\r\n",e({elem:"span",attr:{class:"comment"},children:["// Vecteur normal en ce sommet."]}),"\r\n",e({elem:"span",attr:{class:"keyword"},children:["attribute"]})," ",e({elem:"span",attr:{class:"keyword"},children:["vec3"]})," ",e({elem:"span",attr:{class:"identifier"},children:["attNormal"]}),e({elem:"span",attr:{class:"symbol"},children:[";"]}),"\r\n\r\n",e({elem:"span",attr:{class:"keyword"},children:["const"]})," ",e({elem:"span",attr:{class:"keyword"},children:["vec3"]})," ",e({elem:"span",attr:{class:"identifier"},children:["COLOR"]})," ",e({elem:"span",attr:{class:"operator"},children:["="]})," ",e({elem:"span",attr:{class:"keyword"},children:["vec3"]}),e({elem:"span",attr:{class:"symbol"},children:["("]}),e({elem:"span",attr:{class:"number"},children:["0.1"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"number"},children:["0.5"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"number"},children:["0.86666666666666666"]}),e({elem:"span",attr:{class:"symbol"},children:[");"]}),"\r\n",e({elem:"span",attr:{class:"comment"},children:["// Lumière incidente"]}),"\r\n",e({elem:"span",attr:{class:"keyword"},children:["const"]})," ",e({elem:"span",attr:{class:"keyword"},children:["vec3"]})," ",e({elem:"span",attr:{class:"identifier"},children:["LIGHT"]})," ",e({elem:"span",attr:{class:"operator"},children:["="]})," ",e({elem:"span",attr:{class:"keyword2"},children:["normalize"]}),e({elem:"span",attr:{class:"symbol"},children:["("]}),e({elem:"span",attr:{class:"keyword"},children:["vec3"]}),e({elem:"span",attr:{class:"symbol"},children:["("]}),".",e({elem:"span",attr:{class:"number"},children:["5"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"operator"},children:["-"]}),".",e({elem:"span",attr:{class:"number"},children:["5"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"number"},children:["-1"]}),e({elem:"span",attr:{class:"symbol"},children:["));"]}),"\r\n\r\n",e({elem:"span",attr:{class:"keyword"},children:["varying"]})," ",e({elem:"span",attr:{class:"keyword"},children:["vec3"]})," ",e({elem:"span",attr:{class:"identifier"},children:["varColor"]}),e({elem:"span",attr:{class:"symbol"},children:[";"]}),"\r\n\r\n",e({elem:"span",attr:{class:"keyword"},children:["float"]})," ",e({elem:"span",attr:{class:"function"},children:["ramp"]}),e({elem:"span",attr:{class:"symbol"},children:["("]}),e({elem:"span",attr:{class:"keyword"},children:["vec3"]})," ",e({elem:"span",attr:{class:"identifier"},children:["ray"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"keyword"},children:["float"]})," ",e({elem:"span",attr:{class:"identifier"},children:["minValue"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"keyword"},children:["float"]})," ",e({elem:"span",attr:{class:"identifier"},children:["maxValue"]}),e({elem:"span",attr:{class:"symbol"},children:[")"]})," ",e({elem:"span",attr:{class:"symbol"},children:["{"]}),"\r\n    ",e({elem:"span",attr:{class:"keyword"},children:["float"]})," ",e({elem:"span",attr:{class:"identifier"},children:["diff"]})," ",e({elem:"span",attr:{class:"operator"},children:["="]})," ",e({elem:"span",attr:{class:"identifier"},children:["maxValue"]})," ",e({elem:"span",attr:{class:"operator"},children:["-"]})," ",e({elem:"span",attr:{class:"identifier"},children:["minValue"]}),e({elem:"span",attr:{class:"symbol"},children:[";"]}),"\r\n    ",e({elem:"span",attr:{class:"keyword"},children:["float"]})," ",e({elem:"span",attr:{class:"identifier"},children:["alpha"]})," ",e({elem:"span",attr:{class:"operator"},children:["="]})," ",e({elem:"span",attr:{class:"number"},children:["0.5"]})," ",e({elem:"span",attr:{class:"operator"},children:["*"]})," ",e({elem:"span",attr:{class:"symbol"},children:["("]}),e({elem:"span",attr:{class:"identifier"},children:["ray"]}),".",e({elem:"span",attr:{class:"identifier"},children:["z"]})," ",e({elem:"span",attr:{class:"operator"},children:["+"]})," ",e({elem:"span",attr:{class:"number"},children:["1.0"]}),e({elem:"span",attr:{class:"symbol"},children:[");"]}),"\r\n    ",e({elem:"span",attr:{class:"keyword"},children:["return"]})," ",e({elem:"span",attr:{class:"identifier"},children:["minValue"]})," ",e({elem:"span",attr:{class:"operator"},children:["+"]})," ",e({elem:"span",attr:{class:"identifier"},children:["alpha"]})," ",e({elem:"span",attr:{class:"operator"},children:["*"]})," ",e({elem:"span",attr:{class:"identifier"},children:["diff"]}),e({elem:"span",attr:{class:"symbol"},children:[";"]}),"\r\n",e({elem:"span",attr:{class:"symbol"},children:["}"]}),"\r\n\r\n",e({elem:"span",attr:{class:"keyword"},children:["void"]})," ",e({elem:"span",attr:{class:"function"},children:["main"]}),e({elem:"span",attr:{class:"symbol"},children:["()"]})," ",e({elem:"span",attr:{class:"symbol"},children:["{"]}),"\r\n  ",e({elem:"span",attr:{class:"comment"},children:["// Rotation, translation et projection en perspective."]}),"\r\n  ",e({elem:"span",attr:{class:"keyword"},children:["vec4"]})," ",e({elem:"span",attr:{class:"identifier"},children:["vertex"]})," ",e({elem:"span",attr:{class:"operator"},children:["="]})," ",e({elem:"span",attr:{class:"identifier"},children:["uniRotation"]})," ",e({elem:"span",attr:{class:"operator"},children:["*"]})," ",e({elem:"span",attr:{class:"keyword"},children:["vec4"]}),e({elem:"span",attr:{class:"symbol"},children:["("]})," ",e({elem:"span",attr:{class:"identifier"},children:["attPoint"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"number"},children:["1"]})," ",e({elem:"span",attr:{class:"symbol"},children:[")"]})," ",e({elem:"span",attr:{class:"operator"},children:["+"]})," ",e({elem:"span",attr:{class:"identifier"},children:["uniTranslation"]}),e({elem:"span",attr:{class:"symbol"},children:[";"]}),"\r\n  ",e({elem:"span",attr:{class:"keyword2"},children:["gl_Position"]})," ",e({elem:"span",attr:{class:"operator"},children:["="]})," ",e({elem:"span",attr:{class:"identifier"},children:["uniProjection"]})," ",e({elem:"span",attr:{class:"operator"},children:["*"]})," ",e({elem:"span",attr:{class:"identifier"},children:["vertex"]}),e({elem:"span",attr:{class:"symbol"},children:[";"]}),"\r\n\r\n  ",e({elem:"span",attr:{class:"keyword"},children:["vec4"]})," ",e({elem:"span",attr:{class:"identifier"},children:["normal"]})," ",e({elem:"span",attr:{class:"operator"},children:["="]})," ",e({elem:"span",attr:{class:"identifier"},children:["uniRotation"]})," ",e({elem:"span",attr:{class:"operator"},children:["*"]})," ",e({elem:"span",attr:{class:"keyword"},children:["vec4"]}),e({elem:"span",attr:{class:"symbol"},children:["("]})," ",e({elem:"span",attr:{class:"identifier"},children:["attNormal"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"number"},children:["1"]})," ",e({elem:"span",attr:{class:"symbol"},children:[");"]}),"\r\n  ",e({elem:"span",attr:{class:"keyword"},children:["vec3"]})," ",e({elem:"span",attr:{class:"identifier"},children:["ray"]})," ",e({elem:"span",attr:{class:"operator"},children:["="]})," ",e({elem:"span",attr:{class:"keyword2"},children:["reflect"]}),e({elem:"span",attr:{class:"symbol"},children:["("]}),e({elem:"span",attr:{class:"identifier"},children:["LIGHT"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["normal"]}),".",e({elem:"span",attr:{class:"identifier"},children:["xyz"]}),e({elem:"span",attr:{class:"symbol"},children:[");"]}),"\r\n  ",e({elem:"span",attr:{class:"keyword"},children:["float"]})," ",e({elem:"span",attr:{class:"identifier"},children:["lightPower"]})," ",e({elem:"span",attr:{class:"operator"},children:["="]})," ",e({elem:"span",attr:{class:"function"},children:["ramp"]}),e({elem:"span",attr:{class:"symbol"},children:["("]}),e({elem:"span",attr:{class:"identifier"},children:["ray"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"number"},children:["0.4"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"number"},children:["1.5"]}),e({elem:"span",attr:{class:"symbol"},children:[");"]}),"\r\n\r\n  ",e({elem:"span",attr:{class:"identifier"},children:["varColor"]})," ",e({elem:"span",attr:{class:"operator"},children:["="]})," ",e({elem:"span",attr:{class:"identifier"},children:["COLOR"]})," ",e({elem:"span",attr:{class:"operator"},children:["*"]})," ",e({elem:"span",attr:{class:"identifier"},children:["lightPower"]}),e({elem:"span",attr:{class:"symbol"},children:[";"]}),"\r\n",e({elem:"span",attr:{class:"symbol"},children:["}"]})," "]})]},{id:"wdg.showhide119"})]}),e({elem:"p",children:["Pour la lame, on utilise un shader qui renvoie une couleur unique quelque soit l","&#39;","orientation\nde la face. Cela facilitera la tâche du filtre. Le fragment shader est passez\nsimple et le plus rapide qui soit :"]}),e({elem:"p",children:[e({elem:"pre",attr:{class:"custom highlight glsl"},children:[e({elem:"span",attr:{class:"keyword"},children:["uniform"]})," ",e({elem:"span",attr:{class:"keyword"},children:["vec4"]})," ",e({elem:"span",attr:{class:"identifier"},children:["uniColor"]}),e({elem:"span",attr:{class:"symbol"},children:[";"]}),"\r\n",e({elem:"span",attr:{class:"keyword"},children:["void"]})," ",e({elem:"span",attr:{class:"function"},children:["main"]}),e({elem:"span",attr:{class:"symbol"},children:["()"]})," ",e({elem:"span",attr:{class:"symbol"},children:["{"]}),"\r\n  ",e({elem:"span",attr:{class:"keyword2"},children:["gl_FragColor"]})," ",e({elem:"span",attr:{class:"operator"},children:["="]})," ",e({elem:"span",attr:{class:"identifier"},children:["uniColor"]}),e({elem:"span",attr:{class:"symbol"},children:[";"]}),"\r\n",e({elem:"span",attr:{class:"symbol"},children:["}"]})," "]})]}),e({elem:"p",children:["Il faut alors créer un frameBuffer pour que le rendu se fasse dans une texture :\n",e({elem:"pre",attr:{class:"custom highlight js"},children:[e({elem:"span",attr:{class:"keyword"},children:["function"]})," ",e({elem:"span",attr:{class:"function"},children:["createFramebuffer"]}),e({elem:"span",attr:{class:"symbol"},children:["("]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["width"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["height"]})," ",e({elem:"span",attr:{class:"symbol"},children:[")"]})," ",e({elem:"span",attr:{class:"symbol"},children:["{"]}),"\r\n    ",e({elem:"span",attr:{class:"keyword"},children:["const"]})," ",e({elem:"span",attr:{class:"identifier"},children:["fb"]})," ",e({elem:"span",attr:{class:"operator"},children:["="]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"function"},children:["createFramebuffer"]}),e({elem:"span",attr:{class:"symbol"},children:["();"]}),"\r\n\r\n    ",e({elem:"span",attr:{class:"comment"},children:["// Dire à WebGL que le frameBuffer courant est celui-ci."]}),"\r\n    ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"function"},children:["bindFramebuffer"]}),e({elem:"span",attr:{class:"symbol"},children:["("]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["FRAMEBUFFER"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["fb"]})," ",e({elem:"span",attr:{class:"symbol"},children:[");"]}),"\r\n\r\n    ",e({elem:"span",attr:{class:"comment"},children:["// Attacher une texture à ce framebuffer."]}),"\r\n    ",e({elem:"span",attr:{class:"keyword"},children:["const"]})," ",e({elem:"span",attr:{class:"identifier"},children:["texture"]})," ",e({elem:"span",attr:{class:"operator"},children:["="]})," ",e({elem:"span",attr:{class:"function"},children:["createTexture"]}),e({elem:"span",attr:{class:"symbol"},children:["("]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["width"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["height"]})," ",e({elem:"span",attr:{class:"symbol"},children:[");"]}),"\r\n    ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"function"},children:["framebufferTexture2D"]}),e({elem:"span",attr:{class:"symbol"},children:["("]}),"\r\n        ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["FRAMEBUFFER"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["COLOR_ATTACHMENT0"]}),e({elem:"span",attr:{class:"symbol"},children:[","]}),"\r\n        ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["TEXTURE_2D"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["texture"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"number"},children:["0"]}),"\r\n    ",e({elem:"span",attr:{class:"symbol"},children:[");"]}),"\r\n\r\n    ",e({elem:"span",attr:{class:"comment"},children:["// Associer un Depth Buffer parce qu'il n'y en a pas par défaut."]}),"\r\n    ",e({elem:"span",attr:{class:"keyword"},children:["const"]})," ",e({elem:"span",attr:{class:"identifier"},children:["depthBuffer"]})," ",e({elem:"span",attr:{class:"operator"},children:["="]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"function"},children:["createRenderbuffer"]}),e({elem:"span",attr:{class:"symbol"},children:["();"]}),"\r\n    ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"function"},children:["bindRenderbuffer"]}),e({elem:"span",attr:{class:"symbol"},children:["("]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["RENDERBUFFER"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["depthBuffer"]})," ",e({elem:"span",attr:{class:"symbol"},children:[");"]}),"\r\n    ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"function"},children:["renderbufferStorage"]}),e({elem:"span",attr:{class:"symbol"},children:["("]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["RENDERBUFFER"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["DEPTH_COMPONENT16"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["width"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["height"]})," ",e({elem:"span",attr:{class:"symbol"},children:[");"]}),"\r\n    ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"function"},children:["framebufferRenderbuffer"]}),e({elem:"span",attr:{class:"symbol"},children:["("]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["FRAMEBUFFER"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["DEPTH_ATTACHMENT"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["RENDERBUFFER"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["depthBuffer"]})," ",e({elem:"span",attr:{class:"symbol"},children:[");"]}),"\r\n\r\n    ",e({elem:"span",attr:{class:"keyword"},children:["return"]})," ",e({elem:"span",attr:{class:"symbol"},children:["{"]})," ",e({elem:"span",attr:{class:"identifier"},children:["fb"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["texture"]})," ",e({elem:"span",attr:{class:"symbol"},children:["};"]}),"\r\n",e({elem:"span",attr:{class:"symbol"},children:["}"]})," "]})]}),e({elem:"p",children:[e("wdg.showhide120","wdg.showhide",{value:"false",label:"Si vous avez oublié comment créer une texture...",content:[e({elem:"pre",attr:{class:"custom highlight glsl"},children:[e({elem:"span",attr:{class:"identifier"},children:["function"]})," ",e({elem:"span",attr:{class:"function"},children:["createTexture"]}),e({elem:"span",attr:{class:"symbol"},children:["("]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["width"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["height"]})," ",e({elem:"span",attr:{class:"symbol"},children:[")"]})," ",e({elem:"span",attr:{class:"symbol"},children:["{"]}),"\r\n    ",e({elem:"span",attr:{class:"keyword"},children:["const"]})," ",e({elem:"span",attr:{class:"identifier"},children:["texture"]})," ",e({elem:"span",attr:{class:"operator"},children:["="]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"function"},children:["createTexture"]}),e({elem:"span",attr:{class:"symbol"},children:["();"]}),"\r\n\r\n    ",e({elem:"span",attr:{class:"comment"},children:["// Tell GL that the current texture is this one."]}),"\r\n    ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"function"},children:["bindTexture"]}),e({elem:"span",attr:{class:"symbol"},children:["("]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["TEXTURE_2D"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["texture"]})," ",e({elem:"span",attr:{class:"symbol"},children:[");"]}),"\r\n\r\n    ",e({
elem:"span",attr:{class:"comment"},children:["// The texture doesn't wrap and it uses linear interpolation."]}),"\r\n    ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"function"},children:["texParameteri"]}),e({elem:"span",attr:{class:"symbol"},children:["("]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["TEXTURE_2D"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["TEXTURE_WRAP_S"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["CLAMP_TO_EDGE"]})," ",e({elem:"span",attr:{class:"symbol"},children:[");"]}),"\r\n    ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"function"},children:["texParameteri"]}),e({elem:"span",attr:{class:"symbol"},children:["("]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["TEXTURE_2D"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["TEXTURE_WRAP_T"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["CLAMP_TO_EDGE"]})," ",e({elem:"span",attr:{class:"symbol"},children:[");"]}),"\r\n    ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"function"},children:["texParameteri"]}),e({elem:"span",attr:{class:"symbol"},children:["("]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["TEXTURE_2D"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["TEXTURE_MIN_FILTER"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["LINEAR"]})," ",e({elem:"span",attr:{class:"symbol"},children:[");"]}),"\r\n    ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"function"},children:["texParameteri"]}),e({elem:"span",attr:{class:"symbol"},children:["("]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["TEXTURE_2D"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["TEXTURE_MAG_FILTER"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["LINEAR"]})," ",e({elem:"span",attr:{class:"symbol"},children:[");"]}),"\r\n\r\n    ",e({elem:"span",attr:{class:"comment"},children:["// Set texture dimension."]}),"\r\n    ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"function"},children:["texImage2D"]}),e({elem:"span",attr:{class:"symbol"},children:["("]}),"\r\n        ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["TEXTURE_2D"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"number"},children:["0"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["RGBA"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["width"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["height"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"number"},children:["0"]}),e({elem:"span",attr:{class:"symbol"},children:[","]}),"\r\n        ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["RGBA"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["gl"]}),".",e({elem:"span",attr:{class:"identifier"},children:["UNSIGNED_BYTE"]}),e({elem:"span",attr:{class:"symbol"},children:[","]})," ",e({elem:"span",attr:{class:"identifier"},children:["null"]}),"\r\n    ",e({elem:"span",attr:{class:"symbol"},children:[");"]}),"\r\n\r\n    ",e({elem:"span",attr:{class:"keyword"},children:["return"]})," ",e({elem:"span",attr:{class:"identifier"},children:["texture"]}),e({elem:"span",attr:{class:"symbol"},children:[";"]}),"\r\n",e({elem:"span",attr:{class:"symbol"},children:["}"]})," "]})]},{id:"wdg.showhide120"})]}),e({elem:"h1",attr:{id:"floutage-rapide"},children:["Floutage rapide"]}),e({elem:"p",children:["L","&#39;","effet doit s","&#39;","appliquer en temps réel, alors il nous est impossible de faire un grand\nnombre de passes de floutage. Pourtant, il faut bien que la couleur s","&#39;","étale. Nous allons\ndonc recourir à des astuces."]}),e({elem:"p",children:["Pour rendre un pixel flou, il suffit de réaliser une moyenne podérée avec tous ses voisins.\nPar exemple, si on considère les 8 voisins immédiats, on va devoir moyenner un carré ",e({elem:"code",children:["3x3"]}),".\nPour un floutage Gaussien, on pourra utiliser les coefficients suivants dont la somme vaut 1 :"]}),e({elem:"p",children:[e({elem:"div",attr:{class:"tbl grd"},children:["\r\n    ",e({elem:"div",children:[e({elem:"div",children:["0.045"]}),e({elem:"div",children:["0.122"]}),e({elem:"div",children:["0.045"]})]}),"\r\n    ",e({elem:"div",children:[e({elem:"div",children:["0.122"]}),e({elem:"div",children:["0.332"]}),e({elem:"div",children:["0.122"]})]}),"\r\n    ",e({elem:"div",children:[e({elem:"div",children:["0.045"]}),e({elem:"div",children:["0.122"]}),e({elem:"div",children:["0.045"]})]}),"\r\n"]})]}),e({elem:"p",children:["De cette façon, la couleur va s","&#39;","étaler de ... 1 seul pixel ! Si on veut un étalement\nde 10 pixels, on pourrait"]}),e({elem:"ul",children:["\n",e({elem:"li",children:[e({elem:"strong",children:["(A)"]})," appliquer 10 fois de suite un carré ",e({elem:"code",children:["3x3"]})," ou"]}),"\n",e({elem:"li",children:[e({elem:"strong",children:["(B)"]})," utiliser une fois un carré de ",e({elem:"code",children:["21x21"]}),"."]}),"\n"]}),e({elem:"p",children:["Les mathématiques nous viennent en aide en affirmant qu","&#39;","une Gaussienne en 2D\nest équivalente au produit de deux Gaussiennes en 1D. Ca ne vous aide pas ?"]}),e({elem:"p",children:["Et bien cela signifie que faire un moyenne sur un carré de ",e({elem:"code",children:["21x21"]})," revient à faire une\nmoyenne sur un rectangle de ",e({elem:"code",children:["21x1"]})," et de faire une moyenne sur ce résultat avec un rectangle\nde ",e({elem:"code",children:["1x21"]}),". On a donc une troisième technique ",e({elem:"strong",children:["(C)"]})," qui combine une Gaussienne verticale\navec une Gaussienne horizontale."]}),e({elem:"p",children:["Voici une comparaison du nombre de lectures/écritures en mémoire pour chaque pixel à flouter :"]}),e({elem:"p",children:[e({elem:"div",attr:{class:"tbl grd"},children:["\r\n    ",e({elem:"div",children:[e({elem:"div",attr:{class:"hdr"},children:["Technique"]}),e({elem:"div",attr:{class:"hdr"},children:["Lectures"]}),e({elem:"div",attr:{class:"hdr"},children:["Ecritures"]})]}),"\r\n    ",e({elem:"div",children:[e({elem:"div",attr:{class:"hdr"},children:["(A)"]}),e({elem:"div",children:["90"]}),e({elem:"div",children:["10"]})]}),"\r\n    ",e({elem:"div",children:[e({elem:"div",attr:{class:"hdr"},children:["(B)"]}),e({elem:"div",children:["441"]}),e({elem:"div",children:["1"]})]}),"\r\n    ",e({elem:"div",children:[e({elem:"div",attr:{class:"hdr"},children:["(C)"]}),e({elem:"div",children:["42"]}),e({elem:"div",children:["2"]})]}),"\r\n"]})]}),e({elem:"h1",attr:{id:"comment-choisir-les-poids-pour-notre-gaussienne"},children:["Comment choisir les poids pour notre Gaussienne"]}),e({elem:"p",children:["Supposons que l","&#39;","on veuille un flou horizontal de taille 7.\nCela signifie qu","&#39;","il faudra faire une moyenne des couleurs du fragment considéré avec les 3 à sa droite et les 3 à sa gauche. Pour obtenir un résultat réaliste, il faut pondérer les couleurs de sorte que la couleur du fragment considéré ait le plus de poids et que les fragments aux extrémités en aient le moins."]}),e({elem:"p",children:["Si on parle de flou Gaussien, c","&#39;","est parce que l","&#39;","on va choisir les poids selon la fameuse courbe en cloche de Gauss. Tout bon mathématicien vous donnera immédiatement sa formule compliquée avec des exponentielles. Mais par chance, il y a plus simple. Les coefficients binomiaux (ceux du triangle de Pascal) donnent le même résultat. Voici les premières lignes de ce triangle :"]}),e({elem:"p",children:[e("light-saber.wdg.pascal121","light-saber.wdg.pascal",{},{id:"light-saber.wdg.pascal121",name:"light-saber.wdg.pascal"})]}),e({elem:"p",children:["Si on prend les coefficients en rouge, on obtient les histogrammes suivants :\n",e("light-saber.wdg.histo7122","light-saber.wdg.histo7",{},{id:"light-saber.wdg.histo7122",name:"light-saber.wdg.histo7"})]}),e({elem:"h1",attr:{id:"la-derni-re-optimisation"},children:["La dernière optimisation"]}),e({elem:"p",children:["Pour faire un flou de taille 7, il semble qu","&#39;","il nous faille lire 7 couleurs. Mais on pourrait n","&#39;","en lire que 4 si on exploite les interpolations linéaires opérées lors de la lecture des textures."]}),e({elem:"p",children:["En effet, quand on utilise la fonction ",e({elem:"code",children:["texture2D( uniTexture, varUV )"]})," il est possible que certaines coordonnées ",e({elem:"code",children:["varUV"]})," ne tombent pas précisément sur le centre d","&#39;","un pixel. Quand cela arrive, WebGL réalise une interpolation linéaire entre les 4 pixels les plus proches."]}),e({elem:"p",children:["L","&#39;","astuce consiste donc à lire entre deux pixels pour avoir une moyenne pondérée de ces derniers."]}),e({elem:"p",children:["Supposons que l","&#39;","on ait les 4 pixels suivants :"]}),e({elem:"ul",children:["\n",e({elem:"li",children:[e({elem:"strong",children:["A"]})," ",e({elem:"code",children:["x=0.125"]})," et ",e({elem:"code",children:["w=10"]}),"."]}),"\n",e({elem:"li",children:[e({elem:"strong",children:["B"]})," ",e({elem:"code",children:["x=0.375"]})," et ",e({elem:"code",children:["w=40"]}),"."]}),"\n",e({elem:"li",children:[e({elem:"strong",children:["C"]})," ",e({elem:"code",children:["x=0.625"]})," et ",e({elem:"code",children:["w=40"]}),"."]}),"\n",e({elem:"li",children:[e({elem:"strong",children:["D"]})," ",e({elem:"code",children:["x=0.875"]})," et ",e({elem:"code",children:["w=10"]}),"."]}),"\n"]}),e({elem:"p",children:["Alors si on lit la couleur entre le point ",e({elem:"strong",children:["A"]})," et le point ",e({elem:"strong",children:["B"]})," à la position ",e({elem:"code",children:["x=0.325"]}),", on obtiendra la moyenne pondérée de ",e({elem:"strong",children:["A"]})," et ",e({elem:"strong",children:["B"]})," avec les poids ",e({elem:"code",children:["w=10"]})," et ",e({elem:"code",children:["w=40"]}),"."]}),e({elem:"p",children:["Pour ceux à qui les calculs donnent des maux de tête, voici l","&#39;","algorithme qui génère le code GLSL du fragment shader pour faire uin moyenne pondérée en utilisant le moins de lectures de pixels possible : ",e({elem:"a",attr:{href:"https://github.com/tolokoban/webgl-experiments/blob/master/src/mod/webgl/filter/gaussian-blur.js"},children:["gaussian-blur.js"]})]})]},{id:"wdg.article117"})}),require("$",function(e,t,n){function r(e,t){var n=e;if(1<t.length){for(var r,i="",o=0,a=0;a<e.length;a++)if("$"===(r=e.charAt(a))){i+=e.substring(o,a),a++;var s=e.charCodeAt(a)-48;i+=0>s||s>=t.length?"$".concat(e.charAt(a)):t[s],o=a+1}else"\\"===r&&(i+=e.substring(o,a),a++,i+=e.charAt(a),o=a+1);i+=e.substr(o),n=i}return n}n.config={name:'"webgl-experiments"',description:'"WebGL study by tutorials"',author:'"tolokoban"',version:'"0.0.130"',major:"0",minor:"0",revision:"130",date:"2019-03-04T12:55:42.008Z",consts:{}},n.lang=function(e){var t=e;return void 0===t&&(window.localStorage&&(t=window.localStorage.getItem("Language")),!t&&!(t=window.navigator.language)&&!(t=window.navigator.browserLanguage)&&(t="fr"),t=t.substr(0,2).toLowerCase()),window.localStorage&&window.localStorage.setItem("Language",t),t},n.intl=function(e,t){var i=e[n.lang()],o=t[0],a=Object.keys(e)[0];if(!a)return o;if(!i&&!(i=e[a]))return o;var s=i[o];return s||(i=e[a],s=i[o]),s?r(s,t):o}}),require("assets",function(e,t){var n=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}();t.exports._=n}),require("wdg.article",function(e,t){function n(e){var t,n,r=o.tag("nav","thm-ele8","thm-bgPL");for(t in i)n=i[t],"$"===t.charAt(0)?o.add(r,o.tag("h1",[n])):t==e?o.add(r,o.tag("div","thm-ele1",[n])):o.add(r,o.tag("a",[n],{href:t+".html"}));return r}var r=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}(),i={$1:"Les bases",intro:"Introduction",index:"Comprendre WebGL",index2:"Comprendre WebGL (2)",chap1:"Dessiner un carré",chap2:"Dessiner un polygône",chap3:"Textures procédurales",chap4:"Textures animées",chap5:"Utiliser des images",chap6:"Un point c'est tout","chap6-2":"La semi-transparence",transparence:"La semi-transparence (2)",chap7:"Particules",chap8:"Frame Buffer",deform:"Déformation",deform2:"Déformation (2)",$2:"La troisième dimension",interpolation:"Interpolation des varyings",$666:"Annexes",doc:"Documentations"};e("theme");var o=e("dom"),a=e("tfw.data-binding"),s=e("tfw.view.icon");t.exports=function(t){var r=e("tfw.url-args").parse();o.addClass(document.body,"thm-bg0");var i=window.location.pathname.split("/").pop();i=i.substr(0,i.length-5),"string"!=typeof t.title&&(t.title=i);var l=o.tag("header","thm-ele12","thm-bgP",[o.tag("a",{href:"index.html#"+r.id},[new s({size:"1.5rem",content:"menu"})]),t.title]),c=(n(i),o.tag("article","thm-bg1"));o.elem(this,"div","article",[c,l]);a.prop(this,"content")(function(e){o.clear(c),Array.isArray(e)||(e=[e]),e.forEach(function(e){o.add(c,e)})}),t=a.extend({content:[]},t,this)},{}.toc=[{0:"WebGL 1.0",1:[{0:"Comprendre WebGL",1:["index","index2"]},{0:"Dessiner un carré",1:"chap1"},{0:"Dessiner un polygône",1:"chap2"},{0:"Textures procédurales",1:"chap3"},{0:"Textures animées",1:"chap4"},{0:"Utiliser des images",1:"chap5"},{0:"Un point c'est tout",1:"chap6"},{0:"La semi-transparence",1:["chap6-2","transparence"]},{0:"Particules",1:"chap7"},{0:"Frame Buffer",1:"chap8"},{0:"Déformation",1:["deform","deform2"]}]},{0:"Annexes",1:[{0:"Documentations",1:"doc"}]}],t.exports._=r}),require("tfw.url-args",function(e,t,n){var r=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}();n.parse=function(){var e,t,n={},r=location.search;if(2>r.length)return n;for(r=r.substring(1).split("&"),e=0;e<r.length;e++)t=r[e].split("="),1==t.length?n[""]=decodeURIComponent(t[0]):n[t[0]]=decodeURIComponent(t[1]);return n},n.stringify=function(){},t.exports._=r}),require("tfw.view.icon",function(e,t){function n(e){var t=(f.svg("g",{"stroke-width":6,fill:"none","stroke-linecap":"round","stroke-linejoin":"round"}),[[],[],[],[],[],[],[],[]]),n=[[],[],[],[],[],[],[],[]],i=r(this.$,t,n,e);return i?(f.att(i,{"stroke-width":6,fill:"none","stroke-linecap":"round","stroke-linejoin":"round"}),{svgRootGroup:i,elementsToFillPerColor:t,elementsToStrokePerColor:n}):null}function r(e,t,n,a){if("string"==typeof a)return f.add(e,a);if(!o(a))return null;var s=a[0],l=f.svg(s);return a.forEach(function(e,o){0===o||(Array.isArray(e)?e.forEach(r.bind(null,l,t,n)):i(l,t,n,e))}),f.add(e,l),l}function i(e,t,n,r){var i,o,a,s;for(i in r)o=r[i],"fill"===i||"stroke"===i?(a=parseInt(o),isNaN(a)?f.att(e,i,o):(s="fill"===i?t:n,a=c(a,0,s.length-1),s[a].push(e))):f.att(e,i,o)}function o(e){if(void 0===e)return!1;if(!Array.isArray(e))throw"Definition of SVG elements must be arrays!\n"+JSON.stringify(e);var t=e[0];if("string"!=typeof t)throw"The first item of a SVG element must be a string!\n"+t;return!0}function a(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"0";if(this._content){var n=this._content.elementsToFillPerColor[e];Array.isArray(n)||(n=[]);var r=this._content.elementsToStrokePerColor[e];Array.isArray(r)||(r=[]),s(n,r,t)}}function s(e,t,n){l("fill",e,p,n),l("stroke",t,m,n)}function l(e,t,n,r){var i=n[r];t.forEach(function(e){Object.values(n).forEach(function(t){f.removeClass(e,t)})}),void 0===i?t.forEach(function(t){f.att(t,e,r)}):t.forEach(function(t){f.addClass(t,i),f.removeAtt(t,e)})}function c(e,t,n){return e<t?t:e>n?n:e}var u=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}();e("polyfill.object.values");var f=e("dom"),h=e("tfw.icons"),d={onContentChanged:function(e){try{var t="string"==typeof e?h.iconsBook[e]:e;if(this._content=n.call(this,t),!this._content)return;f.clear(this,this._content.svgRootGroup);for(var r,i=[0,1,2,3,4,5,6,7],o=0;o<i.length;o++)r=i[o],a.call(this,r,this["pen".concat(r)]);this.$.style.display=""}catch(e){this.$.style.display="none",""!==this.content&&(this.content="")}},onPen0Changed:function(e){a.call(this,0,e)},onPen1Changed:function(e){a.call(this,1,e)},onPen2Changed:function(e){a.call(this,2,e)},onPen3Changed:function(e){a.call(this,3,e)},onPen4Changed:function(e){a.call(this,4,e)},onPen5Changed:function(e){a.call(this,5,e)},onPen6Changed:function(e){a.call(this,6,e)},onPen7Changed:function(e){a.call(this,7,e)}},p={0:"thm-svg-fill0",1:"thm-svg-fill1",P:"thm-svg-fill-P",PL:"thm-svg-fill-PL",PD:"thm-svg-fill-PD",S:"thm-svg-fill-S",SL:"thm-svg-fill-SL",SD:"thm-svg-fill-SD"},m={0:"thm-svg-stroke0",1:"thm-svg-stroke1",P:"thm-svg-stroke-P",PL:"thm-svg-stroke-PL",PD:"thm-svg-stroke-PD",S:"thm-svg-stroke-S",SL:"thm-svg-stroke-SL",SD:"thm-svg-stroke-SD"};try{t.exports=function(){function t(e,t,n){return void 0===e[t]?n:e[t]}function n(e,t,n){n?i.removeClass(e,t):i.addClass(e,t)}function r(e,t,n){n?i.addClass(e,t):i.removeClass(e,t)}var i=e("dom"),o=e("tfw.binding.property-manager"),a=e("tfw.view").Tag,s=e("tfw.binding.link"),l=e("tfw.view"),c=e("tfw.binding.converters");l.ensureCodeBehind(d,"onContentChanged","onPen0Changed","onPen1Changed","onPen2Changed","onPen3Changed","onPen4Changed","onPen6Changed","onPen7Changed");var u=c.get("boolean"),f=c.get("unit"),h=c.get("string");return function(e){try{void 0===e&&(e={}),this.$elements={};var l=this,c=o(this);c.create("visible",{cast:u}),c.create("content"),c.create("size",{cast:f}),c.create("animate",{cast:u}),c.create("flipH",{cast:u}),c.create("flipV",{cast:u}),c.create("pen0",{cast:h}),c.create("pen1",{cast:h}),c.create("pen2",{cast:h}),c.create("pen3",{cast:h}),c.create("pen4",{cast:h}),c.create("pen5",{cast:h}),c.create("pen6",{cast:h}),c.create("pen7",{cast:h});var p=new a("SVG",["class","width","height","viewBox","preserveAspectRatio"]);Object.defineProperty(this,"$",{value:p.$,writable:!1,enumerable:!1,configurable:!1}),new s({A:{obj:l,name:"visible"},B:{action:function(e){n(p,"hide",e)}},name:"visible > undefined"}),new s({A:{obj:l,name:"animate"},B:{action:function(e){r(p,"animate",e)}},name:"animate > undefined"}),new s({A:{obj:l,name:"flipH"},B:{action:function(e){r(p,"flipH",e)}},name:"flip-h > undefined"}),new s({A:{obj:l,name:"flipV"},B:{action:function(e){r(p,"flipV",e)}},name:"flip-v > undefined"}),c.on("content",function(e){try{d.onContentChanged.call(l,e)}catch(e){console.error('Exception in function behind "onContentChanged" of module "mod/tfw.view.icon.js" for attribute "content"!'),console.error(e)}}),c.on("pen0",function(e){try{d.onPen0Changed.call(l,e)}catch(e){console.error('Exception in function behind "onPen0Changed" of module "mod/tfw.view.icon.js" for attribute "pen0"!'),console.error(e)}}),c.on("pen1",function(e){try{d.onPen1Changed.call(l,e)}catch(e){console.error('Exception in function behind "onPen1Changed" of module "mod/tfw.view.icon.js" for attribute "pen1"!'),console.error(e)}}),c.on("pen2",function(e){try{d.onPen2Changed.call(l,e)}catch(e){console.error('Exception in function behind "onPen2Changed" of module "mod/tfw.view.icon.js" for attribute "pen2"!'),console.error(e)}}),c.on("pen3",function(e){try{d.onPen3Changed.call(l,e)}catch(e){console.error('Exception in function behind "onPen3Changed" of module "mod/tfw.view.icon.js" for attribute "pen3"!'),console.error(e)}}),c.on("pen4",function(e){try{d.onPen3Changed.call(l,e)}catch(e){console.error('Exception in function behind "onPen3Changed" of module "mod/tfw.view.icon.js" for attribute "pen4"!'),console.error(e)}}),c.on("pen5",function(e){try{d.onPen4Changed.call(l,e)}catch(e){console.error('Exception in function behind "onPen4Changed" of module "mod/tfw.view.icon.js" for attribute "pen5"!'),console.error(e)}}),c.on("pen6",function(e){try{d.onPen6Changed.call(l,e)}catch(e){console.error('Exception in function behind "onPen6Changed" of module "mod/tfw.view.icon.js" for attribute "pen6"!'),console.error(e)}}),c.on("pen7",function(e){try{d.onPen7Changed.call(l,e)}catch(e){console.error('Exception in function behind "onPen7Changed" of module "mod/tfw.view.icon.js" for attribute "pen7"!'),console.error(e)}}),c.on("size",function(e){p.$.style.width=e}),c.on("size",function(e){p.$.style.height=e}),p.class="tfw-view-icon",p.width="100%",p.height="100%",p.viewBox="-65 -65 130 130",p.preserveAspectRatio="xMidYMid meet",c.set("visible",t(e,"visible",!0)),c.set("content",t(e,"content","")),c.set("size",t(e,"size",28)),c.set("animate",t(e,"animate",!1)),c.set("flipH",t(e,"flipH",!1)),c.set("flipV",t(e,"flipV",!1)),c.set("pen0",t(e,"pen0",0)),c.set("pen1",t(e,"pen1",1)),c.set("pen2",t(e,"pen2","P")),c.set("pen3",t(e,"pen3","PD")),c.set("pen4",t(e,"pen4","PL")),c.set("pen5",t(e,"pen5","S")),c.set("pen6",t(e,"pen6","SD")),c.set("pen7",t(e,"pen7","SL")),c.fire("visible"),c.fire("content"),c.fire("size"),c.fire("animate"),c.fire("flipH"),c.fire("flipV"),c.fire("pen0"),c.fire("pen1"),c.fire("pen2"),c.fire("pen3"),c.fire("pen4"),c.fire("pen5"),c.fire("pen6"),c.fire("pen7"),i.addClass(this,"view","custom")}catch(e){throw console.error("mod/tfw.view.icon.js",e),Error('Instantiation error in XJS of "mod/tfw.view.icon.js":\n'+e)}}}()}catch(e){throw Error('Definition error in XJS of "mod/tfw.view.icon.js"\n'+e)}t.exports._=u}),require("tfw.binding.converters",function(e,t,n){function r(e){if("number"==typeof e)return e+"px";if("string"!=typeof e)return"0";if("auto"===(e=(""+e).trim().toLowerCase())||"inherit"===e)return e;var t=w.exec(e);if(!t)return"0";var n=parseFloat(t[1]);if(isNaN(n)||0==n)return"0";var r=t[2];return 1>r.length&&(r="px"),n+r}function i(e){switch(_typeof(e)){case"string":if(0===e.trim().length)return A;var t=new RegExp(e);return function(e){return t.test(e)};case"function":return function(t){return o(e(t))}}return A}function o(e){switch(_typeof(e)){case"string":return"true"===e.trim().toLowerCase();case"number":return 0!==e;default:return!!e}}function a(e){if(!e)return[];var t=[];for(var n in e)t.push(n);return t}function s(e){return g.isList(e)?e.slice():Array.isArray(e)?e:[e]}function l(e){return!(e&&("string"==typeof e?0!==e.trim().length:"number"!=typeof e.length||0!==e.length))}function c(e){return null===e||void 0===e?"":"object"===_typeof(e)?Array.isArray(e)?JSON.stringify(e):f(e):""+e}function u(e){if(!Array.isArray(e)&&"object"!==_typeof(e)){var t={};return t[v.lang()]=""+e,t}return e}function f(e){if("string"==typeof e)return e;if(void 0===e)return"";if(null===e)return"";var t=e[v.lang()];if(!t)for(var n in e){t=e[n];break}return"string"==typeof t?t:""}function h(e){return"number"==typeof e?function(t){var n=parseFloat(t);return isNaN(n)?e:n}:parseFloat}function d(e){return new Date(e)}function p(e){for(var t=0,n=0,r=0,i=0,o=0,a=e.length,s=0;o<a&&-1==="0123456789".indexOf(e.charAt(o));)o++;for(s=0;o<a&&2>s&&-1!==(i="0123456789".indexOf(e.charAt(o)));)t=10*t+i,o++,s++;for(;o<a&&-1==="0123456789".indexOf(e.charAt(o));)o++;for(s=0;o<a&&2>s&&-1!==(i="0123456789".indexOf(e.charAt(o)));)n=10*n+i,s++,o++;for(;o<a&&-1==="0123456789".indexOf(e.charAt(o));)o++;for(s=0;o<a&&2>s&&-1!==(i="0123456789".indexOf(e.charAt(o)));)r=10*r+i,o++,s++;var l=new Date(0);return l.setHours(t),l.setMinutes(n),l.setSeconds(r),l}var m=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}(),v=e("$"),g=e("tfw.binding.list"),y=e("tfw.color"),b={areMany:function(e){return!(!e||"number"!=typeof e.length)&&1<e.length},areNotMany:function(e){return!(e&&"number"==typeof e.length)||1>=e.length},array:s,boolean:o,booleans:function(e){return Array.isArray(e)?e.map(o):[]},color:function(e){return"string"==typeof e&&y.instance.parse(e)?y.instance.stringify():"#000"},date:function(e){if(e instanceof Date)return e},deg2rad:function(e){return.017453292519943295*h(0)(e)},divBy100:function(e){return.01*h(0)(e)},enum:function(e){e=s(e);var t=e.map(function(e){return e.toLowerCase()});return function(n){var r=Math.max(0,t.indexOf((""+n).toLowerCase()));return e[r]}},float:h,integer:function(e){return"number"==typeof e?function(t){var n=parseInt(t);return isNaN(n)?e:n}:parseInt},intl:f,isEmpty:l,isNotEmpty:function(e){return!l(e)},isNull:function(e){return!!isNaN(e)||!e},isStrictlyPositive:function(e){var t="number"==typeof _v?_v:parseFloat(e);return!isNaN(t)&&0<t},isZero:function(e){return 0===e},keys:a,length:function(e){return e&&"number"==typeof e.length?e.length:0},list:function(e){return g.isList(e)?e:new g(s(e))},multilang:u,not:function(e){return!o(e)},sortedKeys:function(e){return a(e).sort()},string:c,strings:function(e){return Array.isArray(e)?e.map(function(e){return""+e}):[]},time:function(e){return e instanceof Date?e:"number"==typeof e?d(e):"string"==typeof e?p(e):null},unit:r,units:function(e){return Array.isArray(e)?e.map(r):[]},validator:i};n.get=function(e){var t=b[e];if("function"!=typeof t)throw Error('Converter not found: "'.concat(e,'"!\n')+"Registred converters are: ".concat(Object.keys(b).sort().join(", "),"."));return t},n.set=function(e,t){"function"==typeof t?b[e]=t:delete b[e]};var w=/^(-?[.0-9]+)[ \n\r]*([a-z%]*)/,A=function(){return!0};t.exports._=m}),require("tfw.color",function(e,t){function n(e){this.R=0,this.G=0,this.B=0,this.A=0,this.H=0,this.S=0,this.L=0,"string"==typeof e&&this.parse(e)}function r(e){if("#"!==e.charAt(0))return!1;var t=0,n=0,r=0,i=1;switch(e.length){case 4:t=parseInt(e.charAt(1),16)*d,n=parseInt(e.charAt(2),16)*d,r=parseInt(e.charAt(3),16)*d;break;case 5:t=parseInt(e.charAt(1),16)*d,n=parseInt(e.charAt(2),16)*d,r=parseInt(e.charAt(3),16)*d,i=parseInt(e.charAt(4),16)*d;break;case 7:t=parseInt(e.substr(1,2),16)*m,n=parseInt(e.substr(3,2),16)*m,r=parseInt(e.substr(5,2),16)*m;break;case 9:t=parseInt(e.substr(1,2),16)*m,n=parseInt(e.substr(3,2),16)*m,r=parseInt(e.substr(5,2),16)*m,i=parseInt(e.substr(7,2),16)*m}return isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)?this.R=this.G=this.B=this.A=0:(this.R=t,this.G=n,this.B=r,this.A=i),!0}function i(e){var t=g.exec(e);return!!t&&(this.R=l(parseInt(t[1],10)*m),this.G=l(parseInt(t[2],10)*m),this.B=l(parseInt(t[3],10)*m),this.A=1,!0)}function o(e){var t=y.exec(e);return!!t&&(this.R=l(parseInt(t[1],10)*m),this.G=l(parseInt(t[2],10)*m),this.B=l(parseInt(t[3],10)*m),this.A=l(parseFloat(t[4])),!0)}function a(e){var t=b.exec(e);return!!t&&(this.H=l(parseInt(t[1],10)*v),this.S=l(parseInt(t[2],10)*p),this.L=l(parseInt(t[3],10)*p),this.A=1,this.hsl2rgb(),!0)}function s(e){var t=Math.floor(e).toString(16);return 2>t.length&&(t="0"+t),t}function l(e){return 0>e?0:1<e?1:e}function c(e){var t=new n;return t.parse(e),t}var u=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}();t.exports=n,n.prototype.luminance=function(){return.2126*this.R+.7152*this.G+.0722*this.B},n.prototype.stringify=function(){var e=s(255*this.R)+s(255*this.G)+s(255*this.B);return 1>this.A&&(e+=s(255*this.A)),"#".concat(e)},n.prototype.parse=function(e){var t=void 0===e?"#000000":e,n=t.trim().toUpperCase();return!!(r.call(this,n)||i.call(this,n)||o.call(this,n)||a.call(this,n))},n.prototype.copy=function(){var e=new n;return e.R=this.R,e.G=this.G,e.B=this.B,e.A=this.A,e.H=this.H,e.S=this.S,e.L=this.L,e},n.prototype.hsl2rgb=function(){var e=6*this.H,t=this.S,n=this.L,r=(1-Math.abs(2*n-1))*t,i=r*(1-Math.abs(e%2-1)),o=0,a=0,s=0;3>e?1>e?(o=r,a=i,s=0):2>e?(o=i,a=r,s=0):(o=0,a=r,s=i):4>e?(o=0,a=i,s=r):5>e?(o=i,a=0,s=r):(o=r,a=0,s=i);var l=n-.5*r;this.R=o+l,this.G=a+l,this.B=s+l},n.prototype.rgb2hsl=function(){var e=this.R,t=this.G,n=this.B,r=Math.min(e,t,n),i=Math.max(e,t,n),o=i-r;this.L=.5*(i+r),1e-6>o?(this.H=0,this.S=0):(this.S=o/(1-Math.abs(2*this.L-1)),this.H=i===e?t>=n?h*((t-n)/o):1-h*((n-t)/o):i===t?h*(2+(n-e)/o):h*(4+(e-t)/o))};var f=new n;n.instance=f,n.parse=c,n.luminance=function(e){return c(e).luminance()},n.newRGB=function(e){var t=new n;return t.R=e,t.G=e,t.B=e,t},n.newRGBA=function(e){var t=new n;return t.R=e,t.G=e,t.B=e,t.A=e,t};var h=1/6,d=1/15,p=1/99,m=1/255,v=1/359,g=/^RGB[\s\(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/,y=/^RGBA[\s\(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)[^0-9\.]+([0-9\.]+)/,b=/^HSL[\s\(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/;t.exports._=u}),require("tfw.binding.list",function(e,t){function n(e,t){if(2>e.length)return!0;for(var n,r=e[0],i=1;i<e.length;i++){if(n=e[i],0<t(r,n))return!1;r=n}return!0}function r(e){return!!e&&"number"==typeof e["__tfw.binding.list__"]}function i(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,configurable:!1,enumerable:!0})}var o=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}(),a=e("tfw.binding.property-manager"),s=e("tfw.listeners"),l="__tfw.binding.list__",c=1,u=function(e){i(this,l,c++),i(this,"_listeners",new s),i(this,"_links",[]),i(this,"isContentChangeAware",!0),Array.isArray(e)?i(this,"_array",e):r(e)?(i(this,"_array",e._array),this.link(e)):i(this,"_array",[e])};t.exports=u,u.isList=r,u.prototype.fire=function(e,t,n){var r=this[l];Array.isArray(n)?-1===n.indexOf(r)&&n.push(r):n=[r],this._listeners.fire(e,t,n),this._links.forEach(function(r){-1<n.indexOf(r[l])||r.fire(e,t,n)});var i=a.getProperties(this);Array.isArray(i)&&i.forEach(function(e){e.manager.fire(e.name)})},u.prototype.addListener=function(e){this._listeners.add(e)},u.prototype.removeListener=function(e){this._listeners.remove(e)},u.prototype.link=function(e){if(!r(e))throw console.error("Argument: ",e),Error("[tfw.binding.list.link] Argument must be a tfw.binding.list object!");-1===this._links.indexOf(e)&&(this._links.push(e),e.link(this))},u.prototype.unlink=function(e){var t=this._links.indexOf(e);-1===t||(this._links.splice(t,1),e.unlink(this))},u.prototype.get=function(e){return this._array[e]},u.prototype.put=function(e,t){var n=this._array[e];return n!==t&&(this._array[e]=t,this.fire("put",{index:e,oldValue:n,newValue:t}),!0)},u.prototype.remove=function(e){var t=this._array.indexOf(e);return-1!==t&&(this._array.splice(t,1),this.fire("remove",{elem:e,index:t}),!0)},u.prototype.removeAt=function(e){var t=this._array[e];return this._array.splice(e,1),this.fire("remove",{elem:t,index:e}),!0},u.prototype.mapInPlace=function(e){var t=this;return this._Array.forEach(function(n,r){var i=e(n);t.put(r,i)}),this};var f=function(e,t){return e==t?0:e<t?-1:1};u.prototype.sort=function(e){return"function"!=typeof e&&(e=f),
n(this._array,e)?this:(this._array.sort(e),this.fire("sort",e),this)},["push","pop","shift","unshift","splice","reverse"].forEach(function(e){u.prototype[e]=function(){var t=Array.prototype.slice.call(arguments),n=Array.prototype[e].apply(this._array,t);return this.fire(e,t),n}}),["slice","forEach","filter","map","reduce","indexOf","lastIndexOf"].forEach(function(e){u.prototype[e]=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return Array.prototype[e].apply(this._array,n)}}),Array.prototype.includes||(Array.prototype.includes=function(e){return-1!==this.indexOf(e)}),u.prototype.includes=function(e){return Array.prototype.includes.call(this._array,e)},Object.defineProperty(u.prototype,"length",{get:function(){return this._array.length},set:function(e){this._array.length=e,this.fire("length",e)},configurable:!1,enumerable:!0}),t.exports._=o}),require("tfw.listeners",function(e,t){var n=function(){function t(){return r(n,arguments)}var n={en:{}},r=e("$").intl;return t.all=n,t}(),r=function(){this._list=[]};r.prototype.add=function(e,t){if("function"!=typeof e)return!1;this.remove(e);for(var n=0;n<this._list.length;n++)if(e===this._list[n])return!1;return this._list.push([e,t]),!0},r.prototype.remove=function(e,t){if("function"!=typeof e)return!1;for(var n,r=0;r<this._list.length;r++)if(n=this._list[r],e===n[0]&&t===n[1])return this._list.splice(r,1),!0;return!1},r.prototype.clear=function(){this._list=[]},r.prototype.fire=function(){var e,t,n,r,i=Array.prototype.slice.call(arguments);for(e=0;e<this._list.length;e++)if(r=this._list[e],t=r[0],n=r[1],!1===t.apply(n,i))return!1;return!0},t.exports=r,t.exports._=n}),require("tfw.binding.property-manager",function(e,t){function n(e){Object.defineProperty(this,"id",{value:v++,writable:!1,configurable:!1,enumerable:!0}),this.name=this.id,this._props={},this._container=e}function r(e){try{if(void 0===e&&u("Argument `container` is mandatory!"),"object"!==_typeof(e))return null;var t=e["__tfw.property-manager__"];return t||(t=new n(e),e["__tfw.property-manager__"]=t),t}catch(e){return console.error(e),null}}function i(e,t){var n=this,r={value:void 0,event:new m,filter:h(t.filter),converter:h(t.converter),delay:f(t.delay),action:null,alwaysFired:!!t.alwaysFired,manager:this,name:e,timeout:0};return r.get=o(r,t),r.set=a(r,t,n),this._props[e]=r,void 0!==t.init&&r.set(t.init),Object.defineProperty(this._container,e,{get:r.get.bind(r),set:n.change.bind(n,e),enumerable:!0,configurable:!1}),r}function o(e,t){return"function"==typeof t.get?function(n){var r=t.get(n);return s(e,r),r}:function(){return e.value}}function a(e,t,n){return"function"==typeof t.cast?"function"==typeof t.set?function(r){l(e,e.get());var i=t.cast(r,n);s(e,e.value),t.set(i)}:function(r){l(e,e.get()),e.value=t.cast(r,n),s(e,e.value)}:"function"==typeof t.set?t.set:function(t){l(e,e.get()),e.value=t,s(e,e.value)}}function s(e,t){if(void 0!==t&&null!==t&&!0===t.isContentChangeAware){var n=t["__tfw.binding.property-manager__"];Array.isArray(n)?-1===n.indexOf(e)&&n.push(e):n=[e],t["__tfw.binding.property-manager__"]=n}}function l(e,t){if(void 0!==t&&null!==t&&!0===t.isContentChangeAware){var n=t["__tfw.binding.property-manager__"];if(Array.isArray(n)){var r=n.indexOf(e);-1===r||n.splice(r,1)}}}function c(e,t){e.delay?(clearTimeout(e.timeout),e.timeout=setTimeout(t,e.delay)):t()}function u(e,t){throw t=void 0===t?"":"::"+t,Error("[tfw.binding.property-manager"+t+"] "+e)}function f(e){return"number"==typeof e?isNaN(e)?0:Math.max(0,Math.floor(e)):0}function h(e){return"function"==typeof e?e:void 0}function d(e,t){return e!==t}var p=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}();t.exports=r,t.exports.isLinkable=function(e,t){return void 0!==e["__tfw.property-manager__"]&&("string"!=typeof t||void 0!==e["__tfw.property-manager__"]._props[t])},t.exports.getAllAttributesNames=function(e){return void 0===e["__tfw.property-manager__"]?[]:Object.keys(e["__tfw.property-manager__"]._props)},t.exports.getProperties=function(e){var t=e["__tfw.binding.property-manager__"];return Array.isArray(t)?t:null},t.exports.readonly=function(e,t){Object.keys(t).forEach(function(n){var r=t[n];"function"==typeof r?Object.defineProperty(e,n,{set:function(){throw Error('Attribute "'.concat(n,'" is read only!'))},get:r,configurable:!1,enumerable:!0}):Object.defineProperty(e,n,{value:r,writable:!1,configurable:!1,enumerable:!0})})};var m=e("tfw.event"),v=0;n.prototype.set=function(e,t){this.create(e).set(t)},n.prototype.isLinkable=function(e){var t=this._container;return!!t&&void 0!==t["__tfw.property-manager__"]&&void 0!==t["__tfw.property-manager__"]._props[e]},n.prototype.get=function(e){return this.create(e).get()},n.prototype.propertyId=function(e){return this.create(e).id},n.prototype.fire=function(e,t){var n=this.create(e);n.event.fire(n.get(),e,this._container,t)},n.prototype.change=function(e,t,n){void 0===n&&(n=[]);var r=this.create(e),i=r.converter;"function"==typeof i&&(t=i(t));var o=r.get();if(r.alwaysFired||d(t,o)){r.set(t);var a=this;c(r,function(){a.fire(e,n)})}},n.prototype.converter=function(e,t){var n=this.create(e);if("function"==typeof t)n.converter=t;else if(void 0!==t)throw Error("[tfw.binding.property-manager::converter] `converter` must be of type function or undefined!");return n.converter},n.prototype.delay=function(e,t){var n=this.create(e);return t=parseFloat(t),isNaN(t)?n.delay:void(n.delay=t)},n.prototype.on=function(e,t){this.create(e).event.add(t)},n.prototype.off=function(e,t){this.create(e).event.remove(t)},n.prototype.create=function(e,t){"string"!=typeof e&&u("propertyName must be a string!");var n=this._props[e];return n||(void 0===t&&(t={}),n=i.call(this,e,t)),n},n.prototype.createAction=function(e,t){return void 0===t&&(t={}),t.alwaysFired=!0,this.create(e,t)},t.exports._=p}),require("tfw.event",function(e,t){var n=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}(),r=function(){this._list=[]};r.prototype.add=function(e){if("function"!=typeof e)return!1;this.remove(e);for(var t=0;t<this._list.length;t++)if(e===this._list)return!1;return this._list.push(e),!0},r.prototype.remove=function(e){if("function"!=typeof e)return!1;for(var t,n=0;n<this._list.length;n++)if(t=this._list,e===t)return this._list.splice(n,1),!0;return!1},r.prototype.clear=function(){this._list=[]},r.prototype.fire=function(){var e,t,n=Array.prototype.slice.call(arguments);for(e=0;e<this._list.length;e++)if(t=this._list[e],!1===t.apply(t,n))return!1;return!0},t.exports=r,t.exports._=n}),require("tfw.binding.link",function(e,t){function n(e,t,n,r){var o=this,a=[];return e[r].forEach(function(r,s){r.open&&(v(r.obj),e[n].forEach(function(n,l){if("string"==typeof n.name&&"string"==typeof r.name&&n.obj===r.obj&&n.name===r.name)return console.error("It is forbidden to bind a property on itself! ("+l+" -> "+s+")"),void console.info("[tfw.binding.link] args=",e);var c=v(n.obj),u=i.bind(o,n,r,t);c.on(n.name,u),a.push({pm:c,name:n.name,slot:u})}))}),a}function r(e,t){this.destroy=function(){e.forEach(function(e){e.pm.off(e.name,e.slot)}),t.forEach(function(e){e.pm.off(e.name,e.slot)})}}function i(e,t,n,r,i,o,a){if(Array.isArray(a)||(a=[]),this.dbg&&console.log("Link "+this.dbg+": ",{src:e,dst:t,id:n,value:r,propertyName:i,container:o,wave:a}),l(n,a))return void(this.dbg&&console.log("...has been BLOCKED by the wave! ",a));var s=this,m=v(e.obj),g=v(t.obj);return r=p(r,e,t),r=u(r,t,m),r=f(r,e,t),c(r,e,t)?void(this.dbg&&console.log("...has been FILTERED!")):(r=h(r,e,t),r=d(r,e,t),void("number"==typeof t.delay?(this.debug&&console.log("...has been DELAYED for "+t.delay+" ms!"),clearTimeout(t._id),t._id=setTimeout(function(){s.dbg&&(console.log("Link "+s.dbg+" (after "+t.delay+" ms): ",{src:e,dst:t,id:n,value:r,propertyName:i,wave:a}),console.log("...try to change a value. ",{target:g,propertyName:t.name,value:r,wave:a})),g.change(t.name,r,a)},t.delay)):(this.debug&&console.log("...try to change a value. ",{target:g,propertyName:t.name,value:r,wave:a}),g.change(t.name,r,a))))}function o(e){try{void 0===e.name&&(e.name=e.debug),"string"!=typeof e.name&&(e.name="Link#"+this.id),void 0===e&&s("Missing mandatory argument!"),void 0===e.A&&s("Missing `args.A`!"),Array.isArray(e.A)||(e.A=[e.A]),void 0===e.B&&s("Missing `args.B`!"),Array.isArray(e.B)||(e.B=[e.B]);var t;for(t=0;t<e.A.length;t++)a(e.A[t],t);for(t=0;t<e.B.length;t++)a(e.B[t],t);this.name=e.name,this.debug=e.debug}catch(t){console.error("checkArgs( "+e+" )"),s(t,"checkArgs( <args> )")}}function a(e,t){try{if(e.action){if("function"!=typeof e.action)throw"Attribute `["+t+"].action` must be a function!";if(void 0!==e.obj)throw"["+t+"].action cannot be defined in the same time of ["+t+"].obj! They are exclusive attributes.";if(void 0!==e.name)throw"["+t+"].action cannot be defined in the same time of ["+t+"].name! They are exclusive attributes.";var n={};v(n).create("<action>",{set:e.action}),e.obj=n,e.name="<action>"}else if(void 0===e.obj&&s("Missing `["+t+"].obj`!"),void 0===e.name&&(e.name="*"),!v.isLinkable(e.obj,e.name))throw"`"+e.name+"` is not a linkable attribute.\nValid linkable attributes are: "+v.getAllAttributesNames(e.obj).join(", ")+".";void 0===e.open&&(e.open=!0)}catch(n){console.error("checkpod(",e,", ",t,")"),s(n,"checkpod( <pod>, "+t+")")}}function s(e,t){throw t=void 0===t?"":"::"+t,e+"\n[tfw.binding.link"+t+"]"}function l(e,t){if(Array.isArray(t)){if(!(0>t.indexOf(e)))return!0;t.push(e)}return!1}function c(e,t,n){if("function"==typeof n.filter)try{if(!n.filter(e))return!0}catch(e){console.error(e),s("Error in filter of link "+v(t.obj)+"."+t.name+" -> "+v(n.obj)+"."+n.name+"!")}return!1}function u(e,t,n){return"string"==typeof t.switch?n.get(t.switch):Array.isArray(t.switch)?t.switch.map(function(e){return n.get(e)}):e}function f(e,t,n){if("function"==typeof n.converter)try{return n.converter(e)}catch(e){console.error(e),s("Error in converter of link "+v(t.obj)+"."+t.name+" -> "+v(n.obj)+"."+n.name+"!")}return e}function h(e,t,n){if(!n.format)return e;try{if(!Array.isArray(n.format))throw"Must be an array with two elements!";var r=n.format[0];if("function"!=typeof r)throw"First element of the array must be a function!";var i=n.format[1];if("string"!=typeof i)throw"Second element of the array must be a string!";return r(i,e)}catch(e){console.error(e),s("Error in format of link "+v(t.obj)+"."+t.name+" -> "+v(n.obj)+"."+n.name+"!\n"+e)}}function d(e,t,n){if(e&&"function"==typeof e.map&&"function"==typeof n.map)try{var r=[],i={context:{},list:e,index:0};if("function"==typeof n.header)try{r.push(n.header(e,i.context))}catch(r){console.error("[tfw.binding.link/processMap] Exception while calling a header function: ",r),console.error({value:e,src:t,dst:n,more:i})}if(e.forEach(function(o,a){i.index=a;try{r.push(n.map(o,i))}catch(s){console.error("[tfw.binding.link/processMap] Exception while calling a map function: ",s),console.error({item:o,index:a,value:e,src:t,dst:n,result:r,more:i})}}),"function"==typeof n.footer)try{r.push(n.header(e,i.context))}catch(o){console.error("[tfw.binding.link/processMap] Exception while calling a footer function: ",o),console.error({value:e,src:t,dst:n,result:r,more:i})}return r.filter(function(e){return null!=e})}catch(e){console.error(e),s("Error in map of link "+v(t.obj)+"."+t.name+" -> "+v(n.obj)+"."+n.name+"!")}return e}function p(e,t,n){if(void 0===n.value)return e;if("function"==typeof n.value)try{return n.value(t.name)}catch(e){console.error(e),s("Error in value("+t.name+") of link "+v(t.obj)+"."+t.name+" -> "+v(n.obj)+"."+n.name+"!")}return n.value}var m=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}(),v=e("tfw.binding.property-manager"),g=0,y=function(e){try{var t=g++;o.call(this,e);var i=n.call(this,e,t,"A","B"),a=n.call(this,e,t,"B","A");r.call(this,i,a)}catch(t){console.error("new Link( "+e+" )"),s(t,"new Link( <args> ) "+(this.name||""))}};t.exports=y,t.exports._=m}),require("tfw.view",function(e,t,n){function r(e,t){e=e.trim().toLowerCase();var n="svg"===e?h.svgRoot():i(e);if(Object.defineProperty(this,"$",{value:n,writable:!1,enumerable:!0,configurable:!1}),Array.isArray(t)){var r=this;t.forEach(function(e){switch(e.toLowerCase()){case"value":o.call(r,n);break;case"focus":a.call(r,n);break;case"textcontent":s.call(r,n);break;case"innerhtml":l.call(r,n);break;default:c.call(r,n,e)}})}}function i(e){return-1===m.indexOf(e.toLowerCase())?h.tag(e):h.svg(e)}function o(e){var t=this,n=null;d(this).create("value",{get:function(){return n},set:function(t){e.value=t,n=t}}),e.addEventListener("input",function(e){d(t).change("value",e.target.value)},!1)}function a(e){var t=this;d(this).create("focus",{cast:p.get("boolean")(),delay:1}),d(this).on("focus",function(t){t?e.focus():e.blur()}),e.addEventListener("focus",function(){t.focus=!0},!1),e.addEventListener("blur",function(){t.focus=!1},!1)}function s(e){["textContent","textcontent"].forEach(function(t){d(this).create(t,{get:function(){return e.textContent},set:function(t){"string"!=typeof t&&(t=""+t),"<html>"===t.substr(0,6)?e.innerHTML=t.substr(6):e.textContent=t}})},this)}function l(e){["innerHTML","innerhtml"].forEach(function(t){d(this).create(t,{get:function(){return e.innerHTML},set:function(t){e.innerHTML=t}})},this)}function c(e,t){d(this).create(t,{get:function(){return e.getAttribute(t)},set:function(n){e.setAttribute(t,n)}})}function u(e,t){h.on(e,t)}var f=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}(),h=e("dom"),d=e("tfw.binding.property-manager"),p=e("tfw.binding.converters");n.Tag=r,n.ensureCodeBehind=function(e){if(void 0===e)throw"Missing mandatory global variable CODE_BEHIND!";var t,n;for(t=1;t<arguments.length;t++)if(n=arguments[t],"function"!=typeof e[n])throw"Expected CODE_BEHIND."+n+" to be a function!"},n.events=u,n.defVal=function(e,t,n){var r,i;for(r in n)i=n[r],e[r]=void 0===t[r]?i:t[r]},n.addClassIfTrue=function(e,t,n){n?h.addClass(e,t):h.removeClass(e,t)},n.addClassIfFalse=function(e,t,n){n?h.removeClass(e,t):h.addClass(e,t)},n.addAttribIfTrue=function(e,t,n){n?h.att(e,t):h.removeAtt(e,t)},n.addAttribIfFalse=function(e,t,n){n?h.removeAtt(e,t):h.att(e,t)},r.prototype.applyClass=function(e,t){var n=this.$;void 0===t&&(t=0),void 0===this._applyer&&(this._applyer={}),Array.isArray(e)||(e=[e]);var r=this._applyer[t];Array.isArray(r)&&r.forEach(h.removeClass.bind(h,n)),this._applyer[t]=e,e.forEach(h.addClass.bind(h,n))};var m=["g","rect","circle","line","path","defs"];t.exports._=f}),require("dom",function(e,t){function n(e){if(e instanceof Node)return e;if(void 0===e||null===e)throw Error("`dom` is not a valid element!",e);if(e.$ instanceof Node)return e.$;if(e.element instanceof Node)return e.element;if("string"==typeof e){var t=document.getElementById(e);return t||console.error("[dom] There is no DOM element with this ID: `"+e+"`"),t}return"function"==typeof e.element?e.element():e}function r(e,t){e=n(e);var r,i;for(r in t)i=t[r],e.style[r]=i;return e}function i(e,t,r){e=n(e);var i,o;for(i in"string"==typeof t&&(void 0===r&&(r=""),i=t,t={},t[i]=r),t)o=t[i],e.setAttribute(i,o);return e}function o(e){e=n(e);try{var t,r;for(t=1;t<arguments.length;t++)r=arguments[t],l(e,r)||s(e,r)||a(e,r)||console.error("Argument #"+t+" of dom.add() is invalid!",arguments);return e}catch(e){console.error("[DOM.add] arguments=",[].slice.call(arguments)),console.error("[DOM.add] exception=",e)}}function a(e,t){return!!((t=n(t))instanceof Node)&&(e.appendChild(t),!0)}function s(e,t){if("number"==typeof t&&(t=""+t),"string"!=typeof t)return!1;if("<html>"==t.substr(0,6).toLowerCase()){var r=t.substr(6);t=n.tag("span"),t.innerHTML=r}else if(C.test(t)){var i=t;t=n.tag("span"),t.innerHTML=i}else t=document.createTextNode(t);return e.appendChild(t),!0}function l(e,t){return!!Array.isArray(t)&&(t.forEach(function(t){o(e,t)}),!0)}function c(e){if(Array.isArray(e))return e.forEach(function(e){c(e)}),e;if(void 0===e[A])return e;var t=e[A].events;return void 0===t?e:(t.off(),void delete e[A].events)}function u(e,t,r){if("function"==typeof t||null===t)t={tap:t};else if("string"==typeof t&&"function"==typeof r){var i={};i[t]=r,t=i}if(Array.isArray(e))return e.forEach(function(e){u(e,t)}),e;e=n(e),void 0===e[A]&&(e[A]={}),void 0===e[A].events&&(e[A].events=w(e));var o,a,s;for(o in t)a=t[o],"!"==o.charAt(0)?(o=o.substr(1),s=!0):s=!1,-1<_.indexOf(o.toLowerCase())?e.addEventListener(o,a,s):e[A].events.on(o,a,s);return e}function f(e,t){try{var r,i,a,s,l=document.createElementNS(e,t.trim().toLowerCase());for(r=2;r<arguments.length;r++)if(i=arguments[r],Array.isArray(i))i.forEach(function(e){switch(_typeof(e)){case"string":case"number":case"boolean":if(e=""+e,"<html>"==e.substr(0,6)){var t=e.substr(6);e=n.tag("span"),e.innerHTML=t}else e=document.createTextNode(e)}o(l,e)});else switch(_typeof(i)){case"string":i.split(" ").forEach(function(e){0<e.length&&h(l,e)});break;case"object":for(a in i)s=i[a],l.setAttribute(a,s);break;default:throw Error("[dom.tag] Error creating <"+t+">: Invalid argument #"+r+"!")}return l}catch(n){console.error("[dom.tagNS] Error with `ns` = ",e," and `name` = ",t),console.error(n)}}function h(e){var t=[].slice.call(arguments,1);return Array.isArray(e)?(t.unshift(null),e.forEach(function(e){t[0]=e,h.apply(void 0,t)}),e):(e=n(e),t.forEach(function(t){if("string"==typeof t&&(t=t.trim(),0!=t.length))try{e.classList&&e.classList.add(t)}catch(e){console.error("[dom.addClass] Invalid class name: ",t),console.error(e)}}),e)}function d(e,t){return e=n(e),!!e.classList&&e.classList.contains(t)}function p(e){var t=[].slice.call(arguments,1);return Array.isArray(e)?(t.unshift(null),e.forEach(function(e){t[0]=e,p.apply(void 0,t)}),e):(e=n(e),t.forEach(function(t){if("string"==typeof t)try{e.classList&&e.classList.remove(t)}catch(e){console.error("[dom.removeClass] Invalid class name: ",t),console.error(e)}}),e)}function m(e){return[].slice.call(arguments,1).forEach(function(t){d(e,t)?p(e,t):h(e,t)}),e}function v(e){return Array.isArray(e)?void e.forEach(function(e){e=n(e),void 0===e[A]&&(e[A]={}),Array.isArray(e[A].style)||(e[A].style=[]),e[A].style.push(JSON.stringify(e.style))}):v(Array.prototype.slice.call(arguments))}function g(e){return Array.isArray(e)?void e.forEach(function(e){if(e=n(e),void 0===e[A]||!Array.isArray(e[A].style))throw Error("[dom.restoreStyle] `saveStyle()` has never been used on this element!");if(0==e[A].style.length)throw Error("[dom.restoreStyle] more `restore` than `save`!");var t,r,i=JSON.parse(e[A].style.pop());for(t in i)void 0!==(r=i[t])&&(e.style[t]=r)}):g(Array.prototype.slice.call(arguments))}var y=function(){function t(){return r(n,arguments)}var n={en:{}},r=e("$").intl;return t.all=n,t}();e("polyfill.classList");var b=e("dom.theme"),w=e("tfw.gestures"),A="@dom"+Date.now(),C=/^&(#[0-9]+|[a-zA-Z0-9]+);$/;t.exports=n,n.tagNS=f,n.svgRoot=f.bind(void 0,"http://www.w3.org/2000/svg","svg",{version:"1.1","xmlns:svg":"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),n.svg=f.bind(void 0,"http://www.w3.org/2000/svg"),n.tag=f.bind(void 0,"http://www.w3.org/1999/xhtml"),n.div=f.bind(void 0,"http://www.w3.org/1999/xhtml","div"),n.txt=window.document.createTextNode.bind(window.document),n.textOrHtml=function(e,t){return void 0===t&&(t=""),null===t&&(t=""),"string"!=typeof t&&(t=JSON.stringify(t)),"<html>"==t.substr(0,6)?e.innerHTML=t.substr(6):e.textContent=t,e},n.get=function(e,t){return e=n(e),void 0===t&&(t=e,e=window.document),e.querySelector(t)},n.elem=function(e){var t=[].slice.call(arguments);t.shift(),0==t.length&&(t=["div"]),t.push("dom","custom");var r;return void 0===t[0].element?"function"==typeof t[0].appendChild?(r=t[0],h(r,"dom","custom")):r=n.tag.apply(n,t):(r=t[0].element,h(r,"dom","custom")),Object.defineProperty(e,"element",{value:r,writable:!1,configurable:!1,enumerable:!0}),r},n.css=r,n.att=i,n.removeAtt=function(e,t){return e=n(e),e.removeAttribute(t),e},n.addClass=h,n.hasClass=d,n.removeClass=p,n.toggleClass=m,n.saveStyle=v,n.restoreStyle=g,n.registerTheme=b.register.bind(n),n.applyTheme=b.apply.bind(n),n.registerAndApplyTheme=function(e,t){b.register.call(this,e,t),b.apply.call(this,e)},n.replace=function(e,t){return e=n(e),t=n(t),t.parentNode.replaceChild(e,t),e},n.detach=function(e){e=n(e);var t=e.parentElement;return t?(t.removeChild(e),t):t},n.on=u,n.off=c,n.add=o,n.wrap=function(e,t,n){return Object.defineProperty(e,"element",{value:t,writable:!1,configurable:!1,enumerable:!0}),n?e:(e.on=u.bind(e,t),e.css=r.bind(e,t),e.add=o.bind(e,t),e.att=i.bind(e,t),e.addClass=h.bind(e,t),e.hasClass=d.bind(e,t),e.removeClass=p.bind(e,t),e.toggleClass=m.bind(e,t),e)},n.clear=function(e){e=n(e);for(var t=e;t.firstChild;)t.removeChild(t.firstChild);var r=[].slice.call(arguments);return 1<r.length&&o.apply(this,r),e};var _=["keyup","keydown","scroll","load","error"];t.exports._=y}),require("tfw.gestures",function(e,t){function n(e,t){for(var n=this._events[e].chain,r=0;r<n.length;r++)if(!0===(0,n[r])(t))return}function r(e,t){var r=u(e,"hammer.");r&&!this._hammer&&(this._hammer=new v(this.$,{domEvents:!0}),this._hammer.domEvents=!0);var i=this._events[e];if(!i){var o=n.bind(this,e);i={chain:[],handler:o},r?this._hammer.on(r,o):this.$.addEventListener(e,o),this._events[e]=i}i.chain.push(t)}function i(e,t){if("string"!=typeof e)throw Error("[Gestures.on] `name` must be a string: "+JSON(e)+"!");if(-1===m.indexOf(e))throw Error("Unknown gesture's name `"+e+"`!\nAvailable names are: "+m.join(", ")+".");if("function"!=typeof t)throw Error("Gesture `"+e+"` must have a function as slot!")}function o(e){if(e instanceof Node)return e;if(void 0===e||null===e)throw Error("Not a valid DOM element!",e);if(e.$ instanceof Node)return e.$;if(e.element instanceof Node)return e.element;if("string"==typeof e){var t=document.getElementById(e);return t||console.error("There is no DOM element with this ID: `"+e+"`"),t}return"function"==typeof e.element?e.element():e}function a(e,t){var n,r;n=t.center.x,r=t.center.y;var i=e.getBoundingClientRect();t.x=n-i.left,t.y=r-i.top}function s(e,t){var n,r;n=t.clientX,r=t.clientY;var i=e.getBoundingClientRect();return{x:n-i.left,y:r-i.top}}function l(e,t){t.vx=t.x-this._dragX,t.vy=t.y-this._dragY,t.x0=t.x-t.deltaX,t.y0=t.y-t.deltaY,this._dragX=t.x,this._dragY=t.y}function c(e){if(!e||!e.srcEvent)return 0;var t=e.srcEvent.buttons;return"number"==typeof t?t:0}function u(e,t){return e.substr(0,t.length)==t?e.substr(t.length):null}var f=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}();t.exports=function(e){var t=o(e);return t[d]||(t[d]=new g(t)),t[d]};var h={tap:function(e,t){var n=this;e("hammer.tap",function(e){return!(1!==e.tapCount||(a(n.$,e),t({x:e.x,y:e.y,target:e.target,preventDefault:e.preventDefault.bind(e)}),0))})},doubletap:function(e,t){var n=this;e("hammer.tap",function(e){return!(2!==e.tapCount||(a(n.$,e),t({x:e.x,y:e.y,target:e.target,preventDefault:e.preventDefault.bind(e)}),0))})},drag:function(e,t,n){var r=this;e("hammer.pan",function(e){if(e.isFinal)return!1;a(r.$,e),void 0===r._dragX&&(r._dragX=e.x,r._dragY=e.y,r._dragStart=!0),l.call(r,r.$,e);var i=e.srcEvent;return t({x:e.x,y:e.y,x0:e.x0,y0:e.y0,vx:e.vx,vy:e.vy,sx:e.velocityX,sy:e.velocityY,event:e,target:e.target,buttons:c(e),preventDefault:i.preventDefault.bind(i),stopPropagation:i.stopImmediatePropagation.bind(i)},n),!0})},dragstart:function(e,t){var n=this;e("hammer.panstart",function(e){console.log("START"),a.call(n,n.$,e);var r=e.srcEvent;return t({x:e.x,y:e.y,target:e.target,preventDefault:r.preventDefault.bind(r),stopPropagation:r.stopImmediatePropagation.bind(r)}),!0})},dragend:function(e,t){var n=this;e("hammer.panend",function(e){a(n.$,e),l.call(n,n.$,e);var r=e.srcEvent;return t({x:e.x,y:e.y,x0:e.x0,y0:e.y0,target:e.target,preventDefault:r.preventDefault.bind(r),stopPropagation:r.stopImmediatePropagation.bind(r)}),delete n._dragX,delete n._dragY,!0})},move:function(e,t){var n=this;e("mousemove",function(e){var r=s(n.$,e);r.preventDefault=e.preventDefault.bind(e),r.stopPropagation=e.stopPropagation.bind(e),r.event=e,t(r)})},down:function(e,t){var n=this;e("touchstart",function(e){if(!e.changedTouches||1>e.changedTouches.length)return!1;var r=e.changedTouches[0],i=n.$.getBoundingClientRect();try{t({x:r.clientX-i.left,y:r.clientY-i.top,preventDefault:e.preventDefault.bind(e),stopPropagation:e.stopPropagation.bind(e)})}catch(e){console.error(e)}return!0}),e("mousedown",function(e){if(350>Date.now()-n._touchstart)return e.preventDefault(),e.stopPropagation(),!1;var r=n.$.getBoundingClientRect();try{t({x:e.clientX-r.left,y:e.clientY-r.top,preventDefault:e.preventDefault.bind(e),stopPropagation:e.stopPropagation.bind(e)})}catch(e){console.error(e)}return n._touchstart=0,!0})},up:function(e,t){var n=this;e("touchend",function(e){if(!e.changedTouches||1>e.changedTouches.length)return!1;var r=e.changedTouches[0],i=n.$.getBoundingClientRect();try{t({x:r.clientX-i.left,y:r.clientY-i.top,preventDefault:e.preventDefault.bind(e),stopPropagation:e.stopPropagation.bind(e)})}catch(e){console.error(e)}return n._touchstart=Date.now(),!0}),e("mouseup",function(e){if(0<n._touchstart)return e.preventDefault(),e.stopPropagation(),!1;var r=n.$.getBoundingClientRect();try{t({x:e.clientX-r.left,y:e.clientY-r.top,preventDefault:e.preventDefault.bind(e),stopPropagation:e.stopPropagation.bind(e)})}catch(e){console.error(e)}return n._touchstart=0,!0})},wheel:function(e,t){var n=this;e(p,function(e){var r=s(n.$,e);r.delta=e.deltaY,"number"!=typeof r.delta&&(r.delta=-e.wheelDelta),r.preventDefault=e.preventDefault.bind(e),r.stopPropagation=e.stopPropagation.bind(e),t(r)})}},d=Symbol("__tfw.gestures__"),p=function(){return"onwheel"in document.createElement("div")?"wheel":void 0===document.onmousewheel?"DOMMouseScroll":"mousewheel"}(),m=Object.keys(h),v=e("external.hammer"),g=function(){function e(t){_classCallCheck(this,e),Object.defineProperty(this,"$",{writable:!1,value:t,configurable:!1}),this._events={},this._touchstart=0}return _createClass(e,[{key:"on",value:function(e,t,n){var o="function"==typeof e,a=o?"tap":e,s=o?e:t,l=o?t:n;try{return i(a,s),h[a].call(this,r.bind(this),s,l),this}catch(e){throw console.error("[Gesture.on( name, slot, args )]"),console.error("   name",a),console.error("   slot",s),console.error("   args",l),console.error("   ERROR",e),Error(e)}}}]),e}();t.exports._=f}),require("external.hammer",function(e,t){var n=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}();(function(e,n,r){function i(e,t,n){return setTimeout(c(e,n),t)}function o(e,t,n){return!!Array.isArray(e)&&(a(e,n[t],n),!0)}function a(e,t,n){if(e)if(e.forEach)e.forEach(t,n);else if(void 0!==e.length)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(var r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function s(t,n,r){return function(){var i=new Error("get-stack-trace"),o=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=e.console&&(e.console.warn||e.console.log);return a&&a.call(e.console,"DEPRECATED METHOD: "+n+"\n"+r+" AT \n",o),t.apply(this,arguments)}}function l(e,t,n){var r=t.prototype,i=e.prototype=Object.create(r);i.constructor=e,i._super=r,n&&ue(i,n)}function c(e,t){return function(){return e.apply(t,arguments)}}function u(e,t){return"function"==_typeof(e)?e.apply(t?t[0]||void 0:void 0,t):e}function f(e,t){return void 0===e?t:e}function h(e,t,n){a(v(t),function(t){e.addEventListener(t,n,!1)})}function d(e,t,n){a(v(t),function(t){e.removeEventListener(t,n,!1)})}function p(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function m(e,t){return-1<e.indexOf(t)}function v(e){return e.trim().split(/\s+/g)}function g(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function y(e){return Array.prototype.slice.call(e,0)}function b(e,t,n){for(var r,i=[],o=[],a=0;a<e.length;)r=t?e[a][t]:e[a],0>g(o,r)&&i.push(e[a]),o[a]=r,a++;return n&&(i=t?i.sort(function(e,n){return e[t]>n[t]}):i.sort()),i}function w(e,t){for(var n=t[0].toUpperCase()+t.slice(1),r=0;r<fe.length;){var i=fe[r],o=i?i+n:t;if(o in e)return o;r++}}function A(){return ye++}function C(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}function _(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){u(e.options.enable,[e])&&n.handler(t)},this.init()}function x(e){var t=e.options.inputClass;return new(t||(Ae?I:Ce?N:we?$:j))(e,E)}function E(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,o=1&t&&0==r-i;n.isFirst=!!o,n.isFinal=!!(12&t&&0==r-i),o&&(e.session={}),n.eventType=t,L(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function L(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=H(t)),1<i&&!n.firstMultiple?n.firstMultiple=H(t):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,l=t.center=M(r);t.timeStamp=me(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=S(s,l),t.distance=k(s,l),V(n,t),t.offsetDirection=P(t.deltaX,t.deltaY);var c=R(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=c.x,t.overallVelocityY=c.y,t.overallVelocity=pe(c.x)>pe(c.y)?c.x:c.y,t.scale=a?O(a.pointers,r):1,t.rotation=a?D(a.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,T(n,t);var u=e.element;p(t.srcEvent.target,u)&&(u=t.srcEvent.target),t.target=u}function V(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},o=e.prevInput||{};(1===t.eventType||4===o.eventType)&&(i=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}function T(e,t){var n,r,i,o,a=e.lastInterval||t,s=t.timeStamp-a.timeStamp;if(8!==t.eventType&&(s>25||void 0===a.velocity)){var l=t.deltaX-a.deltaX,c=t.deltaY-a.deltaY,u=R(s,l,c);r=u.x,i=u.y,n=pe(u.x)>pe(u.y)?u.x:u.y,o=P(l,c),e.lastInterval=t}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;t.velocity=n,t.velocityX=r,t.velocityY=i,t.direction=o}function H(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:de(e.pointers[n].clientX),clientY:de(e.pointers[n].clientY)},n++;return{timeStamp:me(),pointers:t,center:M(t),deltaX:e.deltaX,deltaY:e.deltaY}}function M(e){var t=e.length;if(1===t)return{x:de(e[0].clientX),y:de(e[0].clientY)};for(var n=0,r=0,i=0;i<t;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:de(n/t),y:de(r/t)}}function R(e,t,n){return{x:t/e||0,y:n/e||0}}function P(e,t){return e===t?1:pe(e)>=pe(t)?0>e?2:4:0>t?8:16}function k(e,t,n){n||(n=_e);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function S(e,t,n){n||(n=_e);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,r)/Math.PI}function D(e,t){return S(t[1],t[0],xe)+S(e[1],e[0],xe)}function O(e,t){return k(t[0],t[1],xe)/k(e[0],e[1],xe)}function j(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,_.apply(this,arguments)}function I(){this.evEl=Te,this.evWin=He,_.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function B(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,_.apply(this,arguments)}function F(e,t){var n=y(e.touches),r=y(e.changedTouches);return 12&t&&(n=b(n.concat(r),"identifier",!0)),[n,r]}function N(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},_.apply(this,arguments)}function U(e,t){var n=y(e.touches),r=this.targetIds;if(3&t&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=y(e.changedTouches),s=[],l=this.target;if(o=n.filter(function(e){return p(e.target,l)}),
1===t)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),12&t&&delete r[a[i].identifier],i++;return s.length?[b(o.concat(s),"identifier",!0),s]:void 0}function $(){_.apply(this,arguments);var e=c(this.handler,this);this.touch=new N(this.manager,e),this.mouse=new j(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function q(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,z.call(this,t)):12&e&&z.call(this,t)}function z(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches,i=function(){var e=r.indexOf(n);-1<e&&r.splice(e,1)};setTimeout(i,2500)}}function G(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(t-i.x),a=Math.abs(n-i.y);if(o<=25&&a<=25)return!0}return!1}function X(e,t){this.manager=e,this.set(t)}function Z(e){if(m(e,"none"))return"none";var t=m(e,"pan-x"),n=m(e,"pan-y");return t&&n?"none":t||n?t?"pan-x":"pan-y":m(e,"manipulation")?"manipulation":"auto"}function Y(e){this.options=ue({},this.defaults,e||{}),this.id=A(),this.manager=null,this.options.enable=f(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function W(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function J(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function K(e,t){var n=t.manager;return n?n.get(e):e}function Q(){Y.apply(this,arguments)}function ee(){Q.apply(this,arguments),this.pX=null,this.pY=null}function te(){Q.apply(this,arguments)}function ne(){Y.apply(this,arguments),this._timer=null,this._input=null}function re(){Q.apply(this,arguments)}function ie(){Q.apply(this,arguments)}function oe(){Y.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ae(e,t){return t=t||{},t.recognizers=f(t.recognizers,ae.defaults.preset),new se(e,t)}function se(e,t){this.options=ue({},ae.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=x(this),this.touchAction=new X(this,this.options.touchAction),le(this,!0),a(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function le(e,t){var n=e.element;if(n.style){var r;a(e.options.cssProps,function(i,o){r=w(n.style,o),t?(e.oldCssProps[r]=n.style[r],n.style[r]=i):n.style[r]=e.oldCssProps[r]||""}),t||(e.oldCssProps={})}}function ce(e,t){var r=n.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=t,t.target.dispatchEvent(r)}var ue,fe=["","webkit","Moz","MS","ms","o"],he=n.createElement("div"),de=Math.round,pe=Math.abs,me=Date.now;ue="function"==typeof Object.assign?Object.assign:function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t,n=Object(e),r=1;r<arguments.length;r++)if(void 0!==(t=arguments[r])&&null!==t)for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n};var ve=s(function(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;)(!n||n&&void 0===e[r[i]])&&(e[r[i]]=t[r[i]]),i++;return e},"extend","Use `assign`."),ge=s(function(e,t){return ve(e,t,!0)},"merge","Use `assign`."),ye=1,be=/mobile|tablet|ip(ad|hone|od)|android/i,we="ontouchstart"in e,Ae=void 0!==w(e,"PointerEvent"),Ce=we&&be.test(navigator.userAgent),_e=["x","y"],xe=["clientX","clientY"];_.prototype={handler:function(){},init:function(){this.evEl&&h(this.element,this.evEl,this.domHandler),this.evTarget&&h(this.target,this.evTarget,this.domHandler),this.evWin&&h(C(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(C(this.element),this.evWin,this.domHandler)}};var Ee={mousedown:1,mousemove:2,mouseup:4};l(j,_,{handler:function(e){var t=Ee[e.type];1&t&&2!==e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var Le={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Ve={2:"touch",3:"pen",4:"mouse",5:"kinect"},Te="pointerdown",He="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Te="MSPointerDown",He="MSPointerMove MSPointerUp MSPointerCancel"),l(I,_,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=Le[r],o=Ve[e.pointerType]||e.pointerType,a=g(t,e.pointerId,"pointerId");1&i&&(2!==e.button||"touch"==o)?0>a&&(t.push(e),a=t.length-1):12&i&&(n=!0),0>a||(t[a]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(a,1))}});var Me={touchstart:1,touchmove:2,touchend:4,touchcancel:8};l(B,_,{handler:function(e){var t=Me[e.type];if(1===t&&(this.started=!0),!!this.started){var n=F.call(this,e,t);12&t&&0==n[0].length-n[1].length&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}}});var Re={touchstart:1,touchmove:2,touchend:4,touchcancel:8};l(N,_,{handler:function(e){var t=Re[e.type],n=U.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}}),l($,_,{handler:function(e,t,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)q.call(this,t,n);else if(i&&G.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Pe=w(he.style,"touchAction"),ke=void 0!==Pe,Se=function(){if(!ke)return!1;var t={},n=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){t[r]=!n||e.CSS.supports("touch-action",r)}),t}();X.prototype={set:function(e){"compute"==e&&(e=this.compute()),ke&&this.manager.element.style&&Se[e]&&(this.manager.element.style[Pe]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return a(this.manager.recognizers,function(t){u(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),Z(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var r=this.actions,i=m(r,"none")&&!Se.none,o=m(r,"pan-y")&&!Se["pan-y"],a=m(r,"pan-x")&&!Se["pan-x"];if(i){var s=1===e.pointers.length,l=2>e.distance,c=250>e.deltaTime;if(s&&l&&c)return}return a&&o?void 0:i||o&&6&n||a&&24&n?this.preventSrc(t):void 0},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};Y.prototype={defaults:{},set:function(e){return ue(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(o(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=K(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return o(e,"dropRecognizeWith",this)?this:(e=K(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(o(e,"requireFailure",this))return this;var t=this.requireFail;return e=K(e,this),-1===g(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(o(e,"dropRequireFailure",this))return this;e=K(e,this);var t=g(this.requireFail,e);return-1<t&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(t,e)}var n=this,r=this.state;r<8&&t(n.options.event+W(r)),t(n.options.event),e.additionalEvent&&t(e.additionalEvent),r>=8&&t(n.options.event+W(r))},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=32)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){var t=ue({},e);return u(this.options.enable,[this,t])?(56&this.state&&(this.state=1),this.state=this.process(t),void(30&this.state&&this.tryEmit(t))):(this.reset(),void(this.state=32))},process:function(){},getTouchAction:function(){},reset:function(){}},l(Q,Y,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=6&t,i=this.attrTest(e);return r&&(8&n||!i)?16|t:r||i?4&n?8|t:2&t?4|t:2:32}}),l(ee,Q,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push("pan-y"),24&e&&t.push("pan-x"),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,o=e.deltaX,a=e.deltaY;return i&t.direction||(6&t.direction?(i=0===o?1:0>o?2:4,n=o!=this.pX,r=Math.abs(e.deltaX)):(i=0===a?1:0>a?8:16,n=a!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return Q.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=J(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),l(te,Q,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=1>e.scale?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),l(ne,Y,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,o=e.deltaTime>t.time;if(this._input=e,!r||!n||12&e.eventType&&!o)this.reset();else if(1&e.eventType)this.reset(),this._timer=i(function(){this.state=8,this.tryEmit()},t.time,this);else if(4&e.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8!==this.state||(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=me(),this.manager.emit(this.options.event,this._input)))}}),l(re,Q,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),l(ie,Q,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return ee.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return 30&n?t=e.overallVelocity:6&n?t=e.overallVelocityX:24&n&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&pe(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=J(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),l(oe,Y,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,o=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(r&&o&&n){if(4!=e.eventType)return this.failTimeout();var a=!this.pTime||e.timeStamp-this.pTime<t.interval,s=!this.pCenter||k(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,s&&a?this.count+=1:this.count=1,this._input=e;if(0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=i(function(){this.state=8,this.tryEmit()},t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=i(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ae.VERSION="2.0.8",ae.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[re,{enable:!1}],[te,{enable:!1},["rotate"]],[ie,{direction:6}],[ee,{direction:6},["swipe"]],[oe],[oe,{event:"doubletap",taps:2},["tap"]],[ne]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};se.prototype={set:function(e){return ue(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,r=this.recognizers,i=t.curRecognizer;(!i||i&&8&i.state)&&(i=t.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===t.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&14&n.state&&(i=t.curRecognizer=n),o++}},get:function(e){if(e instanceof Y)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(o(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(o(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=g(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(void 0!==e&&void 0!==t){var n=this.handlers;return a(v(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(void 0!==e){var n=this.handlers;return a(v(e),function(e){t?n[e]&&n[e].splice(g(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&ce(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&le(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ue(ae,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:se,Input:_,TouchAction:X,TouchInput:N,MouseInput:j,PointerEventInput:I,TouchMouseInput:$,SingleTouchInput:B,Recognizer:Y,AttrRecognizer:Q,Tap:oe,Pan:ee,Swipe:ie,Pinch:te,Rotate:re,Press:ne,on:h,off:d,each:a,merge:ge,extend:ve,assign:ue,inherit:l,bindFn:c,prefixed:w}),(void 0===e?"undefined"==typeof self?{}:self:e).Hammer=ae,"function"==typeof define&&define.amd?define(function(){return ae}):void 0!==t&&t.exports?t.exports=ae:e.Hammer=ae})(window,document),t.exports=Hammer,t.exports._=n}),require("dom.theme",function(e,t,n){function r(e,t){for(var n="",r=1;10>=r;r++)d.forEach(function(i){for(var o=".thm-bg"+i,a=".thm-fg"+i,s=1;s<=r;s++){for(var l=[],c=[],u=[],f=1;f<=r;f++)u.push(s==f?o:"*"),c.push(s==f?o:"*"),l.push(s==f?a:"*"),f==r&&(u.push(u.pop()+".thm-fg"),l.push(l.pop()+a));n+="body.dom-theme-"+e+" "+u.join(" > ")+" { color: "+t["fg"+i]+" }\n",n+="body.dom-theme-"+e+" "+l.join(" > ")+" { color: "+t["bg"+i]+" }\n",n+="body.dom-theme-"+e+" "+c.join(" > ")+" .thm-svg-fill0 { fill: "+t["fg"+i]+" }\n",n+="body.dom-theme-"+e+" "+c.join(" > ")+" .thm-svg-stroke0 { stroke: "+t["fg"+i]+" }\n"}});return n}function i(e,t){var n="body.dom-theme-"+e+"{\n";return d.forEach(function(e){n+="  --thm-bg"+e+": "+t["bg"+e]+";\n"}),n+="}\n"}function o(e,t){var n="";return d.forEach(function(r){n+="body.dom-theme-"+e+".thm-bg"+r+" { background-color: "+t["bg"+r]+" }\n",n+="body.dom-theme-"+e+" .thm-fg"+r+" { color: "+t["fg"+r]+" }\n",n+="body.dom-theme-"+e+" .thm-bg"+r+" { background-color: "+t["bg"+r]+" }\n",n+="body.dom-theme-"+e+" .thm-bg"+r+"-bottom { background: linear-gradient(to top,"+t["bg"+r]+",transparent) }\n",n+="body.dom-theme-"+e+" .thm-bg"+r+"-top { background: linear-gradient(to bottom,"+t["bg"+r]+",transparent) }\n",n+="body.dom-theme-"+e+" .thm-bg"+r+"-left { background: linear-gradient(to right,"+t["bg"+r]+",transparent) }\n",n+="body.dom-theme-"+e+" .thm-bg"+r+"-right { background: linear-gradient(to left,"+t["bg"+r]+",transparent) }\n",isNaN(parseInt(r))&&(n+="body.dom-theme-"+e+" .thm-svg-fill"+r+" { fill: "+t["bg"+r]+" }\n",n+="body.dom-theme-"+e+" .thm-svg-stroke"+r+" { stroke: "+t["bg"+r]+" }\n")}),n}function a(e,t){var n=h.luminance(t.bg2),r=.6>n?u(t.white,Math.ceil(10*n)):u(t.black,"6"),i="";return[0,1,2,3,4,6,8,9,12,16,24].forEach(function(t){i+="body.dom-theme-"+e+" .thm-ele"+t+" {\n  box-shadow: 0 "+t+"px "+2*t+"px "+r+"\n}\n"}),i}function s(e){return void 0===e&&(e={}),"string"!=typeof e.bg0&&(e.bg0="#E0E0E0"),"string"!=typeof e.bg1&&(e.bg1="#F5F5F5"),"string"!=typeof e.bg2&&(e.bg2="#FAFAFA"),"string"!=typeof e.bg3&&(e.bg3="#FFF"),"string"!=typeof e.bgP&&(e.bgP="#3E50B4"),"string"!=typeof e.bgPD&&(e.bgPD=l(e.bgP)),"string"!=typeof e.bgPL&&(e.bgPL=c(e.bgP)),"string"!=typeof e.bgS&&(e.bgS="#FF3F80"),"string"!=typeof e.bgSD&&(e.bgSD=l(e.bgS)),"string"!=typeof e.bgSL&&(e.bgSL=c(e.bgS)),void 0===e.white&&(e.white="#fff"),void 0===e.black&&(e.black="#000"),d.forEach(function(t){var n=e["bg"+t],r=h.luminance(n);e["fg"+t]=.6>r?e.white:e.black}),e}function l(e){var t=new h(e);return t.rgb2hsl(),t.L*=.75,t.hsl2rgb(),t.stringify()}function c(e){var t=new h(e);return t.rgb2hsl(),t.L=.4+.6*t.L,t.hsl2rgb(),t.stringify()}function u(e,t){return 5>e.length?e+t:e+t+t}var f=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}();n.register=function(e,t){t=s(t);var n=i(e,t);n+=o(e,t),n+=a(e,t),n+=r(e,t);var l=p.css[e];return l||(l=document.createElement("style"),document.getElementsByTagName("head")[0].appendChild(l),p.css[e]=l),l.textContent=n,this},n.apply=function(e,t){if(void 0===t&&(t=document.body),!p.css[e])return void console.error("This theme has not been registered: ",e);var n=document.body;"string"==typeof p.current&&this.removeClass(n,"dom-theme-"+p.current),p.current=e,this.addClass(n,"dom-theme-"+p.current)};var h=e("tfw.color"),d=["0","1","2","3","P","PD","PL","S","SD","SL"],p={css:{},current:null};t.exports._=f}),require("polyfill.classList",function(e,t){var n=function(){function t(){return r(n,arguments)}var n={en:{}},r=e("$").intl;return t.all=n,t}();"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?function(){var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var n,r=arguments.length;for(n=0;n<r;n++)e=arguments[n],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:n.call(this,e)}}e=null}():function(e){if("Element"in e){var t=e.Element.prototype,n=Object,r=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},i=Array.prototype.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},o=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},a=function(e,t){if(""===t)throw new o("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new o("INVALID_CHARACTER_ERR","String contains an invalid character");return i.call(e,t)},s=function(e){for(var t=r.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],i=0,o=n.length;i<o;i++)this.push(n[i]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},l=s.prototype=[],c=function(){return new s(this)};if(o.prototype=Error.prototype,l.item=function(e){return this[e]||null},l.contains=function(e){return e+="",-1!==a(this,e)},l.add=function(){var e,t=arguments,n=0,r=t.length,i=!1;do{e=t[n]+"",-1===a(this,e)&&(this.push(e),i=!0)}while(++n<r);i&&this._updateClassName()},l.remove=function(){var e,t,n=arguments,r=0,i=n.length,o=!1;do{for(e=n[r]+"",t=a(this,e);-1!==t;)this.splice(t,1),o=!0,t=a(this,e)}while(++r<i);o&&this._updateClassName()},l.toggle=function(e,t){e+="";var n=this.contains(e),r=n?!0!==t&&"remove":!1!==t&&"add";return r&&this[r](e),!0===t||!1===t?t:!n},l.toString=function(){return this.join(" ")},n.defineProperty){var u={get:c,enumerable:!0,configurable:!0};try{n.defineProperty(t,"classList",u)}catch(e){-2146823252===e.number&&(u.enumerable=!1,n.defineProperty(t,"classList",u))}}else n.prototype.__defineGetter__&&t.__defineGetter__("classList",c)}}(self)),t.exports._=n}),require("tfw.icons",function(e,t){function n(e){return["path",{d:e,stroke:"none",fill:0}]}var r=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}();t.exports.draw=n,t.exports.register=function(e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r],o=e[i];t.exports.iconsBook[i]=o}},t.exports.iconsBook={android:n("M15,-35H10V-40H15M-10,-35H-15V-40H-10M18,-49L24,-56C25,-57,25,-58,24,-59C23,-60,22,-60,21,-59L13,-52C9,-54,5,-55,0,-55C-5,-55,-9,-54,-13,-52L-21,-59C-22,-60,-23,-60,-24,-59C-25,-58,-25,-57,-24,-56L-18,-49C-25,-44,-30,-35,-30,-25H30C30,-35,25,-44,18,-49M43,-20A8,8,0,0,0,35,-12V23A8,8,0,0,0,43,30A8,8,0,0,0,50,23V-12A8,8,0,0,0,43,-20M-42,-20A8,8,0,0,0,-50,-12V23A8,8,0,0,0,-42,30A8,8,0,0,0,-35,23V-12A8,8,0,0,0,-42,-20M-30,30A5,5,0,0,0,-25,35H-20V53A8,8,0,0,0,-12,60A8,8,0,0,0,-5,53V35H5V53A8,8,0,0,0,13,60A8,8,0,0,0,20,53V35H25A5,5,0,0,0,30,30V-20H-30V30Z"),bug:n("M10,0H-10V-10H10M10,20H-10V10H10M40,-20H26C24,-24 21,-27 17,-30L25,-38L18,-45L7,-34C5,-35 3,-35 0,-35C-2,-35 -5,-35 -7,-34L-18,-45L-25,-38L-17,-30C-21,-27 -24,-24 -26,-20H-40V-10H-30C-30,-8 -30,-7 -30,-5V0H-40V10H-30V15C-30,17 -30,18 -30,20H-40V30H-26C-21,39 -11,45 0,45C11,45 21,39 26,30H40V20H30C30,18 30,17 30,15V10H40V0H30V-5C30,-7 30,-8 30,-10H40V-20Z"),camera:n("M-40,-40H-25L-15,-50H15L25,-40H40A10,10,0,0,1,50,-30V30A10,10,0,0,1,40,40H-40A10,10,0,0,1,-50,30V-30A10,10,0,0,1,-40,-40M0,-25A25,25,0,0,0,-25,0A25,25,0,0,0,0,25A25,25,0,0,0,25,0A25,25,0,0,0,0,-25M0,-15A15,15,0,0,1,15,0A15,15,0,0,1,0,15A15,15,0,0,1,-15,0A15,15,0,0,1,0,-15Z"),cancel:n("M7,0L35,28V35H28L0,7L-28,35H-35V28L-7,0L-35,-28V-35H-28L0,-7L28,-35H35V-28L7,0Z"),center:n("M0,-15A15,15,0,0,0,-15,0A15,15,0,0,0,0,15A15,15,0,0,0,15,0A15,15,0,0,0,0,-15M35,35H15V45H35A10,10,0,0,0,45,35V15H35M35,-45H15V-35H35V-15H45V-35A10,10,0,0,0,35,-45M-35,-35H-15V-45H-35A10,10,0,0,0,-45,-35V-15H-35M-35,15H-45V35A10,10,0,0,0,-35,45H-15V35H-35V15Z"),child:n("M5,-50V-10H45A40,40,0,0,0,5,-50M37,19C42,13,45,4,45,-5H-28L-32,-15H-50V-5H-39C-39,-5,-29,15,-28,17C-34,20,-37,26,-37,33A18,18,0,0,0,-20,50C-11,50,-4,44,-3,35H8C9,44,16,50,25,50A18,18,0,0,0,43,33C43,27,40,23,37,19M-20,40A8,8,0,0,1,-27,33A8,8,0,0,1,-20,25A8,8,0,0,1,-12,33A8,8,0,0,1,-20,40M25,40A8,8,0,0,1,18,33A8,8,0,0,1,25,25A8,8,0,0,1,33,33A8,8,0,0,1,25,40Z"),close:n("M0,-50C28,-50,50,-28,50,0C50,28,28,50,0,50C-28,50,-50,28,-50,0C-50,-28,-28,-50,0,-50M18,-25L0,-7L-18,-25L-25,-18L-7,0L-25,18L-18,25L0,7L18,25L25,18L7,0L25,-18L18,-25Z"),code:n("M13,23L36,0L13,-23L20,-30L50,0L20,30L13,23M-13,23L-36,0L-13,-23L-20,-30L-50,0L-20,30L-13,23Z"),copy:n("M35,45H-20V-25H35M35,-35H-20A10,10,0,0,0,-30,-25V45A10,10,0,0,0,-20,55H35A10,10,0,0,0,45,45V-25A10,10,0,0,0,35,-35M20,-55H-40A10,10,0,0,0,-50,-45V25H-40V-45H20V-55Z"),counter:n("M-40,-40H40A10,10,0,0,1,50,-30V30A10,10,0,0,1,40,40H-40A10,10,0,0,1,-50,30V-30A10,10,0,0,1,-40,-40M-40,-30V30H-5V-30H-40M40,30V-30H34C35,-27,35,-25,35,-24C34,-21,32,-17,31,-16L20,-3L36,-4L36,3L10,2L10,-3C10,-3,25,-19,26,-20C27,-22,30,-30,23,-30C16,-30,17,-23,17,-23L9,-23C9,-23,9,-27,11,-30H5V30H18L18,26L23,26C23,26,27,25,27,20C28,15,23,15,23,15C22,15,17,16,17,20H10C10,20,10,9,23,9C36,9,35,20,35,20C35,20,35,26,29,28L32,30H40M-15,20H-23V-9L-32,-6V-12L-16,-18H-15V20Z"),delete:n("M35,-40H18L13,-45H-12L-17,-40H-35V-30H35M-30,35A10,10,0,0,0,-20,45H20A10,10,0,0,0,30,35V-25H-30V35Z"),direction:n("M10,13V0H-10V15H-20V-5A5,5,0,0,1,-15,-10H10V-22L28,-5M49,-4L4,-49H3C2,-50,-2,-50,-4,-49L-49,-4C-50,-2,-50,2,-49,4L-4,49C-2,50,2,51,4,49L49,4C51,2,51,-2,49,-4Z"),down:n("M-30,-30L0,30,30,-30"),"down-double":n("M-30,-40L0,-10,30,-40M-30,10L0,40,30,10"),edit:n("M24,-46C22,-46,20,-46,19,-44L8,-34L35,-7L45,-17C48,-21,48,-25,45,-28L29,-44C28,-46,26,-46,24,-46M5,-30L-36,11L-23,12L-22,23L-11,24L-9,37L31,-3M-39,15L-47,49L-14,40L-15,29L-27,28L-28,16"),eraser:n("M21,-42L46,-17C50,-14,50,-7,46,-3L0,43C-8,50,-20,50,-28,43L-46,25C-50,21,-50,15,-46,11L7,-42C11,-46,17,-46,21,-42M-39,18L-21,36C-17,39,-11,39,-7,36L11,18L-14,-7L-39,18Z"),export:n("M-35,40H35V30H-35M35,-15H15V-45H-15V-15H-35L0,20L35,-15Z"),"flag-jp":["g",{stroke:"none"},[["path",{fill:"#000",d:"M-65,50h130v-100h-130z"}],["path",{fill:"#fff",d:"M-60,45h120v-90h-120z"}],["circle",{fill:"#bc002d",r:24}]]],"flag-fr":["g",{stroke:"none"},[["path",{fill:"#000",d:"M-65,50h130v-100h-130z"}],["path",{fill:"#002395",d:"M-60,45h40v-90h-40z"}],["path",{fill:"#fff",d:"M-20,45h40v-90h-40z"}],["path",{fill:"#ed2939",d:"M20,45h40v-90h-40z"}]]],"flag-it":["g",{stroke:"none"},[["path",{fill:"#000",d:"M-65,50h130v-100h-130z"}],["path",{fill:"#009246",d:"M-60,45h40v-90h-40z"}],["path",{fill:"#fff",d:"M-20,45h40v-90h-40z"}],["path",{fill:"#ce2b37",d:"M20,45h40v-90h-40z"}]]],"flag-de":["g",{stroke:"none"},[["path",{fill:"#000",d:"M-65,41h130v-82h-130z"}],["path",{fill:"#ffce00",d:"M-60,36h120v-24h-120z"}],["path",{fill:"#dd0000",d:"M-60,12h120v-24h-120z"}]]],"flag-en":["g",{stroke:"none"},[["path",{fill:"#000",d:"M-65,37h130v-75h-130z"}],["path",{fill:"#bb133e",d:"M-60,32h120v-65h-120z"}],["path",{fill:"#fff",d:"M-60,22h120v5h-120z"}],["path",{fill:"#fff",d:"M-60,12h120v5h-120z"}],["path",{fill:"#fff",d:"M-60,2h120v5h-120z"}],["path",{fill:"#fff",d:"M-60,-8h120v5h-120z"}],["path",{fill:"#fff",d:"M-60,-18h120v5h-120z"}],["path",{fill:"#fff",d:"M-60,-28h120v5h-120z"}],["path",{fill:"#002664",d:"M-60,-33h48v35h-48z"}]]],font:n("M25,-20H40V40H45V45H25V40H30V25H10L3,40H10V45H-10V40H-5L25,-20M30,-15L13,20H30V-15M-35,-45H-10C-4,-45,0,-41,0,-35V20H-15V-5H-30V20H-45V-35C-45,-41,-41,-45,-35,-45M-30,-35V-15H-15V-35H-30Z"),"format-align-center":n("M-45,-45H45V-35H-45V-45M-25,-25H25V-15H-25V-25M-45,-5H45V5H-45V-5M-25,15H25V25H-25V15M-45,35H45V45H-45V35Z"),"format-align-justify":n("M-45,-45H45V-35H-45V-45M-45,-25H45V-15H-45V-25M-45,-5H45V5H-45V-5M-45,15H45V25H-45V15M-45,35H45V45H-45V35Z"),"format-align-left":n("M-45,-45H45V-35H-45V-45M-45,-25H15V-15H-45V-25M-45,-5H45V5H-45V-5M-45,15H15V25H-45V15M-45,35H45V45H-45V35Z"),"format-align-right":n(" M-45,-45H45V-35H-45V-45M-15,-25H45V-15H-15V-25M-45,-5H45V5H-45V-5M-15,15H45V25H-15V15M-45,35H45V45H-45V35Z "),"format-bold":n("M8,18H-10V3H8A8,8,0,0,1,15,10A8,8,0,0,1,8,18M-10,-27H5A8,8,0,0,1,13,-20A8,8,0,0,1,5,-12H-10M18,-6C23,-9,26,-15,26,-20C26,-31,18,-40,6,-40H-25V30H10C21,30,29,22,29,11C29,3,24,-3,18,-6Z"),"format-italic":n("M-10,-40V-25H1L-16,15H-30V30H10V15H-1L16,-25H30V-40H-10Z"),"format-float-center":n("M-15,-25H15V5H-15V-25M-45,-45H45V-35H-45V-45M-45,15H45V25H-45V15M-45,35H25V45H-45V35Z"),"format-float-left":n("M-45,-25H-15V5H-45V-25M-45,-45H45V-35H-45V-45M45,-25V-15H-5V-25H45M45,-5V5H-5V-5H45M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z"),"format-float-none":n("M-45,-25H-15V5H-45V-25M-45,-45H45V-35H-45V-45M45,-5V5H-5V-5H45M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z"),"format-float-right":n("M15,-25H45V5H15V-25M-45,-45H45V-35H-45V-45M5,-25V-15H-45V-25H5M-15,-5V5H-45V-5H-15M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z"),"format-header":n("M-40,-40H-30V-10H-10V-40H0V30H-10V0H-30V30H-40V-40M13,-23L31,-5L13,13L20,20L45,-5L20,-30L13,-23Z"),"format-underline":n("M-35,45H35V35H-35V45M0,25A30,30,0,0,0,30,-5V-45H18V-5A18,18,0,0,1,0,13A18,18,0,0,1,-17,-5V-45H-30V-5A30,30,0,0,0,0,25Z"),fullscreen:n("M-35,-35H-10V-25H-25V-10H-35V-35M10,-35H35V-10H25V-25H10V-35M25,10H35V35H10V25H25V10M-10,25V35H-35V10H-25V25H-10Z"),gear:n("M0,18A18,18,0,0,1,-17,0A18,18,0,0,1,0,-17A18,18,0,0,1,18,0A18,18,0,0,1,0,18M37,5C37,3,38,2,38,0C38,-2,37,-3,37,-5L48,-13C49,-14,49,-15,48,-16L38,-34C38,-35,36,-35,35,-35L23,-30C20,-32,18,-33,14,-35L13,-48C12,-49,11,-50,10,-50H-10C-11,-50,-12,-49,-12,-48L-14,-35C-17,-33,-20,-32,-23,-30L-35,-35C-36,-35,-38,-35,-38,-34L-48,-16C-49,-15,-49,-14,-48,-13L-37,-5C-37,-3,-37,-2,-37,0C-37,2,-37,3,-37,5L-48,13C-49,14,-49,15,-48,16L-38,34C-38,35,-36,35,-35,35L-23,30C-20,32,-17,33,-14,35L-12,48C-12,49,-11,50,-10,50H10C11,50,12,49,13,48L14,35C18,33,20,32,23,30L35,35C36,35,38,35,38,34L48,16C49,15,49,14,48,13L37,5Z"),gps:n("M0,-20A20,20,0,0,1,20,0A20,20,0,0,1,0,20A20,20,0,0,1,-20,0A20,20,0,0,1,0,-20M-45,5H-55V-5H-45C-42,-26,-26,-42,-5,-45V-55H5V-45C26,-42,43,-26,45,-5H55V5H45C43,26,26,43,5,45V55H-5V45C-26,43,-42,26,-45,5M0,-35A35,35,0,0,0,-35,0A35,35,0,0,0,0,35A35,35,0,0,0,35,0A35,35,0,0,0,0,-35Z"),hand:n("M-10,-50A10,10,0,0,1,0,-40V-17C0,-17,10,-19,10,-14C10,-14,20,-15,20,-10C20,-10,30,-11,30,-6C30,-6,40,-7,40,-2V15C40,20,25,45,25,50H-15C-15,50,-25,15,-40,5C-40,5,-45,-25,-20,0V-40A10,10,0,0,1,-10,-50Z"),heart:n("M0,47L-7,40C-33,17,-50,1,-50,-17C-50,-33,-38,-45,-22,-45C-14,-45,-5,-41,0,-35C5,-41,14,-45,23,-45C38,-45,50,-33,50,-17C50,1,33,17,7,40L0,47Z"),hide:n("M-1,-15L15,1C15,1,15,0,15,0A15,15,0,0,0,0,-15C0,-15,-1,-15,-1,-15M-22,-11L-15,-3C-15,-2,-15,-1,-15,0A15,15,0,0,0,0,15C1,15,2,15,3,15L11,22C8,24,4,25,0,25A25,25,0,0,1,-25,0C-25,-4,-24,-8,-22,-11M-50,-39L-39,-27L-36,-25C-45,-18,-51,-10,-55,0C-46,22,-25,38,0,38C8,38,15,36,22,33L24,35L39,50L45,44L-44,-45M0,-25A25,25,0,0,1,25,0C25,3,24,6,23,9L38,24C45,18,51,9,55,0C46,-22,25,-37,0,-37C-7,-37,-14,-36,-20,-34L-9,-23C-6,-24,-3,-25,0,-25Z"),home:n("M-10,40V10H10V40H35V0H50L0,-45L-50,0H-35V40H-10Z"),image:n("M5,-15H33L5,-42V-15M-30,-50H10L40,-20V40A10,10,0,0,1,30,50H-30C-36,50,-40,46,-40,40V-40C-40,-46,-36,-50,-30,-50M-30,40H15L30,40V0L10,20L0,10L-30,40M-20,-15A10,10,0,0,0,-30,-5A10,10,0,0,0,-20,5A10,10,0,0,0,-10,-5A10,10,0,0,0,-20,-15Z"),import:n("M-15,20V-10H-35L0,-45L35,-10H15V20H-15M-35,40V30H35V40H-35Z"),improvement:n("M0,50A50,50,0,0,1,-50,0A50,50,0,0,1,0,-50A50,50,0,0,1,50,0A50,50,0,0,1,0,50M0,-25L-25,0H-10V20H10V0H25L0,-25Z"),info:n("M8,-40A8,8,0,0,0,0,-32A8,8,0,0,0,8,-25A8,8,0,0,0,15,-32A8,8,0,0,0,8,-40M6,-16C0,-16,-17,-3,-17,-3C-17,-2,-17,-2,-16,-1C-16,1,-16,1,-15,0C-14,0,-12,-2,-9,-3C1,-10,-8,6,-12,32C-14,45,-2,39,1,37C4,35,12,29,13,28C14,28,13,27,12,26C12,25,11,26,11,26C8,28,2,32,1,29C0,27,6,7,9,-6C10,-10,12,-17,6,-16Z"),left:["path",{fill:0,d:"M40,-5V5H-20L8,33L0,40L-39,0L0,-40L8,-32L-20,-5H40Z"}],"left-double":n("M-10,-30L-40,0,-10,30M40,-30L10,0,40,30"),link:n("M-7,7C-5,9,-5,12,-7,14C-9,16,-12,16,-14,14C-24,4,-24,-11,-14,-21V-21L4,-39C13,-49,29,-49,39,-39C49,-29,49,-13,39,-4L31,4C32,0,31,-4,29,-8L32,-11C38,-16,38,-26,32,-32C26,-38,16,-38,11,-32L-7,-14C-13,-8,-13,1,-7,7M7,-14C9,-16,12,-16,14,-14C24,-4,24,11,14,21V21L-4,39C-13,49,-29,49,-39,39C-49,29,-49,13,-39,4L-31,-4C-31,0,-31,4,-29,8L-32,11C-38,16,-38,26,-32,32C-26,38,-16,38,-11,32L7,14C13,8,13,-1,7,-7C5,-9,5,-12,7,-14Z"),location:n("M0,-2A13,13,0,0,1,-12,-15A13,13,0,0,1,0,-27A13,13,0,0,1,13,-15A13,13,0,0,1,0,-2M0,-50A35,35,0,0,0,-35,-15C-35,11,0,50,0,50C0,50,35,11,35,-15A35,35,0,0,0,0,-50Z"),logout:n("M25,26V10H-10V-10H25V-26L51,0L25,26M5,-50A10,10,0,0,1,15,-40V-20H5V-40H-40V40H5V20H15V40A10,10,0,0,1,5,50H-40A10,10,0,0,1,-50,40V-40A10,10,0,0,1,-40,-50H5Z"),mail:n("M40,-40H-40A10,10,0,0,0,-50,-30V30A10,10,0,0,0,-40,40H40A10,10,0,0,0,50,30V-30A10,10,0,0,0,40,-40M40,30H-40V-20L0,5L40,-20V30M40,-30L0,-5L-40,-30V-30H40V-30Z"),
map:n("M15,35L-15,24V-35L15,-24M43,-45C42,-45,42,-45,42,-45L15,-34L-15,-45L-43,-35C-44,-35,-45,-34,-45,-33V43A3,3,0,0,0,-42,45C-42,45,-42,45,-42,45L-15,34L15,45L43,36C44,35,45,34,45,33V-42A3,3,0,0,0,43,-45Z"),"map-layer":n("M0,20L37,-9L45,-15L0,-50L-45,-15L-37,-9M0,33L-37,4L-45,10L0,45L45,10L37,4L0,33Z"),menu:n("M-45,-30H45V-20H-45V-30M-45,-5H45V5H-45V-5M-45,20H45V30H-45V20Z"),minus:n("M35,5H-35V-5H35V5Z"),"minus-o":n("M0,40C-22,40,-40,22,-40,0C-40,-22,-22,-40,0,-40C22,-40,40,-22,40,0C40,22,22,40,0,40M0,-50A50,50,0,0,0,-50,0A50,50,0,0,0,0,50A50,50,0,0,0,50,0A50,50,0,0,0,0,-50M-25,5H25V-5H-25"),"minus-small":n("M35,35V-35H-35V35H35M35,-45A10,10,0,0,1,45,-35V35A10,10,0,0,1,35,45H-35A10,10,0,0,1,-45,35V-35C-45,-41,-40,-45,-35,-45H35M25,-5V5H-25V-5H25Z"),ok:n("M45,-25L-15,35L-42,8L-35,0L-15,21L38,-32L45,-25Z"),pack:["path",{fill:0,d:"M45,23C45,24,44,26,42,27L3,49C2,50,1,50,0,50C-1,50,-2,50,-3,49L-42,27C-44,26,-45,24,-45,23V-22C-45,-24,-44,-26,-42,-27L-3,-49C-2,-50,-1,-50,0,-50C1,-50,2,-50,3,-49L42,-27C44,-26,45,-24,45,-22V23M0,-39L-35,-20V20L0,39L35,20V-20L0,-39M0,-29L24,-15L0,-1L-24,-15L0,-29M25,14L5,26V8L25,-3V14M-5,26L-25,14V-3L-5,8V26Z"}],plug:n("M20,-25V-45H10V-25H-10V-45H-20V-25H-20C-25,-25,-30,-20,-30,-15V13L-12,30V45H13V30L30,13V-15C30,-20,25,-25,20,-25Z"),plus:n("M35,5H5V35H-5V5H-35V-5H-5V-35H5V-5H35V5Z"),"plus-o":n("M0,40C-22,40,-40,22,-40,0C-40,-22,-22,-40,0,-40C22,-40,40,-22,40,0C40,22,22,40,0,40M0,-50A50,50,0,0,0,-50,0A50,50,0,0,0,0,50A50,50,0,0,0,50,0A50,50,0,0,0,0,-50M5,-25H-5V-5H-25V5H-5V25H5V5H25V-5H5V-25Z"),"plus-small":n("M35,35V-35H-35V35H35M35,-45A10,10,0,0,1,45,-35V35A10,10,0,0,1,35,45H-35A10,10,0,0,1,-45,35V-35C-45,-41,-40,-45,-35,-45H35M-5,-25H5V-5H25V5H5V25H-5V5H-25V-5H-5V-25Z"),print:["path",{fill:0,d:"M30,-45H-30V-25H30M35,0A5,5,0,0,1,30,-5A5,5,0,0,1,35,-10A5,5,0,0,1,40,-5A5,5,0,0,1,35,0M20,35H-20V10H20M35,-20H-35A15,15,0,0,0,-50,-5V25H-30V45H30V25H50V-5A15,15,0,0,0,35,-20Z"}],question:n("M-10,35H5V50H-10V35M0,-50C27,-49,38,-22,23,-2C18,3,12,7,8,11C5,15,5,20,5,25H-10C-10,17,-10,10,-7,5C-3,0,3,-3,8,-7C20,-18,17,-34,0,-35A15,15,0,0,0,-15,-20H-30A30,30,0,0,1,0,-50Z"),redo:n("M32,-7C23,-15,11,-20,-2,-20C-26,-20,-45,-5,-52,16L-40,20C-35,4,-20,-7,-2,-7C7,-7,16,-4,23,2L5,20H50V-25L32,-7Z"),refresh:n("M28,-28C21,-35,11,-40,0,-40A40,40,0,0,0,-40,0A40,40,0,0,0,0,40C19,40,34,27,39,10H28C24,22,13,30,0,30A30,30,0,0,1,-30,0A30,30,0,0,1,0,-30C8,-30,16,-27,21,-21L5,-5H40V-40L28,-28Z"),right:["path",{fill:0,d:"M-40,-5V5H20L-7,33L0,40L39,0L0,-40L-7,-32L20,-5H-40Z"}],"right-double":n("M10,-30L40,0,10,30M-40,-30L-10,0,-40,30"),run:n("M23,-32A10,10,0,0,0,33,-42A10,10,0,0,0,23,-52A10,10,0,0,0,13,-42A10,10,0,0,0,23,-32M5,37L10,15L20,25V55H30V18L20,8L23,-7C29,0,39,5,50,5V-5C41,-5,33,-9,28,-17L23,-25C22,-28,18,-30,15,-30C13,-30,13,-29,11,-29L-15,-18V5H-5V-12L4,-15L-4,25L-28,20L-30,30L5,37M-40,-15A5,5,0,0,1,-45,-20A5,5,0,0,1,-40,-25H-25V-15H-40M-35,-35A5,5,0,0,1,-40,-40A5,5,0,0,1,-35,-45H-10V-35H-35M-45,5A5,5,0,0,1,-50,0A5,5,0,0,1,-45,-5H-25V5H-45Z"),search:n("M-12,-45A33,33,0,0,1,20,-12C20,-4,17,3,12,9L14,10H18L43,35L35,43L10,18V14L9,12C3,17,-4,20,-12,20A33,33,0,0,1,-45,-12A33,33,0,0,1,-12,-45M-12,-35C-25,-35,-35,-25,-35,-12C-35,0,-25,10,-12,10C0,10,10,0,10,-12C10,-25,0,-35,-12,-35Z"),select:n("M35,35H-35V-35H15V-45H-35C-41,-45,-45,-41,-45,-35V35A10,10,0,0,0,-35,45H35A10,10,0,0,0,45,35V-5H35M-20,-10L-27,-2L-5,20L45,-30L38,-37L-5,6L-20,-10Z"),sitemap:n("M-15,-50V-20H-5V-5H-35C-41,-5,-45,-1,-45,5V20H-55V50H-25V20H-35V5H-5V20H-15V50H15V20H5V5H35V20H25V50H55V20H45V5C45,-1,41,-5,35,-5H5V-20H15V-50H-15Z"),unselect:n("M35,-45H-35C-41,-45,-45,-41,-45,-35V35A10,10,0,0,0,-35,45H35A10,10,0,0,0,45,35V-35C45,-41,41,-45,35,-45M35,-35V35H-35V-35H35Z"),share:n("M30,20C26,20,23,22,20,24L-15,3C-15,2,-15,1,-15,0C-15,-1,-15,-2,-15,-3L20,-24C23,-22,26,-20,30,-20A15,15,0,0,0,45,-35A15,15,0,0,0,30,-50A15,15,0,0,0,15,-35C15,-34,15,-33,15,-31L-20,-11C-22,-13,-26,-15,-30,-15A15,15,0,0,0,-45,0A15,15,0,0,0,-30,15C-26,15,-22,13,-20,11L16,32C16,33,15,34,15,35C15,43,22,50,30,50C38,50,45,43,45,35A15,15,0,0,0,30,20Z"),show:n("M0,-15A15,15,0,0,0,-15,0A15,15,0,0,0,0,15A15,15,0,0,0,15,0A15,15,0,0,0,0,-15M0,25A25,25,0,0,1,-25,0A25,25,0,0,1,0,-25A25,25,0,0,1,25,0A25,25,0,0,1,0,25M0,-37C-25,-37,-46,-22,-55,0C-46,22,-25,38,0,38C25,38,46,22,55,0C46,-22,25,-37,0,-37Z"),speaker:n("M40,35L33,28C41,21,45,11,45,0C45,-11,41,-21,33,-28L40,-35C49,-26,55,-14,55,0C55,14,49,26,40,35M26,21L19,14C23,11,25,6,25,0C25,-6,23,-11,19,-14L26,-21C32,-16,35,-8,35,0C35,8,32,16,26,21M-40,-45H0A10,10,0,0,1,10,-35V35A10,10,0,0,1,0,45H-40A10,10,0,0,1,-50,35V-35A10,10,0,0,1,-40,-45M-20,-35A10,10,0,0,0,-30,-25A10,10,0,0,0,-20,-15A10,10,0,0,0,-10,-25A10,10,0,0,0,-20,-35M-20,-5A20,20,0,0,0,-40,15A20,20,0,0,0,-20,35A20,20,0,0,0,0,15A20,20,0,0,0,-20,-5M-20,5A10,10,0,0,1,-10,15A10,10,0,0,1,-20,25A10,10,0,0,1,-30,15A10,10,0,0,1,-20,5Z"),"split-vertical":n("M30,20V5H15V50H5V-50H15V-5H30V-20L50,0L30,20M-50,0L-30,20V5H-15V50H-5V-50H-15V-5H-30V-20L-50,0Z"),"split-horizontal":n("M-20,30H-5V15H-50V5H50V15H5V30H20L0,50L-20,30M0,-50L-20,-30H-5V-15H-50V-5H50V-15H5V-30H20L0,-50Z"),star:n("M0,26L31,45L23,10L50,-14L14,-17L0,-50L-14,-17L-50,-14L-23,10L-31,45L0,26Z"),stat:n("M-45,50V-20H-25V50H-45M-10,50V-50H10V50H-10M25,50V10H45V50H25Z"),switch:n("M-45,-40V3L-30,-12L-15,5C-10,10,-10,15,-10,15V45H10V10C10,10,10,5,7,0C5,-5,0,-10,0,-10L-15,-27L-2,-40M30,-40L8,-18L10,-15C10,-15,15,-10,17,-5C18,-3,19,-1,19,1L45,-25"),"tri-down":n("M-23,-17L0,6L23,-17L30,-10L0,20L-30,-10L-23,-17Z"),"tri-left":n("M17,23L-6,0L17,-23L10,-30L-20,0L10,30L17,23Z"),"tri-right":n("M-17,23L6,0L-17,-23L-10,-30L20,0L-10,30L-17,23Z"),"tri-up":n("M-23,17L0,-6L23,17L30,10L0,-20L-30,10L-23,17Z"),twitter:n("M52,-30C48,-28,44,-27,40,-27C44,-29,48,-33,49,-38C45,-36,41,-34,36,-33C32,-37,26,-40,20,-40C8,-40,-1,-30,-1,-19C-1,-17,-1,-15,-1,-14C-19,-15,-34,-23,-45,-36C-47,-33,-48,-29,-48,-25C-48,-18,-44,-11,-38,-7C-42,-7,-45,-8,-48,-10C-48,-10,-48,-10,-48,-10C-48,1,-41,9,-31,11C-33,12,-35,12,-37,12C-38,12,-39,12,-41,12C-38,20,-30,26,-21,26C-28,32,-37,36,-47,36C-49,36,-51,36,-52,35C-43,41,-31,45,-19,45C20,45,42,12,42,-16C42,-17,42,-18,42,-19C46,-22,49,-26,52,-30Z"),undo:n("M3,-20C-11,-20,-23,-15,-32,-7L-50,-25V20H-5L-23,2C-16,-4,-7,-7,3,-7C20,-7,35,4,41,20L52,16C45,-5,26,-20,3,-20Z"),up:n("M-30,30L0,-30,30,30"),"up-double":n("M-30,40L0,10,30,40M-30,-10L0,-40,30,-10"),user:n("M0,-40A20,20,0,0,1,20,-20A20,20,0,0,1,0,0A20,20,0,0,1,-20,-20A20,20,0,0,1,0,-40M0,10C22,10,40,19,40,30V40H-40V30C-40,19,-22,10,0,10Z"),wait:n("M0,-5A5,5,0,0,0,-5,0A5,5,0,0,0,0,5A5,5,0,0,0,5,0A5,5,0,0,0,0,-5M3,-50C25,-50,26,-32,14,-26C9,-24,7,-19,6,-14C8,-13,10,-11,12,-9C30,-19,50,-15,50,3C50,25,32,26,26,14C24,9,19,7,14,6C13,8,11,10,9,12C19,30,15,50,-2,50C-25,50,-25,32,-14,26C-9,24,-7,19,-6,14C-8,13,-10,11,-12,9C-30,19,-50,15,-50,-2C-50,-25,-32,-26,-26,-14C-24,-9,-19,-7,-14,-6C-13,-8,-11,-10,-9,-12C-19,-30,-15,-50,3,-50Z"),"zoom-in":n("M18,10L43,35L35,43L10,18V14L9,12C3,17,-4,20,-12,20A33,33,0,0,1,-45,-12A33,33,0,0,1,-12,-45A33,33,0,0,1,20,-12C20,-4,17,3,12,9L14,10H18M-12,10C0,10,10,0,10,-12C10,-25,0,-35,-12,-35C-25,-35,-35,-25,-35,-12C-35,0,-25,10,-12,10M0,-10H-10V0H-15V-10H-25V-15H-15V-25H-10V-15H0V-10Z"),"zoom-out":n("M18,10H14L12,9C17,3,20,-4,20,-12A33,33,0,0,0,-12,-45A33,33,0,0,0,-45,-12A33,33,0,0,0,-12,20C-4,20,3,17,9,12L10,14V18L35,43L43,35L18,10M-12,10C-25,10,-35,0,-35,-12C-35,-25,-25,-35,-12,-35C0,-35,10,-25,10,-12C10,0,0,10,-12,10M-25,-15H0V-10H-25V-15Z"),warning:n("M0,-50L-55,45H55M0,-30L38,35H-38M-5,-10V10H5V-10M-5,20V30H5V20")};var i,o,a={add:"plus",back:"left",help:"question",save:"export"};for(i in a)o=a[i],t.exports.iconsBook[i]=t.exports.iconsBook[o];t.exports._=r}),require("polyfill.object.values",function(e,t){var n=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}();Object.values||(window.Object.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t}),t.exports._=n}),require("tfw.data-binding",function(e,t,n){function r(e,t,r,i){var o="function"==typeof i;void 0===t["_tfw.data-binding_"]&&(t["_tfw.data-binding_"]={}),t["_tfw.data-binding_"][r]={value:i,event:new c};var a="function"==typeof e?function(n){n=e(n),(o||t["_tfw.data-binding_"][r].value!==n)&&(t["_tfw.data-binding_"][r].value=n,t["_tfw.data-binding_"][r].event.fire(n,t,r))}:function(e){(o||t["_tfw.data-binding_"][r].value!==e)&&(t["_tfw.data-binding_"][r].value=e,t["_tfw.data-binding_"][r].event.fire(e,t,r))},s=i;return o||(s=function(){return t["_tfw.data-binding_"][r].value}),Object.defineProperty(t,r,{get:s,set:a,configurable:!1,enumerable:!0}),n.bind.bind(n,t,r)}function i(e){return e.toLowerCase()}function o(e){return e.trim()}var a=function(){function t(){return r(n,arguments)}var n={en:{}},r=e("$").intl;return t.all=n,t}();e("polyfill.string");var s=e("dom"),l=e("tfw.css").parseUnit,c=e("tfw.listeners"),u="_tfw.data-binding_",f={castFunction:function(e){return"function"==typeof e?e:null},castArray:function(e){return Array.isArray(e)?e:null===e||void 0===e?[]:[e]},castBoolean:function(e){return"boolean"==typeof e?e:"string"==typeof e?"0"!==(e=e.trim().toLowerCase())&&"false"!==e&&"no"!==e&&"null"!==e&&"undefined"!==e:"number"==typeof e?0!==e:null},castColor:function(e){return""+e},castDate:function(e){return"number"==typeof e||"string"==typeof e?new Date(e):e instanceof Date?e:new Date},castEnum:function(e){var t=e.map(i);return function(n){if("number"==typeof n)return e[Math.floor(n)%e.length];if("string"!=typeof n)return e[0];var r=t.indexOf(n.trim().toLowerCase());return 0>r&&(r=0),e[r]}},castInteger:function(e){return"number"==typeof e?Math.floor(e):"boolean"==typeof e?e?1:0:"string"==typeof e?parseInt(e):Number.NaN},castFloat:function(e){return"number"==typeof e?e:"boolean"==typeof e?e?1:0:"string"==typeof e?parseFloat(e):Number.NaN},castRegexp:function(e){if(e instanceof RegExp)return e;if("string"==typeof e&&0!=e.trim().length)try{return new RegExp(e)}catch(t){console.error("[castRegexp] /"+e+"/ ",t)}return null},castString:function(e){return"string"==typeof e?e:void 0===e||null===e?"":JSON.stringify(e)},castStringArray:function(e){return Array.isArray(e)?e:null===e||void 0===e?[]:"string"==typeof e?e.split(",").map(o):[JSON.stringify(e)]},castUnit:function(e){return e?void 0===e.v?"number"==typeof e?{v:e,u:"px"}:"string"==typeof e?l(""+e):{v:0,u:"px"}:(e.v=parseFloat(e.v),isNaN(e.v)?{v:0,u:"px"}:(e.u="string"==typeof e.u?e.u.trim().toLowerCase():"px",""===e.u&&(e.u="px"),{v:e.v,u:e.u})):{v:0,u:"px"}},castValidator:function(e){if("function"==typeof e)return e;if("boolean"==typeof e)return function(){return e};if("string"==typeof e&&0!=e.trim().length)try{var t=new RegExp(e);return t.test.bind(t)}catch(t){console.error("[castValidator] /"+e+"/ ",t)}return function(){return null}}};n.fire=function(e,t,n){var r=e[t];void 0===n&&(n=r),e[u][t].value=n,e[u][t].event.fire(e[t],e,t)},n.set=function(e,t,n){void 0===e[u]&&(e[u]={}),void 0===e[u][t]&&(e[u][t]={}),e[u][t].value=n},n.get=function(e,t){return void 0===e[u]||void 0===e[u][t]?void 0:e[u][t].value},n.readOnly=function(e,t,n){"function"==typeof n?Object.defineProperty(e,t,{get:n,set:function(){},configurable:!1,enumerable:!0}):Object.defineProperty(e,t,{value:n,writtable:!1,configurable:!1,enumerable:!0})},n.prop=r.bind(null,null),n.propWidget=function(e,t,r,i){return void 0===i&&(i=t),void 0===e[u]&&(e[u]={}),e[u][t]={event:new c},n.bind(r,i,function(n){e[u][t].event.fire(n,e,t)}),Object.defineProperty(e,t,{get:function(){return r[i]},set:function(e){r[i]=e},configurable:!1,enumerable:!0}),n.bind.bind(n,e,t)},n.propToggleClass=function(e,t,n,i){"string"!=typeof i&&(i="");var o={};return"string"==typeof n?o[n]=n:Array.isArray(n)?n.forEach(function(e){o[e]=e}):o=n,r(null,e,t)(function(t){var n,r;for(n in o)r=o[n],n==t?s.addClass(e.element,i+r):s.removeClass(e.element,i+r)})},n.propAddClass=function(e,t,n){return void 0===n&&(n=t),r(f.castBoolean,e,t)(function(t){t?s.addClass(e.element,n):s.removeClass(e.element,n)})},n.propRemoveClass=function(e,t,n){return void 0===n&&(n=t),r(f.castBoolean,e,t)(function(t){t?s.removeClass(e.element,n):s.addClass(e.element,n)})},n.propArray=r.bind(null,f.castArray),n.propBoolean=r.bind(null,f.castBoolean),n.propColor=r.bind(null,f.castColor),n.propDate=r.bind(null,f.castDate),n.propEnum=function(e){return r.bind(null,f.castEnum(e))},n.propFunction=r.bind(null,f.castFunction),n.propInteger=r.bind(null,f.castInteger),n.propFloat=r.bind(null,f.castFloat),n.propRegexp=r.bind(null,f.castRegexp),n.propString=r.bind(null,f.castString),n.propStringArray=r.bind(null,f.castStringArray),n.propUnit=r.bind(null,f.castUnit),n.propValidator=r.bind(null,f.castValidator),n.bind=function(e,t,n,r,i){if(void 0===e[u]||void 0===e[u][t])throw console.error(JSON.stringify(t)+" is not a bindable property!",{srcObj:e,srcAtt:t,dstObj:n,dstAtt:r,options:i}),Error(JSON.stringify(t)+" is not a bindable property!");void 0===i&&(i={}),i.value&&(i.converter=function(){return i.value});var o="function"==typeof n?n:function(e){n[r]="function"==typeof i.converter?i.converter(e):e};return e[u][t].event.add(o),i},n.extend=function(e,t,r,i){var o=t||{},a=r||{},s=JSON.parse(JSON.stringify(e||{})),l=Object.keys(o);return l.forEach(function(e){if("$"!==e.charAt(0)){var t=o[e];void 0===s[e]?console.error('[tfw.data-binding.extend] Undefined argument: "'.concat(e,'"!')):s[e]=t}}),void 0!==a&&(l.forEach(function(e){"$"!==e.charAt(0)||Object.defineProperty(a,e,{value:o[e],writable:!1,configurable:!1,enumerable:!1})}),Object.keys(s).forEach(function(e){if("$"!==e.charAt(0))try{a[e]=s[e]}catch(t){console.error('Trying to extend property "'.concat(e,'" of object '),a),console.error("...with object ",s),console.error("...but got ",t)}}),"function"==typeof i&&(Object.keys(a[u]).forEach(function(e){n.bind(a,e,i)}),i())),s},n.converters=f,t.exports._=a}),require("tfw.css",function(e,t,n){var r=function(){function t(){return r(n,arguments)}var n={en:{}},r=e("$").intl;return t.all=n,t}();n.parseUnit=function(e){for(var t,n=0,r=0;r<e.length;r++)if(t=e.charAt(r),0===n){if("-"==t||"+"==t||"0"<=t&&"9">=t)n=1;else if("."==t)n=2;else if(" "<t)break}else if(1==n){if("."==t)n=2;else if("0">t||"9"<t)break}else if(2==n&&("0">t||"9"<t))break;var i={v:parseFloat(e.substr(0,r)),u:e.substr(r).trim().toLowerCase()};return""===i.u&&(i.u="px"),i},t.exports._=r}),require("polyfill.string",function(e,t){var n=function(){function t(){return r(n,arguments)}var n={en:{}},r=e("$").intl;return t.all=n,t}();"function"!=typeof String.toLowerCase&&(String.toLowerCase=function(e){return e.toLowerCase()},String.toUpperCase=function(e){return e.toUpperCase()},String.trim=function(e){return e.trim()}),t.exports._=n}),require("theme",function(e,t){var n=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}();e("assets"),e("font.josefin");var r=e("dom");r.registerTheme("main",{bgP:"#06D",bgS:"#F80"}),r.applyTheme("main"),t.exports._=n}),require("font.josefin",function(e,t){var n=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}();t.exports._=n}),require("x-widget",function(e,t){function n(t,n,r,o){void 0===o&&(o={});try{var s,l=e(n),c=new l(r);if("function"==typeof c.element)s=c.element();else if(c.element instanceof Node)s=c.element;else{if(!(c.$ instanceof Node))throw Error('Sorry, but "'+n+'" is not a widget nor a view!',c);s=c.$}var u=document.getElementById(t);return u&&u.parentNode.replaceChild(s,u),s.setAttribute("id",t),a.addClass(s,o.class||""),i(t,c),c}catch(e){throw console.error("[x-widget] Unable to create widget `"+n+"`!"),console.error("[x-widget] id = ",t,", args = ",r),Error(e)}}function r(e){var t,n=a.tag(e.elem);e.attr&&(a.att(n,e.attr),t=e.attr.id),Array.isArray(e.children)&&e.children.forEach(function(e){a.add(n,e)});var r,o,s={};if(e.prop)for(r in e.prop)o=e.prop[r],Object.defineProperty(s,r,{value:o,writable:!1,configurable:!1,enumerable:!0});return Object.defineProperty(s,"element",{value:n,writable:!1,configurable:!1,enumerable:!0}),void 0!==t&&i(t,s),s}function i(e,t){l[e]=t;var n=c[e];return void 0!==n&&window.setTimeout(function(){n.forEach(function(e){e(t)}),delete c[e]}),"function"==typeof t.element?t.element:t.element||t}var o=function(){function t(){return r(n,arguments)}var n={en:{}},r=e("$").intl;return t.all=n,t}(),a=e("dom"),s=e("tfw.data-binding"),l={},c={},u=function(e,t,i,o){try{return"string"==typeof e?n.call(this,e,t,i,o):r.call(this,e)}catch(e){throw console.error(e),Error("Exception in "+t+"("+JSON.stringify(i)+"):\n"+e)}};u.template=function(t){var n,r,o,a="",s={};for(n in t)r=t[n],"name"==n?a=r:"id"==n?o=r:"$"==n.charAt(0)&&(s[n.substr(1)]=r);var l=e(a),c=new l(s);return o&&i(o,c),"function"==typeof c.element?c.element():c.element||c},u.getById=function(e){if(!l[e])throw Error("[x-widget.getById()] ID not found: "+e+"!");return l[e]},u.onWidgetCreation=function(e,t){void 0===l[e]?void 0===c[e]?c[e]=[t]:c[e].push(t):window.setTimeout(function(){t(l[e])})},u.bind=function(t,n){var r,i,o,a,c,u=l[t];for(r in n)a=n[r].B,Array.isArray(a)&&a.forEach(function(e){if(void 0===(i=l[e[0]]))return void console.error("[x-widget:bind("+t+')] Trying to bind attribute "'+r+'" of widget "'+t+'" to the unexisting widget "'+e[0]+'"!');o=e[1];try{if(2==e.length)s.bind(i,o,u,r);else{var n=e[2];s.bind(i,o,function(){u[r]=n})}}catch(n){console.error("Binding error for widget `"+t+"`!",{ex:n,binding:e})}}),c=n[r].S,Array.isArray(c)&&c.forEach(function(n){var i=APP,o=n;if(Array.isArray(n)){try{i=e(n[0])}catch(e){throw console.error("[x-widget:bind] Widget `"+t+"` can't require unexistent `"+n[0]+"`: ",e),e}o=n[1]}if("function"!=typeof(o=i[o]))throw Array.isArray(n)?Error("[x-widget:bind]  Widget `"+t+"` use unexisting slot `"+n[1]+"` of module `"+n[0]+"`!"):Error("[x-widget:bind]  Widget `"+t+"` use unexisting slot `"+n+"` of main module `APP`!");try{s.bind(u,r,o)}catch(e){console.error("Binding error for widget `"+t+"`!",{ex:e,dstObj:u,dstAtt:r,fct:o,slot:n})}})},t.exports=u,t.exports._=o}),require("light-saber.wdg.histo7",function(e,t){try{t.exports=function(){var t=e("dom"),n=e("tfw.binding.property-manager"),r=e("tfw.view").Tag,i=e("tfw.view.flex");return function(e){try{void 0===e&&(e={}),this.$elements={};var o=(n(this),new r("DIV")),a=new r("SVG",["xmlns","width","height","style","viewBox"]),s=new r("G",["fill","stroke","stroke-width","transform"]),l=new r("RECT",["x","y","width","height"]),c=new r("RECT",["x","y","width","height"]),u=new r("RECT",["x","y","width","height"]),f=new r("RECT",["x","y","width","height"]),h=new r("RECT",["x","y","width","height"]),d=new r("RECT",["x","y","width","height"]),p=new r("RECT",["x","y","width","height"]);t.add(s,l,c,u,f,h,d,p),t.add(a,s);var m=new r("SVG",["xmlns","width","height","style","viewBox"]),v=new r("G",["fill","stroke","stroke-width","transform"]),g=new r("RECT",["x","y","width","height"]),y=new r("RECT",["x","y","width","height"]),b=new r("RECT",["x","y","width","height"]),w=new r("RECT",["x","y","width","height"]),A=new r("RECT",["x","y","width","height"]),C=new r("RECT",["x","y","width","height"]),_=new r("RECT",["x","y","width","height"]);t.add(v,g,y,b,w,A,C,_),t.add(m,v);var x=new r("SVG",["xmlns","width","height","style","viewBox"]),E=new r("G",["fill","stroke","stroke-width","transform"]),L=new r("RECT",["x","y","width","height"]),V=new r("RECT",["x","y","width","height"]),T=new r("RECT",["x","y","width","height"]),H=new r("RECT",["x","y","width","height"]),M=new r("RECT",["x","y","width","height"]),R=new r("RECT",["x","y","width","height"]),P=new r("RECT",["x","y","width","height"]);t.add(E,L,V,T,H,M,R,P),t.add(x,E);var k=new i({content:[a,m,x]});t.add(o,k),Object.defineProperty(this,"$",{value:o.$,writable:!1,enumerable:!1,configurable:!1}),a.xmlns="http://www.w3.org/2000/svg",a.width="100%",a.height="100%",a.style="width:140px; height:140px",a.viewBox="0 0 70 70",s.fill="orange",s.stroke="#000",s["stroke-width"]=.5,s.transform="scale(1, -1) translate(0, -70.5)",l.x=.5,l.y=.5,l.width=10,l.height=3.5,c.x=10,c.y=.5,c.width=10,c.height=21,u.x=20,u.y=.5,u.width=10,u.height=52.5,f.x=30,f.y=.5,f.width=10,f.height=69.5,h.x=40,h.y=.5,h.width=10,h.height=52.5,d.x=50,d.y=.5,d.width=10,d.height=21,p.x=60,p.y=.5,p.width=10,p.height=3.5,m.xmlns="http://www.w3.org/2000/svg",m.width="100%",m.height="100%",m.style="width:140px; height:140px",m.viewBox="0 0 70 70",v.fill="orange",v.stroke="#000",v["stroke-width"]=.5,v.transform="scale(1, -1) translate(0, -70.5)",g.x=.5,g.y=.5,g.width=10,g.height=8,y.x=10,y.y=.5,y.width=10,y.height=28,b.x=20,b.y=.5,b.width=10,b.height=56,w.x=30,w.y=.5,w.width=10,w.height=69.5,A.x=40,A.y=.5,A.width=10,A.height=56,C.x=50,C.y=.5,C.width=10,C.height=28,_.x=60,_.y=.5,_.width=10,_.height=8,x.xmlns="http://www.w3.org/2000/svg",x.width="100%",x.height="100%",x.style="width:140px; height:140px",x.viewBox="0 0 70 70",E.fill="orange",E.stroke="#000",E["stroke-width"]=.5,E.transform="scale(1, -1) translate(0, -70.5)",L.x=.5,L.y=.5,L.width=10,L.height=12.5,V.x=10,V.y=.5,V.width=10,V.height=33.3,T.x=20,T.y=.5,T.width=10,T.height=58.3,H.x=30,H.y=.5,H.width=10,H.height=69.5,M.x=40,M.y=.5,M.width=10,M.height=58.3,R.x=50,R.y=.5,R.width=10,R.height=33.3,P.x=60,P.y=.5,P.width=10,P.height=12.5,t.addClass(this,"view","custom")}catch(e){throw console.error("mod/light-saber.wdg.histo7.js",e),Error('Instantiation error in XJS of "mod/light-saber.wdg.histo7.js":\n'+e)}}}()}catch(e){throw Error('Definition error in XJS of "mod/light-saber.wdg.histo7.js"\n'+e)}t.exports._=function(){return""}}),require("tfw.view.flex",function(e,t){var n=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}();try{t.exports=function(){function t(e,t,n){return void 0===e[t]?n:e[t]}var n=e("dom"),r=e("tfw.binding.property-manager"),i=e("tfw.view").Tag,o=e("tfw.binding.link"),a=(e("tfw.view"),e("tfw.binding.converters")),s=a.get("array"),l=a.get("enum");return function(e){try{void 0===e&&(e={}),this.$elements={};var a=this,c=r(this);c.create("content",{cast:s}),c.create("justifyContent",{cast:l(["space-between","space-around","center","start","end","flex-start","flex-end","left","right","stretch","space-evently","normal","baseline"]),init:"space-between"}),c.create("flexDirection",{cast:l(["row","column","row-reverse","column-reverse"]),init:"row"}),c.create("flexWrap",{cast:l(["nowrap","wrap","wrap-reverse"]),init:"nowrap"}),c.create("alignItems",{cast:l(["center","normal","flex-start","flex-end","start","end","self-start","self-end","baseline","first baseline","last baseline","stretch"]),init:"center"});var u=new i("DIV",["class"]);Object.defineProperty(this,"$",{value:u.$,writable:!1,enumerable:!1,configurable:!1}),new o({A:{obj:a,name:"content"},B:{action:function(e){n.clear(u),Array.isArray(e)||(e=[e]),e.forEach(function(e){n.add(u,e)})}},name:"content > undefined"}),c.on("justifyContent",function(e){u.$.style["justify-content"]=e}),c.on("flexDirection",function(e){u.$.style["flex-direction"]=e}),c.on("flexWrap",function(e){u.$.style["flex-wrap"]=e}),c.on("alignItems",function(e){u.$.style["align-items"]=e}),u.class="tfw-view-flex",c.set("content",t(e,"content",[])),c.set("justifyContent",t(e,"justifyContent","space-between")),c.set("flexDirection",t(e,"flexDirection","row")),c.set("flexWrap",t(e,"flexWrap","nowrap")),c.set("alignItems",t(e,"alignItems","center")),c.fire("content"),c.fire("justifyContent"),c.fire("flexDirection"),c.fire("flexWrap"),c.fire("alignItems"),n.addClass(this,"view","custom")}catch(e){throw console.error("mod/tfw.view.flex.js",e),Error('Instantiation error in XJS of "mod/tfw.view.flex.js":\n'+e)}}}()}catch(e){throw Error('Definition error in XJS of "mod/tfw.view.flex.js"\n'+e)}t.exports._=n}),require("light-saber.wdg.pascal",function(e,t){function n(e,t,n){var r=i.div([t]);if(e>=this.highlight){var o=e-this.highlight;if(0==(1&o)){var a=o>>1;n>=a&&n<e-a&&i.addClass(r,"orange")}}return r}var r={mapRow:function(e){var t=Array.from(o.computeBinomialCoeffs(e)),r=t.map(n.bind(this,e));return i.div(r)}},i=e("dom"),o=e("webgl.math");try{t.exports=function(){function t(e,t,n){return void 0===e[t]?n:e[t]}var n=e("dom"),i=e("tfw.binding.property-manager"),o=e("tfw.view").Tag,a=e("tfw.binding.link"),s=e("tfw.view"),l=e("tfw.binding.converters");s.ensureCodeBehind(r,"mapRow");var c=l.get("array"),u=l.get("integer");return function(e){try{void 0===e&&(e={}),this.$elements={};var s=this,l=i(this);l.create("rows",{cast:c}),l.create("highlight",{cast:u(0)});var f=new o("DIV",["class"]);Object.defineProperty(this,"$",{value:f.$,writable:!1,enumerable:!1,configurable:!1}),new a({A:{obj:s,name:"rows"},B:{action:function(e){n.clear(f),Array.isArray(e)||(e=[e]),e.forEach(function(e){n.add(f,e)})},map:function(){return r.mapRow.apply(s,arguments)}},name:"rows > undefined"}),f.class="light-saber-wdg-pascal",l.set("rows",t(e,"rows",[2,3,4,5,6,7,8,9,10,11])),l.set("highlight",t(e,"highlight",7)),l.fire("rows"),l.fire("highlight"),n.addClass(this,"view","custom")}catch(e){throw console.error("mod/light-saber.wdg.pascal.js",e),Error('Instantiation error in XJS of "mod/light-saber.wdg.pascal.js":\n'+e)}}}()}catch(e){throw Error('Definition error in XJS of "mod/light-saber.wdg.pascal.js"\n'+e)}t.exports._=function(){return""}}),require("webgl.math",function(e,t){function n(e){return new Float32Array(e)}function r(e,t,n,r,i,o,a,s,l){return new Float32Array([e,t,n,r,i,o,a,s,l])}function i(e,t,n,r,i,o,a,s,l,c,u,f,h,d,p,m){return new Float32Array([e,t,n,r,i,o,a,s,l,c,u,f,h,d,p,m])}var o=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}();t.exports={m4:{identity:function(){return i(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},matrix:i,vector:function(e,t,n,r){return new Float32Array([e,t,n,r])},projection:function(e,t,n){return i(2/e,0,0,0,0,-2/t,0,0,0,0,2/n,0,0,0,0,1)},translation:function(e,t,n){return i(1,0,0,0,0,1,0,0,0,0,1,0,e,t,n,1)},rotationX:function(e,t){t=t||new Float32Array(16);var n=Math.cos(e),r=Math.sin(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rotationY:function(e,t){t=t||new Float32Array(16);var n=Math.cos(e),r=Math.sin(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rotationZ:function(e,t){t=t||new Float32Array(16);var n=Math.cos(e),r=Math.sin(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rotationXY:function(e,t,n){n=n||new Float32Array(16);var r=Math.cos(e),i=Math.sin(e),o=Math.cos(t),a=Math.sin(t);return n[0]=o,n[1]=i*a,n[2]=-r*a,n[3]=0,n[4]=0,n[5]=r,n[6]=i,n[7]=0,n[8]=a,n[9]=-i*o,n[10]=r*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},rotationYX:function(e,t,n){var r=n||new Float32Array(16),i=Math.cos(e),o=Math.sin(e),a=Math.cos(t),s=Math.sin(t);return r[0]=i,r[1]=0,r[2]=o,r[3]=0,r[4]=-o*s,r[5]=a,r[6]=i*s,r[7]=0,r[8]=-o*a,r[9]=-s,r[10]=i*a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},rotationXZ:function(e,t,n){var r=n||new Float32Array(16),i=Math.cos(e),o=Math.sin(e),a=Math.cos(t),s=Math.sin(t);return r[0]=a,r[1]=i*s,r[2]=o*s,r[3]=0,r[4]=-s,r[5]=i*a,r[6]=o*a,r[7]=0,r[8]=0,r[9]=-o,r[10]=i,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},rotationZX:function(e,t,n){var r=n||new Float32Array(16),i=Math.cos(e),o=Math.sin(e),a=Math.cos(t),s=Math.sin(t);return r[0]=i,r[1]=o,r[2]=0,r[3]=0,r[4]=-o*a,r[5]=i*a,r[6]=s,r[7]=0,r[8]=o*s,r[9]=-i*s,r[10]=a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},scaling:function(e,t,n){return i(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1)},copy:n,normalize:function(e){var t,r,i=n(e),o=0;for(r=0;r<i.length;r++)t=i[r],o+=t*t;if(0<o){var a=1/Math.sqrt(o);for(r=0;r<i.length;r++)i[r]*=a}return i},cameraPolar:function(e,t,n,r,i,o,a){a=a||new Float32Array(16);var s=Math.cos(i),l=Math.sin(i),c=-Math.cos(o+.5*Math.PI),u=-Math.sin(o+.5*Math.PI),f=c*s,h=u*s,d=l,p=-h,m=f,v=0,g=Math.sqrt(p*p+m*m+v*v);p/=g,m/=g,v/=g;var y=h*v-d*m,b=p*d-v*f,w=f*m-h*p,A=-(f*r+e),C=-(h*r+t),_=-(d*r+n);return a[0]=p,a[4]=m,a[8]=v,a[12]=A*p+C*m+_*v,a[1]=y,a[5]=b,a[9]=w,a[13]=A*y+C*b+_*w,a[2]=f,a[6]=h,a[10]=d,a[14]=A*f+C*h+_*d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,a},perspective:function(e,t,n,r,i){i=i||new Float32Array(16);var o=Math.tan(.5*(Math.PI-e)),a=1/(n-r);return i[0]=o/t,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=o,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(n+r)*a,i[11]=-1,i[12]=0,i[13]=0,i[14]=n*r*a*2,i[15]=0,i},mul:function(e,t,n){var r=a["m"+e.length+"m"+t.length];if("function"!=typeof r)throw Error("[webgl.math.mul] I don't know how to multiply 'M"+e.length+"' with 'M"+t.length+"'!");return r(e,t,n)}},m3:{identity:function(){return r(1,0,0,0,1,0,0,0,1)},matrix:r,projection:function(e,t){return r(2/e,0,0,0,-2/t,0,0,0,1)},translation:function(e,t){return r(1,0,0,0,1,0,e,t,1)},rotation:function(e){var t=Math.cos(e),n=Math.sin(e);return r(t,-n,0,n,t,0,0,0,1)},scaling:function(e,t){return r(e,0,0,0,t,0,0,0,1)}},computeBinomialCoeffs:function(e){var t=new Float32Array(e),n=e-1;t[0]=1,t[n]=1;for(var r=1;r<=e/2;r++){for(var i=1,o=1,a=1;a<=r;a++)o*=a,i*=e-1-r+a;var s=i/o;t[r]=s,t[n-r]=s}return t}};var a={m4m4:function(e,t,n){return n=n||new Float32Array(4),n[0]=e[0]*t[0]+e[2]*t[1],n[1]=e[1]*t[0]+e[3]*t[1],n[2]=e[0]*t[2]+e[2]*t[3],n[3]=e[1]*t[2]+e[3]*t[3],n},m9m9:function(e,t,n){return n=n||new Float32Array(9),n[0]=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],n[1]=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],n[2]=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],n[3]=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],n[4]=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],n[5]=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],n[6]=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],n[7]=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],n[8]=e[2]*t[6]+e[5]*t[7]+e[8]*t[8],n},m16m16:function(e,t,n){return n=n||new Float32Array(16),n[0]=e[0]*t[0]+e[4]*t[1]+e[8]*t[2]+e[12]*t[3],n[1]=e[1]*t[0]+e[5]*t[1]+e[9]*t[2]+e[13]*t[3],n[2]=e[2]*t[0]+e[6]*t[1]+e[10]*t[2]+e[14]*t[3],n[3]=e[3]*t[0]+e[7]*t[1]+e[11]*t[2]+e[15]*t[3],n[4]=e[0]*t[4]+e[4]*t[5]+e[8]*t[6]+e[12]*t[7],n[5]=e[1]*t[4]+e[5]*t[5]+e[9]*t[6]+e[13]*t[7],n[6]=e[2]*t[4]+e[6]*t[5]+e[10]*t[6]+e[14]*t[7],n[7]=e[3]*t[4]+e[7]*t[5]+e[11]*t[6]+e[15]*t[7],n[8]=e[0]*t[8]+e[4]*t[9]+e[8]*t[10]+e[12]*t[11],n[9]=e[1]*t[8]+e[5]*t[9]+e[9]*t[10]+e[13]*t[11],n[10]=e[2]*t[8]+e[6]*t[9]+e[10]*t[10]+e[14]*t[11],n[11]=e[3]*t[8]+e[7]*t[9]+e[11]*t[10]+e[15]*t[11],n[12]=e[0]*t[12]+e[4]*t[13]+e[8]*t[14]+e[12]*t[15],n[13]=e[1]*t[12]+e[5]*t[13]+e[9]*t[14]+e[13]*t[15],n[14]=e[2]*t[12]+e[6]*t[13]+e[10]*t[14]+e[14]*t[15],n[15]=e[3]*t[12]+e[7]*t[13]+e[11]*t[14]+e[15]*t[15],n},m16m4:function(e,t,n){return n=n||new Float32Array(4),n[0]=e[0]*t[0]+e[4]*t[1]+e[8]*t[2]+e[12]*t[3],n[1]=e[1]*t[0]+e[5]*t[1]+e[9]*t[2]+e[13]*t[3],n[2]=e[2]*t[0]+e[6]*t[1]+e[10]*t[2]+e[14]*t[3],n[3]=e[3]*t[0]+e[7]*t[1]+e[11]*t[2]+e[15]*t[3],n}};t.exports._=o}),require("wdg.showhide",function(e,t){function n(e){var t=this,n=new a({content:"tri-right",size:"24px"}),r=i.tag("span","label"),l=i.div("head",[n,r]),c=i.div("body","thm-bg0"),u=i.elem(this,"div","wdg-showhide","thm-ele2",[l,c]);s(this,function(e){switch(e.keyCode){case 13:case 32:t.value=!t.value}console.info("[wdg.showhide] evt=",e)}),o.propBoolean(this,"value")(function(e){e?(i.addClass(u,"show"),i.removeClass(u,"fade-in"),window.setTimeout(function(){i.addClass(u,"fade-in")})):i.removeClass(u,"show")}),o.propBoolean(this,"simple")(function(e){e?(i.addClass(u,"simple"),i.removeClass(u,"thm-ele2"),i.removeClass(l,"thm-bgPD")):(i.removeClass(u,"simple"),i.addClass(u,"thm-ele2"),i.addClass(l,"thm-bgPD"))}),o.propString(this,"label")(function(e){r.textContent=e}),o.propUnit(this,"maxHeight")(function(e){c.style.maxHeight=0>=e.v?"none":e.v+e.u}),o.prop(this,"content")(function(e){i.clear(c),Array.isArray(e)?e.forEach(function(e){i.add(c,e)}):void 0!==e&&null!==e&&i.add(c,e)}),o.propRemoveClass(this,"wide","inline"),o.propRemoveClass(this,"visible","hide"),e=o.extend({value:!0,label:"",content:null,maxHeight:null,visible:!0,wide:!0,simple:!1,focus:!1},e,this),i.on(l,function(){
t.value=!t.value,t.focus=!0}),this.append=function(e){return Array.isArray(t.content)||(t.content=[]),t.content.push(e),i.add(c,e),t},this.prepend=function(e){return Array.isArray(t.content)||(t.content=[]),t.content.push(e),c.insertBefore(e,c.childNodes[0]),t}}var r=function(){function t(){return r(n,arguments)}var n={en:{}},r=e("$").intl;return t.all=n,t}(),i=e("dom"),o=e("tfw.data-binding"),a=e("wdg.icon"),s=e("tfw.focusable");n.prototype.clear=function(){return this.content=[],this},t.exports=n,t.exports._=r}),require("tfw.focusable",function(e,t){var n=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}(),r=e("dom"),i=e("tfw.data-binding");t.exports=function(e,t){"function"!=typeof t&&(t=function(){}),r.addClass(e,"tfw-focusable");var n=r.tag("input");r(e).insertAdjacentElement("afterbegin",r.div("tfw-focusable-invisible",[n])),n.addEventListener("keydown",function(e){t(e),n.value=""}),n.addEventListener("focus",function(){r.addClass(e,"focus"),e.focus=!0}),n.addEventListener("blur",function(){r.removeClass(e,"focus"),e.focus=!1}),i.propBoolean(e,"focus")(function(e){window.setTimeout(function(){e?n.focus():n.blur()})})},t.exports._=n}),require("wdg.icon",function(e,t){var n=function(){function t(){return r(n,arguments)}var n={en:{}},r=e("$").intl;return t.all=n,t}();t.exports=e("tfw.view.icon"),t.exports._=n}),require("light-saber.view",function(e,t){function n(e,t,n,r,i){h(e,t),e.enable(e.DEPTH_TEST),e.clearColor(0,0,0,0),e.clearDepth(1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),n.paint(i),r.paint(i)}function r(e,t,n,r,i){h(e,r),t.texture=n.texture,t.paint(i)}function i(e,t,n,r,i){h(e,r),t.texture=n.texture,t.width=n.width,t.height=n.height,t.paint(i)}function o(e,t,n,r,i,o,a){h(e,i),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),t.texture0=n.texture,t.energy0=o,t.texture1=r.texture,t.paint(a)}function a(e,t,n){return t+.5*(e+1)*(n-t)}function s(e,t){Object.values(t).forEach(f.bind(null,e));var n=Math.max(1,e.canvas.width),r=Math.max(1,e.canvas.height);t.scene=u(e,n,r),t.filter=l(e,n/2,r/2),t.blurH=l(e,n/4,r/4),t.blurV=l(e,n/4,r/4)}function l(e,t,n){var r=c(e,t,n),i=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),{texture:r,fb:i,width:t,height:n}}function c(e,t,n){var r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null),r}function u(e,t,n){var r=l(e,t,n),i=e.createRenderbuffer();return e.bindRenderbuffer(e.RENDERBUFFER,i),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t,n),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,i),r.depth=i,r}function f(e,t){var n=t.texture,r=t.fb,i=t.depth;e.deleteTexture(n),e.deleteFramebuffer(r),i&&e.deleteRenderbuffer(i)}function h(e,t){t?(e.bindFramebuffer(e.FRAMEBUFFER,t.fb),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,e.canvas.width,e.canvas.height))}var d=function(){function t(){return r(n,arguments)}var n={en:{blur:"Bluriness",brightness:"Brightness",persistence:"Persistence"},fr:{blur:"Floutage",brightness:"Éclat",persistence:"Trainée"}},r=e("$").intl;return t.all=n,t}(),p={init:function(){var e=this,t=this.$elements.canvas.$,l=t.getContext("webgl",{preserveDrawingBuffer:!1}),c={},u=new v({gl:l}),f=new g(l),h=new b(l),d=new A(l),p=m.identity(),C=m.identity(),_=new Float32Array([0,-.4,-1.5,0]),x=new w({gl:l,size:7,energy:.6,horizontal:!0}),E=new w({gl:l,size:7,energy:.6,horizontal:!1});h.projection=p,h.rotation=C,h.translation=_,d.projection=p,d.rotation=C,d.translation=_,s(l,c);var L=function(t){requestAnimationFrame(L),y(l)&&(console.log("Resize!"),s(l,c));var v=a(Math.sin(1+147e-6*t),.5*-Math.PI,.5*Math.PI),g=4*Math.cos(458e-6*t),b=l.canvas.clientWidth,A=l.canvas.clientHeight,_=c;if(m.rotationYX(g,v,C),m.perspective(.35*Math.PI,b/A,.1,10,p),n(l,e.gloom?_.scene:null,h,d,t),e.gloom){if(e.persistence!==x.energy||e.blur!==x.size){var V=Math.max(1,Math.floor(e.blur)),T=e.persistence;console.info("that.persistence=",e.persistence),console.info("blurH.energy=",x.energy),x=new w({gl:l,size:V,energy:T,horizontal:!0}),E=new w({gl:l,size:V,energy:T,horizontal:!1})}r(l,f,_.scene,_.blurV,t),i(l,x,_.blurV,_.blurH,t),i(l,E,_.blurH,_.blurV,t),o(l,u,_.blurV,_.scene,null,e.brightness,t)}};requestAnimationFrame(L)}};e("assets");var m=e("webgl.math").m4,v=e("webgl.filter.addition"),g=e("light-saber.filter"),y=e("webgl.resize"),b=e("light-saber.saber-hilt"),w=e("webgl.filter.gaussian-blur"),A=e("light-saber.saber-plasma");try{t.exports=function(){function t(e,t,n){return void 0===e[t]?n:e[t]}function n(e,t,n){n?i.addClass(e,t):i.removeClass(e,t)}function r(e,t,n){n?i.removeClass(e,t):i.addClass(e,t)}var i=e("dom"),o=e("tfw.binding.property-manager"),a=e("tfw.view").Tag,s=e("tfw.binding.link"),l=e("tfw.view"),c=e("tfw.binding.converters"),u=e("tfw.view.textbox"),f=e("tfw.view.checkbox");l.ensureCodeBehind(p,"init");var h=c.get("boolean"),m=c.get("float"),v=c.get("integer");return function(e){try{void 0===e&&(e={}),this.$elements={};var l=this,c=o(this);c.create("fullscreen",{cast:h}),c.create("gloom",{cast:h}),c.create("brightness",{cast:m(0)}),c.create("persistence",{cast:m(0)}),c.create("blur",{cast:v(0)});var g=new a("DIV",["class"]),y=new a("CANVAS");this.$elements.canvas=y;var b=new a("DIV",["class"]),w=new f({content:"Plein écran",wide:!1});i.add(b,w);var A=new a("DIV",["class"]),C=new f({content:"Halo",wide:!1});i.add(A,C);var _=new a("DIV",["class"]),x=new u({width:"64px",label:d("brightness")}),E=new u({width:"64px",label:d("persistence")}),L=new u({width:"64px",label:d("blur")});i.add(_,x,E,L),i.add(g,y,b,A,_),Object.defineProperty(this,"$",{value:g.$,writable:!1,enumerable:!1,configurable:!1}),new s({A:{obj:l,name:"fullscreen"},B:{action:function(e){n(g,"fullscreen",e)}},name:"fullscreen > undefined"}),new s({A:{obj:l,name:"fullscreen"},B:{obj:w,name:"value"},name:"fullscreen > e_2/value"}),new s({A:{obj:l,name:"gloom"},B:{obj:C,name:"value"},name:"gloom > e_4/value"}),new s({A:{obj:l,name:"gloom"},B:{action:function(e){r(_,"hide",e)}},name:"gloom > undefined"}),new s({A:{obj:l,name:"brightness"},B:{obj:x,name:"value"},name:"brightness > e_6/value"}),new s({A:{obj:l,name:"persistence"},B:{obj:E,name:"value"},name:"persistence > e_7/value"}),new s({A:{obj:l,name:"blur"},B:{obj:L,name:"value"},name:"blur > e_8/value"}),g.class="wdg-light-saber-view",b.class="bottom",A.class="left",_.class="top",c.set("fullscreen",t(e,"fullscreen",!1)),c.set("gloom",t(e,"gloom",!1)),c.set("brightness",t(e,"brightness",2.2)),c.set("persistence",t(e,"persistence",.53)),c.set("blur",t(e,"blur",7)),c.fire("fullscreen"),c.fire("gloom"),c.fire("brightness"),c.fire("persistence"),c.fire("blur"),p.init.call(this),i.addClass(this,"view","custom")}catch(e){throw console.error("mod/light-saber.view.js",e),Error('Instantiation error in XJS of "mod/light-saber.view.js":\n'+e)}}}()}catch(e){throw Error('Definition error in XJS of "mod/light-saber.view.js"\n'+e)}t.exports._=d}),require("tfw.view.checkbox",function(e,t){var n=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}(),r={init:function(){new o(this.$)},on:function(e){i(this).on("value",e)},onKeyUp:function(e){-1<["enter","space"].indexOf(e.code.toLowerCase())&&(this.value=!this.value)}},i=e("tfw.binding.property-manager"),o=e("tfw.touchable");try{t.exports=function(){function t(e,t,n){return void 0===e[t]?n:e[t]}function n(e,t,n){n?o.addClass(e,t):o.removeClass(e,t)}function i(e,t,n){n?o.removeClass(e,t):o.addClass(e,t)}var o=e("dom"),a=e("tfw.binding.property-manager"),s=e("tfw.view").Tag,l=e("tfw.binding.link"),c=e("tfw.view"),u=e("tfw.binding.converters");c.ensureCodeBehind(r,"on","init","onKeyUp");var f=u.get("boolean"),h=u.get("string"),d=function(e){try{void 0===e&&(e={}),this.$elements={};var u=this,d=a(this);d.create("value",{cast:f}),d.create("inverted",{cast:f}),d.create("visible",{cast:f}),d.create("wide",{cast:f}),d.create("content",{cast:h});var p=new s("BUTTON",["class"]),m=new s("DIV",["class"]),v=new s("DIV",["class"]);this.$elements.bar=v;var g=new s("DIV",["class"]);this.$elements.btn=g,o.add(m,v,g);var y=new s("DIV",["class"]);o.add(p,m,y),Object.defineProperty(this,"$",{value:p.$,writable:!1,enumerable:!1,configurable:!1}),c.events(p,{tap:function(){u.value=!u.value},keyup:r.onKeyUp.bind(this)}),new l({A:{obj:u,name:"value"},B:{action:function(e){n(p,"ok",e)}},name:"value > undefined"}),new l({A:{obj:u,name:"inverted"},B:{action:function(e){n(p,"inverted",e)}},name:"inverted > undefined"}),new l({A:{obj:u,name:"wide"},B:{action:function(e){n(p,"wide",e)}},name:"wide > undefined"}),new l({A:{obj:u,name:"visible"},B:{action:function(e){i(p,"hide",e)}},name:"visible > undefined"}),new l({A:{obj:u,name:"value"},B:{action:function(e){n(v,"thm-bgSL",e),i(v,"thm-bg0",e)}},name:"value > undefined"}),new l({A:{obj:u,name:"value"},B:{action:function(e){n(g,"thm-bgS",e),i(g,"thm-bg0",e)}},name:"value > undefined"}),d.on("content",function(e){o.clear(y,e)}),p.class="tfw-view-checkbox",m.class="pin",v.class="bar thm-ele2",g.class="btn thm-ele2",y.class="txt",d.set("value",t(e,"value",!1)),d.set("inverted",t(e,"inverted",!1)),d.set("visible",t(e,"visible",!0)),d.set("wide",t(e,"wide",!0)),d.set("content",t(e,"content","Checkbox")),d.fire("value"),d.fire("inverted"),d.fire("visible"),d.fire("wide"),d.fire("content"),r.init.call(this),o.addClass(this,"view","custom")}catch(e){throw console.error("mod/tfw.view.checkbox.js",e),Error('Instantiation error in XJS of "mod/tfw.view.checkbox.js":\n'+e)}};return d.prototype.on=r.on,d}()}catch(e){throw Error('Definition error in XJS of "mod/tfw.view.checkbox.js"\n'+e)}t.exports._=n}),require("tfw.touchable",function(e,t){function n(e){var t=i(e).getBoundingClientRect(),n=i.div("tfw-touchable");return i.css(n,{left:"".concat(t.left,"px"),top:"".concat(t.top,"px"),width:"".concat(t.width,"px"),height:"".concat(t.height,"px"),borderRadius:window.getComputedStyle(i(e)).getPropertyValue("border-radius")}),n}var r=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}();t.exports=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=this,s={elem:null},l=i.div("tfw-touchable-shadow"),c=i.div("tfw-touchable-container",[l]);void 0===t.enabled&&(t.enabled=!0),this.enabled=t.enabled,this.color=t.color||"#333",this.classToAdd=t.classToAdd,this.opacity=t.opacity||.4,this.element=i(e),this.tap=new a,this.press=new a;var u=0,f=0;i.addClass(e,"tfw-touchable-elem");var h=o().css(l,{transition:"none",transform:"scale(0)"}).exec(function(){var t=r.classToAdd;"string"==typeof t&&i.addClass(e,t);var n=s.elem.getBoundingClientRect(),o=Math.max(u,n.width-u),a=Math.max(f,n.height-f),h=Math.ceil(Math.sqrt(o*o+a*a));i.css(l,{left:"".concat(u,"px"),top:"".concat(f,"px"),margin:"-".concat(h,"px"),width:"".concat(2*h,"px"),height:"".concat(2*h,"px"),opacity:0,background:r.color,transform:"scale(0)",transition:"all .15s ease","transition-timing-function":"cubic-bezier(0,1,0.780,1)","-moz-transition-timing-function":"cubic-bezier(0,1,0.780,1)","-webkit-transition-timing-function":"cubic-bezier(0,1,0.780,1)"}),i.clear(s.elem,c)}).wait(10).css(l,{opacity:r.opacity,transform:"scale(.25)"}).wait(150).css(l,{transform:"scale(.2)"}).wait(150).css(l,{transition:"all .6s ease",transform:"scale(1)",opacity:0}).wait(600).exec(function(){i.detach(s.elem);var t=r.classToAdd;"string"==typeof t&&i.removeClass(e,t)});i.on(e,{down:function(t){r.enabled&&(t.stopPropagation(),t.preventDefault(),u=Math.floor(t.x),f=Math.floor(t.y),s.elem=n(e),i.add(document.body,s.elem),h.start())},tap:function(e){return r.enabled?void r.tap.fire(e):void console.log("DISABLED!")},doubletap:function(e){return r.enabled?void r.press.fire(e):void console.log("DISABLED!")}})};var i=e("dom"),o=e("dom.fx"),a=e("tfw.listeners");t.exports._=r}),require("dom.fx",function(e,t){function n(e){this._session={},Object.defineProperty(n.prototype,"name",{value:e,writable:!1,configurable:!0,enumerable:!0}),this._name=e,this._tasks=[],this._index=0,this._started=!1,this._startTime=0,this._onEnd=f}function r(e){if(e===this._session){if(this._index>=this._tasks.length)return this._index=0,this._started=!1,delete this._session,void this._onEnd(this);var t=this,n=this._tasks[this._index++];this._debug&&console.info("[dom.fx] tsk[".concat(this._index-1,"]: "),n.label,"(".concat(Date.now()-this._startTime," ms)"),n.args,e),n(function(){d(r.bind(t,e))},!0)}}function i(e,t){t.terminate&&t.terminate();var n=e.getBoundingClientRect();console.info("[dom.fx] rect=...",n);var r=c.div();c.css(r,{display:"inline-block",width:n.width+"px",height:n.height+"px"}),t.onBeforeReplace(e),c.replace(r,e),t.onAfterReplace(e),t.substitute=r,t.styles=a(e),t.overlay=c.div("dom-fx-fullscreen"),document.body.appendChild(t.overlay),t.overlay.appendChild(e),c.css(e,{left:n.left+"px",top:n.top+"px",width:n.width+"px",height:n.height+"px"}),c.addClass(e,"dom-fx-fullscreen-target"),d(function(){var n=t.overlay.getBoundingClientRect();c.css(e,{left:"20px",top:"20px",width:n.width-40+"px",height:n.height-40+"px"})})}function o(e,t){var n=t.substitute.getBoundingClientRect();c.css(e,{left:n.left+"px",top:n.top+"px",width:n.width+"px",height:n.height+"px"}),t.terminate=function(){c.detach(t.overlay),t.onBeforeReplace(e),c.replace(e,t.substitute),t.onAfterReplace(e),s(e,t.styles),delete t.terminate},d(t.terminate,200)}function a(e){var t,n,r={};for(t in e.style)n=e.style[t],r[t]=n;return console.info("[dom.fx] styles=...",r),r}function s(e,t){for(var n in t)e.style[n]=t[n]}var l=function(){function t(){return r(n,arguments)}var n={en:{}},r=e("$").intl;return t.all=n,t}();e("polyfill.promise");var c=e("dom"),u=e("tfw.data-binding"),f=function(){},h=1,d=window.setTimeout;n.prototype.start=function(e){var t=void 0===e?f:e;this._started&&this.end(),this._onEnd=t,this._started=!0,this._index=0,this._session={$id:h++},this._startTime=Date.now(),r.call(this,this._session)},n.prototype.end=function(){if(!this._started)return this;var e=this;for(this._started=!1,delete this._session;this._index<this._tasks.length;){var t=this._tasks[this._index++];e._debug&&console.info("[dom.fx.end] tsk["+(this._index-1)+"]: ",t.label,t.args),t(f,!1)}return this._onEnd(this),this},n.prototype.debug=function(e){return this.addTask(function(t){this._debug=!!e,t()}),this},n.prototype.addTask=function(e,t,n){return e.label=t,e.args=n,this._tasks.push(e),this},n.prototype.log=function(e){return this.addTask(function(t){console.log("[dom.fx]",e),t()},"log"),this},n.prototype.pause=function(){return this.addTask(f,"pause"),this},n.prototype.exec=function(){var e=Array.prototype.slice.call(arguments);return this.addTask(function(t,n){e.forEach(function(e){try{"function"==typeof e?e(n):console.log("[dom.fx]",e)}catch(e){console.error(e)}}),t()},"exec",e),this},["css","addClass","removeClass","toggleClass","detach","saveStyle","restoreStyle","add","removeAtt","replace"].forEach(function(e){var t=c[e];n.prototype[e]=function(){var n=Array.prototype.slice.call(arguments);return this.addTask(function(e){t.apply(c,n),e()},e,n),this}}),n.prototype.vanish=function(e,t){return t=parseInt(t),isNaN(t)&&(t=300),this.css(e,{transition:"none"}).css(e,{transition:"opacity "+t+"ms",opacity:0}).wait(t)},n.prototype.vanishAndDetach=function(e,t){return t=parseInt(t),isNaN(t)&&(t=300),this.vanish(e,t).detach(e)},n.prototype.wait=function(e){var t=Array.prototype.slice.call(arguments);return void 0===e&&(e=0),"number"==typeof e?this.addTask(function(t,n){n&&d(t,e)},"wait",t):this.addTask(function(t,n){if(n){var r=c(e),i=function(){["transitionend","oTransitionEnd","webkitTransitionEnd"].forEach(function(e){r.removeEventListener(e,i)}),t()};["transitionend","oTransitionEnd","webkitTransitionEnd"].forEach(function(e){r.addEventListener(e,i)})}},"wait",t),this},t.exports=function(e){return new n(e)},t.exports.Fullscreen=function(e){if(void 0===e)throw Error("[dom.fx:fullscreen] Missing argument!");if(void 0===e.target)throw Error("[dom.fx:fullscreen] Missing `opts.target`!");"function"==typeof e.target.element&&(e.target=e.target.element()),void 0!==e.target.element&&(e.target=e.target.element);var t=function(){},n={onBeforeReplace:"function"==typeof e.onBeforeReplace?e.onBeforeReplace:t,onAfterReplace:"function"==typeof e.onAfterReplace?e.onAfterReplace:t};u.propBoolean(this,"value")(function(t){t?i(e.target,n):o(e.target,n)})},t.exports._=l}),require("polyfill.promise",function(e,t){var n=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}();window.Promise||function(){function e(e){return"function"==typeof e||"object"===_typeof(e)&&null!==e}function t(e){return"function"==typeof e}function n(e){return"object"===_typeof(e)&&null!==e}function r(){}function i(){for(var e=0;e<M;e+=2){(0,D[e])(D[e+1]),D[e]=void 0,D[e+1]=void 0}M=0}function o(){}function a(){return new TypeError("You cannot resolve a promise with itself")}function s(){return new TypeError("A promises callback cannot return that same promise.")}function l(e){try{return e.then}catch(e){return O.error=e,O}}function c(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function u(e,t,n){R(function(e){var r=!1,i=c(n,t,function(n){r||(r=!0,t===n?m(e,n):d(e,n))},function(t){r||(r=!0,v(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,v(e,i))},e)}function f(e,t){1===t._state?m(e,t._result):2===e._state?v(e,t._result):g(t,void 0,function(t){d(e,t)},function(t){v(e,t)})}function h(e,n){if(n.constructor===e.constructor)f(e,n);else{var r=l(n);r===O?v(e,O.error):void 0===r?m(e,n):t(r)?u(e,n,r):m(e,n)}}function d(t,n){t===n?v(t,a()):e(n)?h(t,n):m(t,n)}function p(e){e._onerror&&e._onerror(e._result),y(e)}function m(e,t){void 0!==e._state||(e._result=t,e._state=1,0===e._subscribers.length||R(y,e))}function v(e,t){void 0!==e._state||(e._state=2,e._result=t,R(p,e))}function g(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+1]=n,i[o+2]=r,0===o&&e._state&&R(y,e)}function y(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,i,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?A(n,r,i,o):i(o);e._subscribers.length=0}}function b(){this.error=null}function w(e,t){try{return e(t)}catch(e){return j.error=e,j}}function A(e,n,r,i){var o,a,l,c,u=t(r);if(u){if(o=w(r,i),o===j?(c=!0,a=o.error,o=null):l=!0,n===o)return void v(n,s())}else o=i,l=!0;void 0!==n._state||(u&&l?d(n,o):c?v(n,a):1===e?m(n,o):2===e&&v(n,o))}function C(e,t){try{t(function(t){d(e,t)},function(t){v(e,t)})}catch(t){v(e,t)}}function _(e,t,n,r){this._instanceConstructor=e,this.promise=new e(o,r),this._abortOnReject=n,this._validateInput(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._init(),0===this.length?m(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&m(this.promise,this._result))):v(this.promise,this._validationError())}function x(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function E(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function L(e,n){this._id=B++,this._label=n,this._state=void 0,this._result=void 0,this._subscribers=[],o!==e&&(!t(e)&&x(),!(this instanceof L)&&E(),C(this,e))}var V,T=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},H=T,M=(Date.now,Object.create,0),R=function(e,t){D[M]=e,D[M+1]=t,2===(M+=2)&&V()},P="undefined"==typeof window?{}:window,k=P.MutationObserver||P.WebKitMutationObserver,S="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,D=Array(1e3);V="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?function(){return function(){process.nextTick(i)}}():k?function(){var e=0,t=new k(i),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():S?function(){var e=new MessageChannel;return e.port1.onmessage=i,function(){e.port2.postMessage(0)}}():function(){return function(){setTimeout(i,1)}}();var O=new b,j=new b;_.prototype._validateInput=function(e){return H(e)},_.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},_.prototype._init=function(){this._result=Array(this.length)},_.prototype._enumerate=function(){for(var e=this.length,t=this.promise,n=this._input,r=0;void 0===t._state&&r<e;r++)this._eachEntry(n[r],r)},_.prototype._eachEntry=function(e,t){var r=this._instanceConstructor;n(e)?e.constructor===r&&void 0!==e._state?(e._onerror=null,this._settledAt(e._state,t,e._result)):this._willSettleAt(r.resolve(e),t):(this._remaining--,this._result[t]=this._makeResult(1,t,e))},_.prototype._settledAt=function(e,t,n){var r=this.promise;void 0===r._state&&(this._remaining--,this._abortOnReject&&2===e?v(r,n):this._result[t]=this._makeResult(e,t,n)),0===this._remaining&&m(r,this._result)},_.prototype._makeResult=function(e,t,n){return n},_.prototype._willSettleAt=function(e,t){var n=this;g(e,void 0,function(e){n._settledAt(1,t,e)},function(e){n._settledAt(2,t,e)})};var I=function(e,t){var n=this;if(e&&"object"===_typeof(e)&&e.constructor===n)return e;var r=new n(o,t);return d(r,e),r},B=0,F=L;L.all=function(e,t){return new _(this,e,!0,t).promise},L.race=function(e,t){function n(e){d(a,e)}function r(e){v(a,e)}var i=this,a=new i(o,t);if(!H(e))return v(a,new TypeError("You must pass an array to race.")),a;for(var s=e.length,l=0;void 0===a._state&&l<s;l++)g(i.resolve(e[l]),void 0,n,r);return a},L.resolve=I,L.reject=function(e,t){var n=this,r=new n(o,t);return v(r,e),r},L.prototype={constructor:L,then:function(e,t,n){var r=this,i=r._state;if(1===i&&!e||2===i&&!t)return this;r._onerror=null;var a=new this.constructor(o,n),s=r._result;if(i){var l=arguments[i-1];R(function(){A(i,a,l,s)})}else g(r,a,e,t);return a},catch:function(e,t){return this.then(null,e,t)}};!function(){var e="undefined"==typeof global?"undefined"!=typeof window&&window.document?window:self:global;"Promise"in e&&"resolve"in e.Promise&&"reject"in e.Promise&&"all"in e.Promise&&"race"in e.Promise&&function(){var n;return new e.Promise(function(e){n=e}),t(n)}()||(e.Promise=F)}()}.call(this),t.exports._=n}),require("tfw.view.textbox",function(e,t){function n(e){this.valid=this.validator(e)}function r(e){var t=this,n=this.list;if(Array.isArray(n)&&0!==n.length){var r=this.$elements.completion;a.clear(r);var o=e.trim().toLowerCase(),s=0;n.forEach(function(e){var n=e.toLowerCase().indexOf(o);0===n&&(99<++s||i.call(t,r,e,n,o.length))}),99>s&&n.forEach(function(e){var n=e.toLowerCase().indexOf(o);1>n||99<++s||i.call(t,r,e,n,o.length)})}}function i(e,t,n,r){var i=this,o=a.div();0<n&&a.add(o,a.tag("span",[t.substr(0,n)])),a.add(o,a.tag("b",[t.substr(n,r)])),n+r<t.length&&a.add(o,a.tag("span",[t.substr(n+r)])),a.on(o,function(){i.value=t}),a.add(e,o)}var o=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}(),a=e("dom"),s={onKeyUp:function(e){"Enter"===e.key&&(this.value=this.$elements.input.value,this.action=this.value)},onValueChanged:function(e){n.call(this,e),r.call(this,e)}};try{t.exports=function(){function t(e,t,n){return void 0===e[t]?n:e[t]}function n(e,t,n){n?o.addClass(e,t):o.removeClass(e,t)}function r(e,t,n){n?o.removeClass(e,t):o.addClass(e,t)}function i(e,t,n){n?o.removeAtt(e,t):o.att(e,t)}var o=e("dom"),a=e("tfw.binding.property-manager"),l=e("tfw.view").Tag,c=e("tfw.binding.link"),u=e("tfw.view"),f=e("tfw.binding.converters");u.ensureCodeBehind(s,"onValueChanged","onKeyUp");var h=f.get("string"),d=f.get("boolean"),p=f.get("unit"),m=f.get("strings"),v=f.get("validator"),g=f.get("integer"),y=f.get("isEmpty");return function(e){try{void 0===e&&(e={}),this.$elements={};var f=this,b=a(this);b.create("label",{cast:h}),b.create("type",{cast:h}),b.create("wide",{cast:d}),b.create("focus",{cast:d}),b.create("enabled",{cast:d}),b.create("visible",{cast:d}),b.create("width",{cast:p}),b.createAction("action"),b.create("list",{cast:m}),b.create("validator",{cast:v}),b.create("valid",{cast:d}),b.create("value",{cast:h}),b.create("maxLength",{cast:g(0)});var w=new l("DIV",["class"]),A=new l("DIV",["class","textcontent"]);this.$elements.head=A;var C=new l("DIV",["class"]),_=new l("INPUT",["class","type","maxLength","value","focus"]);this.$elements.input=_,o.add(C,_),this.$elements.body=C;var x=new l("DIV",["class"]);this.$elements.foot=x;var E=new l("DIV",["class"]);this.$elements.bottom=E;var L=new l("FOOTER"),V=new l("DIV",["class"]);this.$elements.completion=V,o.add(L,V),o.add(w,A,C,x,E,L),Object.defineProperty(this,"$",{value:w.$,writable:!1,enumerable:!1,configurable:!1}),u.events(_,{keyup:s.onKeyUp.bind(this)}),new c({A:{obj:f,name:"wide"},B:{action:function(e){n(w,"wide",e)}},name:"wide > undefined"}),new c({A:{obj:f,name:"focus",open:!1},B:{action:function(e){n(w,"thm-bgSL",e),r(w,"thm-bg3",e)}},name:"focus > undefined"}),new c({A:{obj:f,name:"focus"},B:{action:function(e){n(w,"focus",e)}},name:"focus > undefined"}),new c({A:{obj:f,name:"label"},B:{action:function(e){n(w,"no-label",e)},converter:y},name:"label > undefined"}),new c({A:{obj:f,name:"enabled"},B:{action:function(e){r(w,"disabled",e)}},name:"enabled > undefined"}),new c({A:{obj:f,name:"visible"},B:{action:function(e){r(w,"hide",e)}},name:"visible > undefined"}),new c({A:{obj:f,name:"valid"},B:{action:function(e){r(w,"invalid",e)}},name:"valid > undefined"}),new c({A:{obj:f,name:"label"},B:{obj:A,name:"textcontent"},name:"label > e_head/textcontent"}),new c({A:{obj:f,name:"type"},B:{obj:_,name:"type"},name:"type > e_input/type"}),new c({A:{obj:f,name:"maxLength"},B:{obj:_,name:"maxLength"},name:"max-length > e_input/maxLength"}),new c({A:{obj:f,name:"value",delay:350},B:{obj:_,name:"value"},name:"value > e_input/value"}),new c({A:{obj:f,name:"focus"},B:{obj:_,name:"focus"},name:"focus > e_input/focus"}),new c({A:{obj:f,name:"enabled"},B:{action:function(e){i(_,"disabled",e)}},name:"enabled > undefined"}),b.on("value",function(e){try{s.onValueChanged.call(f,e)}catch(e){console.error('Exception in function behind "onValueChanged" of module "mod/tfw.view.textbox.js" for attribute "value"!'),console.error(e)}}),b.on("width",function(e){C.$.style.width=e}),w.class="tfw-view-textbox",A.class="head thm-fg thm-bgPL",C.class="body",_.class="thm-fg",x.class="foot",E.class="bottom thm-bgSD",V.class="completion thm-fg thm-bg2 thm-ele4",b.set("label",t(e,"label","")),b.set("type",t(e,"type","text")),b.set("wide",t(e,"wide",!1)),b.set("focus",t(e,"focus",!1)),b.set("enabled",t(e,"enabled",!0)),b.set("visible",t(e,"visible",!0)),b.set("width",t(e,"width","auto")),b.set("list",e.list),b.set("validator",t(e,"validator","")),b.set("valid",t(e,"valid",!1)),b.set("value",t(e,"value","")),b.set("maxLength",t(e,"maxLength",999)),b.fire("label"),b.fire("type"),b.fire("wide"),b.fire("focus"),b.fire("enabled"),b.fire("visible"),b.fire("width"),b.fire("list"),b.fire("validator"),b.fire("valid"),b.fire("value"),b.fire("maxLength"),o.addClass(this,"view","custom")}catch(e){throw console.error("mod/tfw.view.textbox.js",e),Error('Instantiation error in XJS of "mod/tfw.view.textbox.js":\n'+e)}}}()}catch(e){throw Error('Definition error in XJS of "mod/tfw.view.textbox.js"\n'+e)}t.exports._=o}),require("light-saber.saber-plasma",function(e,t){function n(){for(var e,t=2*Math.PI/12,n=[[0,.91],[.02,.9],[.03,.89],[.02,0]],r=[0,n[0][1],0],i=[],o=1;o<n.length;o++){e=n[o];for(var a=0;a<12;a++){var s=t*a,l=_slicedToArray(e,2),c=l[0],u=l[1],f=c*Math.cos(s),h=c*Math.sin(s);r.push(f,u,h)}}for(var d=0;d<12;d++)i.push(d+1,0,(d+1)%12+1);for(var p=0;p<n.length-2;p++)for(var m=1+12*p,v=m+12,g=0;g<12;g++){var y=m+g,b=v+g,w=v+(g+1)%12,A=m+(g+1)%12;i.push(y,w,b),i.push(y,A,w)}return{arrayVert:new Float32Array(r),arrayElem:new Uint16Array(i)}}var r={vert:"// Perspective\r\nuniform mat4 uniProjection;\r\n// Rotation de la multiball.\r\nuniform mat4 uniRotation;\r\n// Translation.\r\nuniform vec4 uniTranslation;\r\n\r\n// Coordonnées du centre du modèle.\r\nattribute vec3 attPoint;\r\n\r\nvoid main() {\r\n  // Rotation, translation et projection en perspective.\r\n  vec4 vertex = uniRotation * vec4( attPoint, 1 ) + uniTranslation;\r\n  gl_Position = uniProjection * vertex;\r\n}\r\n",frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\r\n    precision highp float;\r\n#else\r\n    precision mediump float;\r\n#endif\r\n\r\nuniform vec4 uniColor;\r\n\r\nvoid main() {\r\n  gl_FragColor = uniColor;\r\n}\r\n"},i=e("webgl.math").m4,o=e("light-saber.colors"),a=e("webgl.program"),s=function(){function e(t){_classCallCheck(this,e),this.gl=t,this.prg=new a(t,{vert:r.vert,frag:r.frag}),this.buffVert=t.createBuffer(),this.buffElem=t.createBuffer();var s=n(),l=s.arrayVert,c=s.arrayElem;this.arrayVert=l,this.arrayElem=c,this.countElem=c.length,console.info("arrayVert, arrayElem=",l,c),t.bindBuffer(t.ARRAY_BUFFER,this.buffVert),t.bufferData(t.ARRAY_BUFFER,l,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffElem),t.bufferData(t.ELEMENT_ARRAY_BUFFER,c,t.STATIC_DRAW),this.projection=i.identity(),this.rotation=i.identity(),this.translation=new Float32Array([0,0,0,0]),this.color=o.PLASMA}return _createClass(e,[{key:"paint",value:function(){var e=this.gl,t=this.prg,n=this.projection,r=this.rotation,i=this.translation,o=this.buffVert,a=this.countElem;t.use(),e.bindBuffer(e.ARRAY_BUFFER,this.buffVert),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.buffElem),t.$uniProjection=n,t.$uniRotation=r,t.$uniTranslation=i,t.$uniColor=this.color,e.enable(e.CULL_FACE),e.enable(e.DEPTH_TEST),e.cullFace(e.BACK),t.bindAttribs(o,"attPoint"),e.drawElements(e.TRIANGLES,a,e.UNSIGNED_SHORT,0)}},{key:"destroy",value:function(){var e=this.gl;e.deleteBuffer(this.buffVert),e.deleteBuffer(this.buffElem)}}]),e}();t.exports=s,t.exports._=function(){return""}}),require("webgl.program",function(e,t){function n(e,t,n){if("string"!=typeof t.vert)throw Error("[webgl.program] Missing attribute `vert` in argument `codes`!");if("string"!=typeof t.frag)throw Error("[webgl.program] Missing attribute `frag` in argument `codes`!");t=o(t,n),this.gl=e,Object.freeze(this.gl),this.BPE=p,Object.freeze(this.BPE),this._typesNamesLookup=f(e);var a=e.createProgram();e.attachShader(a,u(e,t.vert)),e.attachShader(a,c(e,t.frag)),e.linkProgram(a),this.program=a,Object.freeze(this.program),this.use=function(){e.useProgram(a)},this.use(),r(this,e,a),i(this,e,a)}function r(e,t,n){var r,i,o={},a=t.getProgramParameter(n,t.ACTIVE_ATTRIBUTES);for(r=0;r<a;r++)i=t.getActiveAttrib(n,r),i.typeName=e.getTypeName(i.type),i.length=h(t,i),i.location=t.getAttribLocation(n,i.name),console.info("item=",i),o[i.name]=i;e.attribs=o,Object.freeze(e.attribs)}function i(e,t,n){var r,i,o={},l=t.getProgramParameter(n,t.ACTIVE_UNIFORMS);for(r=0;r<l;r++)i=t.getActiveUniform(n,r),o[i.name]=t.getUniformLocation(n,i.name),Object.defineProperty(e,"$"+i.name,{set:a(t,i,o[i.name],e._typesNamesLookup),get:s(i),enumerable:!0,configurable:!1});e.uniforms=o,Object.freeze(e.uniforms)}function o(e,t){var n,r,i={};for(n in e)r=e[n],i[n]=r.split("\n").map(function(e){if("#include"!=e.trim().substr(0,8))return e;var n=e.indexOf("#include")+8,r=e.substr(n).trim();-1<"'<\"".indexOf(r.charAt(0))&&(r=r.substr(1,r.length-2));var i=t[r];if("string"!=typeof i)throw console.error("Include <"+r+"> not found in ",t),Error("Include not found in shader: "+r);return i}).join("\n");return i}function a(e,t,n,r){var i="_$"+t.name;switch(t.type){case e.BYTE:case e.UNSIGNED_BYTE:case e.SHORT:
case e.UNSIGNED_SHORT:case e.INT:case e.UNSIGNED_INT:case e.SAMPLER_2D:return 1==t.size?function(t){e.uniform1i(n,t),this[i]=t}:function(t){e.uniform1iv(n,t),this[i]=t};case e.FLOAT:return 1==t.size?function(t){e.uniform1f(n,t),this[i]=t}:function(t){e.uniform1fv(n,t),this[i]=t};case e.FLOAT_VEC2:if(1==t.size)return function(t){e.uniform2fv(n,t),this[i]=t};throw Error("[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_VEC2 in uniform `"+t.name+"'!'");case e.FLOAT_VEC3:if(1==t.size)return function(t){e.uniform3fv(n,t),this[i]=t};throw Error("[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_VEC3 in uniform `"+t.name+"'!'");case e.FLOAT_VEC4:if(1==t.size)return function(t){e.uniform4fv(n,t),this[i]=t};throw Error("[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_VEC4 in uniform `"+t.name+"'!'");case e.FLOAT_MAT3:if(1==t.size)return function(t){e.uniformMatrix3fv(n,!1,t),this[i]=t};throw Error("[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_MAT3 in uniform `"+t.name+"'!'");case e.FLOAT_MAT4:if(1==t.size)return function(t){e.uniformMatrix4fv(n,!1,t),this[i]=t};throw Error("[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_MAT4 in uniform `"+t.name+"'!'");default:throw Error("[webgl.program.createWriter] Don't know how to deal with uniform `"+t.name+"` of type "+r[t.type]+"!")}}function s(e){var t="_$"+e.name;return function(){return this[t]}}function l(e,t,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(console.log(n),console.error("An error occurred compiling the shader: "+t.getShaderInfoLog(r)),null)}function c(e,t){return l(e.FRAGMENT_SHADER,e,t)}function u(e,t){return l(e.VERTEX_SHADER,e,t)}function f(e){var t,n,r={};for(t in e)"number"==typeof(n=e[t])&&(r[n]=t);return r}function h(e,t){switch(t.type){case e.FLOAT_VEC4:return 4;case e.FLOAT_VEC3:return 3;case e.FLOAT_VEC2:return 2;case e.FLOAT:return 1;default:throw"[webgl.program:getSize] I don't know the size of the attribute '"+t.name+"' because I don't know the type "+getTypeName(t.type)+"!"}}var d=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}(),p=(new Float32Array).BYTES_PER_ELEMENT;n.prototype.getTypeName=function(e){return this._typesNamesLookup[e]},n.prototype.bindAttribs=function(e){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e);var n=Array.prototype.slice.call(arguments,1),r=0;n.forEach(function(e){var t=this.attribs[e];if(!t)throw'Cannot find attribute "'+e+'"!\nIt may be not active because unused in the shader.\nAvailable attributes are: '+Object.keys(this.attribs).map(function(e){return'"'+e+'"'}).join(", ");r+=t.size*t.length*p},this);var i=0;n.forEach(function(e){var n=this.attribs[e];t.enableVertexAttribArray(n.location),t.vertexAttribPointer(n.location,n.size*n.length,t.FLOAT,!1,r,i),i+=n.size*n.length*p},this)},t.exports=n,t.exports._=d}),require("light-saber.colors",function(e,t,n){n.PLASMA=new Float32Array([1,.6,.4,1]),n.PLASMA=new Float32Array([.4,1,.4,1]),t.exports._=function(){return""}}),require("webgl.filter.gaussian-blur",function(e,t){function n(e,t,n){var o=n?r:i,s=a.computeBinomialCoeffs(e+4),l=s.slice(2,e+2),c=l.reduce(function(e,t){return e+t}),u=l.map(function(e){return e*t/c}),f=[],h=Math.floor(e/2);1==e%2&&f.push(o(0,u[h]));for(var d=0;d<h;d+=2){var p=u[d],m=u[d+1],v=e/2-d-2*m/(p+m),g=p+m;f.push(o(v,g),o(-v,g))}return"".concat("#ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n#else\n    precision mediump float;\n#endif\n\nuniform sampler2D uniTexture;\nuniform float uniStep;\n\nvarying vec2 varUV;\n\nvoid main() {\n    gl_FragColor = ").concat(f.join(" +\n        "),";\n}")}function r(e,t){return 0===e?"texture2D( uniTexture, varUV ) * ".concat(t):"texture2D( uniTexture, vec2(varUV.x + uniStep * ".concat(e,", varUV.y) ) * ").concat(t)}function i(e,t){return 0===e?"texture2D( uniTexture, varUV ) * ".concat(t):"texture2D( uniTexture, vec2(varUV.x, varUV.y + uniStep * ".concat(e,") ) * ").concat(t)}var o=e("webgl.filter.base"),a=e("webgl.math"),s=function(e){function t(e){var r,i=e.gl,o=e.texture,a=e.size,s=void 0===a?11:a,l=e.energy,c=void 0===l?1:l,u=e.width,f=void 0===u?-1:u,h=e.height,d=void 0===h?-1:h,p=e.horizontal,m=void 0===p||p;return _classCallCheck(this,t),r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,i,n(s,c,m))),r.gl=i,r.size=s,r.energy=c,r.texture=o,r.width=0<f?f:i.canvas.width,r.height=0<d?d:i.canvas.height,r.horizontal=m,r}return _inherits(t,e),_createClass(t,[{key:"paint",value:function(e,n){var r=this.gl,i=this.prg,o=this.horizontal,a=this.texture,s=this.width,l=this.height;i.use(),i.$uniTexture=0,r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,a),i.$uniStep=1/(o?s:l),_get(_getPrototypeOf(t.prototype),"paint",this).call(this,e,n)}}]),t}(o);t.exports=s,t.exports._=function(){return""}}),require("webgl.filter.base",function(e,t){var n={vert:"attribute vec2 attXY;\r\nattribute vec2 attUV;\r\n\r\nvarying vec2 varUV;\r\n\r\nvoid main() {\r\n    varUV = attUV;\r\n    gl_Position = vec4( attXY, 0, 1);\r\n}\r\n"},r=e("webgl.program"),i=function(){function e(t,i){_classCallCheck(this,e),this.gl=t,this.prg=new r(t,{vert:n.vert,frag:i}),this.buffVert=t.createBuffer();var o=new Float32Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]);t.bindBuffer(t.ARRAY_BUFFER,this.buffVert),t.bufferData(t.ARRAY_BUFFER,o,t.STATIC_DRAW)}return _createClass(e,[{key:"paint",value:function(e){var t=this.gl,n=this.prg,r=this.buffVert;n.use(),n.$uniTime=e,t.bindBuffer(t.ARRAY_BUFFER,this.buffVert),n.bindAttribs(r,"attXY","attUV"),t.drawArrays(t.TRIANGLE_STRIP,0,4)}}]),e}();t.exports=i,t.exports._=function(){return""}}),require("light-saber.saber-hilt",function(e,t){function n(){for(var e=2*Math.PI/12,t=[[0,0],[.05,.02],[.02,0],[.03,-.1],[.03,-.15],[.02,-.25],[.03,-.26],[0,-.27]],n=[0,t[0][1],0,0,1,0],i=[],o=1;o<t.length-1;o++)for(var a=t[o-1],s=t[o],l=t[o+1],c=0;c<12;c++){var u=e*c,f=_slicedToArray(a,2),h=f[0],d=f[1],p=h*Math.cos(u),m=h*Math.sin(u),v=_slicedToArray(s,2),g=v[0],y=v[1],b=g*Math.cos(u),w=g*Math.sin(u),A=_slicedToArray(l,2),C=A[0],_=A[1],x=C*Math.cos(u),E=C*Math.sin(u),L=r(p,d,m,b,y,w,x,_,E),V=_slicedToArray(L,3),T=V[0],H=V[1],M=V[2];n.push(b,y,w,T,H,M)}n.push(0,t[t.length-1][1],0,0,-1,0);for(var R=0;R<12;R++)i.push(R+1,0,(R+1)%12+1);for(var P=0;P<t.length-3;P++)for(var k=1+12*P,S=k+12,D=0;D<12;D++){var O=k+D,j=S+D,I=S+(D+1)%12,B=k+(D+1)%12;i.push(O,I,j),i.push(O,B,I)}for(var F=Math.floor(n.length/6)-1,N=F-12,U=0;U<12;U++)i.push(F,N+U,N+(U+1)%12);return{arrayVert:new Float32Array(n),arrayElem:new Uint16Array(i)}}function r(e,t,n,r,i,o,a,s,l){var c=e-r,u=t-i,f=n-o,h=1/Math.sqrt(c*c+u*u+f*f),d=a-r,p=s-i,m=l-o,v=1/Math.sqrt(d*d+p*p+m*m),g=h*c+v*d,y=h*u+v*p,b=h*f+v*m,w=1/Math.sqrt(g*g+y*y+b*b),A=g*w,C=y*w,_=b*w;return 0<r*A+i*C+o*_?[A,C,_]:[-A,-C,-_]}var i={vert:"// Perspective\r\nuniform mat4 uniProjection;\r\n// Rotation de la multiball.\r\nuniform mat4 uniRotation;\r\n// Translation.\r\nuniform vec4 uniTranslation;\r\n\r\n// Coordonnées du centre du modèle.\r\nattribute vec3 attPoint;\r\n// Vecteur normal en ce point.\r\nattribute vec3 attNormal;\r\n\r\nconst vec3 COLOR = vec3(0.4, 0.2, 0.1);\r\nconst vec3 LIGHT = normalize(vec3(.5, -.5, -1));\r\n\r\nvarying vec3 varColor;\r\n\r\nfloat ramp(vec3 ray, float minValue, float maxValue) {\r\n    float diff = maxValue - minValue;\r\n    float alpha = 0.5 * (ray.z + 1.0);\r\n    return minValue + alpha * alpha * diff;\r\n}\r\n\r\nvoid main() {\r\n  // Rotation, translation et projection en perspective.\r\n  vec4 vertex = uniRotation * vec4( attPoint, 1 ) + uniTranslation;\r\n  gl_Position = uniProjection * vertex;\r\n\r\n  vec4 normal = uniRotation * vec4( attNormal, 1 );\r\n  vec3 ray = reflect(LIGHT, normal.xyz);\r\n  float lightPower = ramp(ray, 0.1, 5.0);\r\n  float ring = abs(cos(attPoint.y * 15.0));\r\n\r\n  varColor = COLOR * ((ring + 1.0) * lightPower);\r\n}\r\n",frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\r\n    precision highp float;\r\n#else\r\n    precision mediump float;\r\n#endif\r\n\r\nvarying vec3 varColor;\r\n\r\nvoid main() {\r\n  gl_FragColor = vec4( varColor, 1.0 );\r\n}\r\n"},o=e("webgl.math").m4,a=e("webgl.program"),s=function(){function e(t){_classCallCheck(this,e),this.gl=t,this.prg=new a(t,{vert:i.vert,frag:i.frag}),this.buffVert=t.createBuffer(),this.buffElem=t.createBuffer();var r=n(),s=r.arrayVert,l=r.arrayElem;this.arrayVert=s,this.arrayElem=l,this.countElem=l.length,t.bindBuffer(t.ARRAY_BUFFER,this.buffVert),t.bufferData(t.ARRAY_BUFFER,s,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffElem),t.bufferData(t.ELEMENT_ARRAY_BUFFER,l,t.STATIC_DRAW),this.projection=o.identity(),this.rotation=o.identity(),this.translation=new Float32Array([0,-.1,-1,0])}return _createClass(e,[{key:"paint",value:function(){var e=this.gl,t=this.prg,n=this.projection,r=this.rotation,i=this.translation,o=this.buffVert,a=this.countElem;t.use(),e.bindBuffer(e.ARRAY_BUFFER,this.buffVert),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.buffElem),t.$uniProjection=n,t.$uniRotation=r,t.$uniTranslation=i,e.enable(e.CULL_FACE),e.enable(e.DEPTH_TEST),e.cullFace(e.BACK),t.bindAttribs(o,"attPoint","attNormal"),e.drawElements(e.TRIANGLES,a,e.UNSIGNED_SHORT,0)}},{key:"destroy",value:function(){var e=this.gl;e.deleteBuffer(this.buffVert),e.deleteBuffer(this.buffElem)}}]),e}();t.exports=s,t.exports._=function(){return""}}),require("webgl.resize",function(e,t){var n=function(){function t(){return r(n,arguments)}var n={en:{},fr:{}},r=e("$").intl;return t.all=n,t}();t.exports=function(e,t){var n=void 0===t?window.devicePixelRatio:t,r=Math.floor(e.canvas.clientWidth*n),i=Math.floor(e.canvas.clientHeight*n);return!(e.canvas.width===r&&e.canvas.height===i||(e.canvas.width=r,e.canvas.height=i,e.viewport(0,0,r,i),0))},t.exports._=n}),require("light-saber.filter",function(e,t){var n={frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\r\n    precision highp float;\r\n#else\r\n    precision mediump float;\r\n#endif\r\n\r\nuniform sampler2D uniTexture;\r\nuniform vec4 uniColor;\r\n\r\nvarying vec2 varUV;\r\n\r\nvoid main() {\r\n    vec4 color = texture2D( uniTexture, varUV );\r\n    if( distance( color, uniColor ) < 0.1 ) gl_FragColor = color;\r\n    else discard;\r\n}\r\n"},r=e("light-saber.colors"),i=e("light-saber.image-processor"),o=function(){function e(t){_classCallCheck(this,e),this.gl=t,this.imageProcessor=new i(t,n.frag),this.prg=this.imageProcessor.prg,this.color=r.PLASMA}return _createClass(e,[{key:"paint",value:function(e,t){var n=this.gl,r=this.prg,i=this.imageProcessor,o=this.texture;r.use(),r.$uniTexture=0,r.$uniColor=this.color,n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,o),i.paint(e,t)}}]),e}();t.exports=o,t.exports._=function(){return""}}),require("light-saber.image-processor",function(e,t){var n={vert:"attribute vec2 attXY;\r\nattribute vec2 attUV;\r\n\r\nvarying vec2 varUV;\r\n\r\nvoid main() {\r\n    varUV = attUV;\r\n    gl_Position = vec4( attXY, 0, 1);\r\n}\r\n"},r=e("webgl.program"),i=function(){function e(t,i){_classCallCheck(this,e),this.gl=t,this.prg=new r(t,{vert:n.vert,frag:i}),this.buffVert=t.createBuffer();var o=new Float32Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]);t.bindBuffer(t.ARRAY_BUFFER,this.buffVert),t.bufferData(t.ARRAY_BUFFER,o,t.STATIC_DRAW)}return _createClass(e,[{key:"paint",value:function(){var e=this.gl,t=this.prg,n=this.buffVert;t.use(),e.bindBuffer(e.ARRAY_BUFFER,this.buffVert),t.bindAttribs(n,"attXY","attUV"),e.drawArrays(e.TRIANGLE_STRIP,0,4)}}]),e}();t.exports=i,t.exports._=function(){return""}}),require("webgl.filter.addition",function(e,t){var n={frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\r\n    precision highp float;\r\n#else\r\n    precision mediump float;\r\n#endif\r\n\r\n\r\nuniform sampler2D uniTex0;\r\nuniform sampler2D uniTex1;\r\nuniform float uniEnergy0;\r\nuniform float uniEnergy1;\r\n\r\nvarying vec2 varUV;\r\n\r\nvoid main() {\r\n    vec4 color0 = texture2D( uniTex0, varUV );\r\n    vec4 color1 = texture2D( uniTex1, varUV );\r\n    gl_FragColor = uniEnergy0 * color0 + uniEnergy1 * color1;\r\n}\r\n"},r=e("webgl.filter.base"),i=function(e){function t(e){var r,i=e.gl,o=e.texture0,a=e.texture1,s=e.energy0,l=void 0===s?1:s,c=e.energy1,u=void 0===c?1:c;return _classCallCheck(this,t),r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,i,n.frag)),r.gl=i,r.texture0=o,r.texture1=a,r.energy0=l,r.energy1=u,r}return _inherits(t,e),_createClass(t,[{key:"paint",value:function(e,n){var r=this.gl,i=this.prg,o=this.texture0,a=this.texture1,s=this.energy0,l=this.energy1;i.use(),i.$uniTex0=0,r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,o),i.$uniEnergy0=s,i.$uniTex1=1,r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,a),i.$uniEnergy1=l,_get(_getPrototypeOf(t.prototype),"paint",this).call(this,e,n)}}]),t}(r);t.exports=i,t.exports._=function(){return""}});
//# sourceMappingURL=light-saber.html.map