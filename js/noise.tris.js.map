{"version":3,"sources":["tris.js"],"names":["require","module","exports","_","D","X","intl","arguments","all","GLOBAL","CODE_BEHIND","init","paint","Dom","Resize","Program","canvas","$elements","$","gl","getContext","preserveDrawingBuffer","prg","vert","frag","buffVert","createBuffer","arrayVert","Float32Array","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","texture","createRandomTexture","requestAnimationFrame","bind","time","use","$uniTime","$uniCenterX","width","$uniCenterY","height","$uniLoop","loop","$uniAmpl","ampl","$uniFreq","freq","$uniAmplAttenuation","amplAtt","$uniFreqAttenuation","freqAtt","$uniRandom","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","bindAttribs","drawArrays","TRIANGLE_STRIP","data","createTexture","i","xRaw","Math","random","yRaw","len","sqrt","invlen","x","floor","y","z","push","texParameteri","TEXTURE_WRAP_S","REPEAT","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","texImage2D","RGBA","UNSIGNED_BYTE","Uint8Array","PM","Tag","Link","View","Converters","TfwViewSlider","TfwViewTextbox","ensureCodeBehind","defVal","args","attName","attValue","undefined","conv_integer","get","conv_float","ViewClass","that","pm","create","cast","e_","e_canvas","e_1","min","max","e_2","e_3","label","e_4","e_5","e_6","add","Object","defineProperty","value","writable","enumerable","configurable","A","obj","name","B","on","v","call","ex","console","error","class","set","fire","addClass","Error"],"mappings":"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","sourcesContent":["/** @module noise.tris */require( 'noise.tris', function(require, module, exports) { var _=function(){var D={\"en\":{\"ampl\":\"Amplitude\",\"ampl-att\":\"Amp. atténuation\",\"freq\":\"Zoom\",\"freq-att\":\"Zoom atténuation\"},\"fr\":{\"ampl\":\"Amplitude\",\"ampl-att\":\"Amp. atténuation\",\"freq\":\"Échelle\",\"freq-att\":\"Éch. atténuation\"}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\r\n const GLOBAL = {\n  \"vert\": \"attribute vec2 attXY;\\r\\n\\r\\nvoid main() {\\r\\n    gl_Position = vec4( attXY, 0, 1);\\r\\n}\\r\\n\",\n  \"frag\": \"precision mediump float;\\r\\n\\r\\n\\r\\nuniform float uniTime;\\r\\nuniform float uniCenterX;\\r\\nuniform float uniCenterY;\\r\\nuniform sampler2D uniRandom;\\r\\n\\r\\nuniform float uniLoop;\\r\\nuniform float uniAmpl;\\r\\nuniform float uniFreq;\\r\\nuniform float uniAmplAttenuation;\\r\\nuniform float uniFreqAttenuation;\\r\\n\\r\\nconst vec3 BLUE = vec3( 0, .4, .687 );\\r\\nconst vec3 ORANGE = vec3( 1, .5, 0 );\\r\\n\\r\\nconst float INV = 1.0 / 32.0;\\r\\n\\r\\nconst float ZOOM = 0.01;\\r\\n\\r\\nconst float SQRT2 = 1.4142135623730951;\\r\\nconst float SQRT3 = 1.7320508075688772;\\r\\nconst float SQRT6 = 2.449489742783178;\\r\\n\\r\\nconst mat2 SKEW = mat2(2.7320508075688772, 0.7320508075688772, 0.7320508075688772, 2.7320508075688772);\\r\\nconst mat2 UNSKEW = mat2(0.39433756729740643, -0.10566243270259355, -0.10566243270259355, 0.39433756729740643);\\r\\n\\r\\nconst float RADIUS = .5 / SQRT3;\\r\\nconst vec2 UP = vec2(-0.25881904510252063, 0.9659258262890683) * RADIUS * SQRT2;\\r\\nconst vec2 DOWN = vec2(0.9659258262890683, -0.2588190451025207) * RADIUS * SQRT2;\\r\\n\\r\\n\\r\\nvec3 gradient( vec2 pt, float seed ) {\\r\\n  vec2 coord = mat2(seed, 1. - seed, 1. + seed, 1) * pt;\\r\\n  return texture2D( uniRandom, coord ).xyz;\\r\\n}\\r\\n\\r\\n\\r\\nfloat simplexNoise(vec2 coords, float seed) {\\r\\n  vec2 pos = SKEW * coords;\\r\\n  float x = pos.x;\\r\\n  float y = pos.y;\\r\\n\\r\\n  float u = fract(x);\\r\\n  float v = fract(y);\\r\\n\\r\\n  x = (x - u) * INV;\\r\\n  y = (y - v) * INV;\\r\\n\\r\\n  vec2 posM = coords;\\r\\n  \\r\\n  vec2 posA = UNSKEW*(pos - vec2(u,v));\\r\\n  vec3 rndA = gradient( vec2( x, y ), seed );\\r\\n  vec2 vecAM = posA - posM;\\r\\n  \\r\\n  vec2 posB = posA + RADIUS;\\r\\n  vec3 rndB = gradient( vec2( x + INV, y + INV ), seed );\\r\\n  vec2 vecBM = posB - posM;\\r\\n\\r\\n  vec2 posC;\\r\\n  vec3 rndC;  \\r\\n  if( u < v ) {\\r\\n    posC = posA + UP;\\r\\n    rndC = gradient( vec2( x, y + INV ), seed );\\r\\n  } else {\\r\\n    posC = posA + DOWN;\\r\\n    rndC = gradient( vec2( x + INV, y ), seed );\\r\\n  }\\r\\n  vec2 vecCM = posC - posM;\\r\\n\\r\\n  vec2 vecCA = posA - posC;\\r\\n  vec2 vecCB = posB - posC;\\r\\n\\r\\n  // Calcul des produits scalaires pour chaque sommet.\\r\\n  float vA = dot(2. * rndA.xy - 1., vecAM);\\r\\n  float vB = dot(2. * rndB.xy - 1., vecBM);\\r\\n  float vC = dot(2. * rndC.xy - 1., vecCM);\\r\\n  // Calcul des poids.\\r\\n  // r2 est une valeur empirique. Des valeurs éloignées de .16 feront apparaître la grille.\\r\\n  float r2 = .16;\\r\\n  float wA = max(0., r2 - dot(vecAM, vecAM));\\r\\n  float wB = max(0., r2 - dot(vecBM, vecBM));\\r\\n  float wC = max(0., r2 - dot(vecCM, vecCM));\\r\\n  // On élève chaque poids à la puissance 4.\\r\\n  wA *= wA; wA *= wA;\\r\\n  wB *= wB; wB *= wB;\\r\\n  wC *= wC; wC *= wC;\\r\\n  \\r\\n  float value = wA*vA + wB*vB + wC*vC;\\r\\n  // Normaliser `value` pour bien étaler entre [-1 et 1].\\r\\n  // Là encore, c'est une valeur empirique.\\r\\n  value *= 10000.;\\r\\n\\r\\n  return value;\\r\\n}\\r\\n\\r\\nvoid main() {\\r\\n  vec2 coords = (gl_FragCoord.xy - vec2(uniCenterY, uniCenterY)) * ZOOM;\\r\\n  \\r\\n  float value = 0.;\\r\\n  float freq = uniFreq;\\r\\n  float ampl = uniAmpl;\\r\\n  float attF = uniFreqAttenuation;\\r\\n  float attA = uniAmplAttenuation;\\r\\n  for( int i=0; i<20; i++ ) {\\r\\n    if( float(i) > uniLoop ) break;\\r\\n    value += ampl * simplexNoise(coords * freq, 1. + float(i*i) * .1);\\r\\n    ampl *= attA;\\r\\n    freq *= attF;\\r\\n  }\\r\\n  \\r\\n  vec3 color;\\r\\n  if( value < 0. ) color = -value * BLUE;\\r\\n  else color = value * ORANGE;\\r\\n  \\r\\n  gl_FragColor = vec4( color, 1 );\\r\\n}\\r\\n\"};\n  \"use strict\";\r\n\r\n\r\n/* exported CODE_BEHIND */\r\nconst CODE_BEHIND = { init, paint };\r\n\r\n\r\nconst Dom = require(\"dom\"),\r\n      Resize = require(\"webgl.resize\"),\r\n      Program = require(\"webgl.program\");\r\n\r\n\r\n/**\r\n * This function is called by the XJS code.\r\n *\r\n * @this Tris\r\n */\r\nfunction init(  ) {\r\n    const canvas = this.$elements.canvas.$,\r\n          gl = canvas.getContext(\"webgl\", { preserveDrawingBuffer: false });\r\n\r\n    this.prg = new Program(gl, {\r\n        vert: GLOBAL.vert,\r\n        frag: GLOBAL.frag\r\n    });\r\n    this.buffVert = gl.createBuffer();\r\n    const arrayVert = new Float32Array([ -1, -1, +1, -1, -1, +1, +1, +1 ]);\r\n\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.buffVert);\r\n    gl.bufferData(gl.ARRAY_BUFFER, arrayVert, gl.STATIC_DRAW);\r\n\r\n    this.gl = gl;\r\n    this.texture = createRandomTexture( gl );\r\n    requestAnimationFrame( paint.bind( this ) );\r\n}\r\n\r\n\r\nfunction paint( time ) {\r\n    requestAnimationFrame( paint.bind( this ) );\r\n\r\n    const { gl, prg, buffVert, texture } = this;\r\n    if( !gl ) return;\r\n    Resize( gl );\r\n\r\n    prg.use();\r\n    prg.$uniTime = time;\r\n    prg.$uniCenterX = gl.canvas.width * 0.5;\r\n    prg.$uniCenterY = gl.canvas.height * 0.5;\r\n\r\n    prg.$uniLoop = this.loop - .5;\r\n    prg.$uniAmpl = this.ampl;\r\n    prg.$uniFreq = this.freq;\r\n    prg.$uniAmplAttenuation = this.amplAtt;\r\n    prg.$uniFreqAttenuation = this.freqAtt;\r\n    prg.$uniRandom = 0;\r\n    \r\n    gl.activeTexture( gl.TEXTURE0 );\r\n    gl.bindTexture( gl.TEXTURE_2D, texture );\r\n\r\n    prg.bindAttribs( buffVert, \"attXY\" );\r\n    gl.bindBuffer( gl.ARRAY_BUFFER, buffVert );\r\n    gl.drawArrays( gl.TRIANGLE_STRIP, 0, 4 );\r\n}\r\n\r\n//#(texture)\r\nfunction createRandomTexture( gl ) {\r\n    // Les coordonnées R, G, B et A sont des entiers entre 0 et 255.\r\n    // On va créer des vecteurs normés et on stoquera la coordonnée X\r\n    // dans R et la coordonnée Y dans G.\r\n    // Les coordonnées X et Y sont des nombres décimaux compris entre -1 et +1.\r\n    // Il faudra donc les transformer en nombres entiers entre 0 et 255.\r\n    const data = [];\r\n    const texture = gl.createTexture();\r\n    const width = 32;\r\n    const height = 32;\r\n\r\n    for( let i = 0; i < width * height; i++ ) {\r\n        const xRaw = Math.random() - 0.5,\r\n              yRaw = Math.random() - 0.5,\r\n              len = 2 * Math.sqrt( xRaw * xRaw + yRaw * yRaw ),\r\n              invlen = 256 / len,\r\n              x = Math.floor( 128 + invlen * xRaw ),\r\n              y = Math.floor( 128 + invlen * yRaw ),\r\n              z = Math.floor( Math.random() * 255 );\r\n        data.push( x, y, z, 255 );\r\n    }\r\n\r\n    gl.bindTexture(gl.TEXTURE_2D, texture);\r\n\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n\r\n    gl.texImage2D(\r\n        gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0,\r\n        gl.RGBA, gl.UNSIGNED_BYTE, new Uint8Array( data )\r\n    );\r\n\r\n    return texture;\r\n}\r\n//#(texture)\r\n\n\n\n//===============================\n// XJS:View autogenerated code.\ntry {\n  module.exports = function() {\n    //--------------------\n    // Dependent modules.\n    const $ = require('dom');\n    const PM = require('tfw.binding.property-manager');\n    const Tag = require('tfw.view').Tag;\n    const Link = require('tfw.binding.link');\n    const View = require('tfw.view');;\n    const Converters = require('tfw.binding.converters');\n    const TfwViewSlider = require('tfw.view.slider');\n    const TfwViewTextbox = require('tfw.view.textbox');\n    //-------------------------------------------------------\n    // Check if needed functions are defined in code behind.\n    View.ensureCodeBehind( CODE_BEHIND, \"paint\", \"init\" );\n    //-------------------\n    // Global functions.\n    function defVal(args, attName, attValue) { return args[attName] === undefined ? attValue : args[attName]; };\n    //-------------------\n    // Global variables.\n    const conv_integer = Converters.get('integer');\n    const conv_float = Converters.get('float');\n    //-------------------\n    // Class definition.\n    const ViewClass = function( args ) {\n      try {\n        if( typeof args === 'undefined' ) args = {};\n        this.$elements = {};\n                const that = this;\n        const pm = PM(this);\n        //--------------------\n        // Create attributes.\n        pm.create(\"loop\", { cast: conv_integer(0) });\n        pm.create(\"freq\", { cast: conv_float(0) });\n        pm.create(\"ampl\", { cast: conv_float(0) });\n        pm.create(\"freqAtt\", { cast: conv_float(0) });\n        pm.create(\"amplAtt\", { cast: conv_float(0) });\n        //------------------\n        // Create elements.\n        const e_ = new Tag('DIV', [\"class\"]);\n        const e_canvas = new Tag('CANVAS');\n        this.$elements.canvas = e_canvas;\n        const e_1 = new TfwViewSlider({\n          min: 0,\n          max: 20\n        });\n        const e_2 = new Tag('DIV', [\"class\"]);\n        const e_3 = new TfwViewTextbox({ label: _(\"freq\") });\n        const e_4 = new TfwViewTextbox({ label: _(\"ampl\") });\n        const e_5 = new TfwViewTextbox({ label: _(\"freq-att\") });\n        const e_6 = new TfwViewTextbox({ label: _(\"ampl-att\") });\n        $.add( e_2, e_3, e_4, e_5, e_6 );\n        $.add( e_, e_canvas, e_1, e_2 );\n        //-----------------------\n        // Declare root element.\n        Object.defineProperty( this, '$', {\n          value: e_.$,\n          writable: false, \n          enumerable: false, \n          configurable: false\n        });\n        //-------\n        // Links\n        new Link({\n          A:{obj: that,\n              name: 'loop'},\n          B:{obj: e_1,\n              name: 'value'},\n          name:\"loop > e_1/value\"\n        });\n        new Link({\n          A:{obj: that,\n              name: 'freq'},\n          B:{obj: e_3,\n              name: 'value'},\n          name:\"freq > e_3/value\"\n        });\n        new Link({\n          A:{obj: that,\n              name: 'ampl'},\n          B:{obj: e_4,\n              name: 'value'},\n          name:\"ampl > e_4/value\"\n        });\n        new Link({\n          A:{obj: that,\n              name: 'freqAtt'},\n          B:{obj: e_5,\n              name: 'value'},\n          name:\"freq-att > e_5/value\"\n        });\n        new Link({\n          A:{obj: that,\n              name: 'amplAtt'},\n          B:{obj: e_6,\n              name: 'value'},\n          name:\"ampl-att > e_6/value\"\n        });\n        //-----------------------\n        // On attribute changed.\n        pm.on(\"loop\", function(v) {\n          try {\n            CODE_BEHIND.paint.call( that, v );\n          }\n          catch( ex ) {\n            console.error(\n              'Exception in function behind \"paint\" of module \"mod/noise.tris.js\" for attribute \"loop\"!'\n            );\n            console.error( ex );\n          }\n        });\n        pm.on(\"freq\", function(v) {\n          try {\n            CODE_BEHIND.paint.call( that, v );\n          }\n          catch( ex ) {\n            console.error(\n              'Exception in function behind \"paint\" of module \"mod/noise.tris.js\" for attribute \"freq\"!'\n            );\n            console.error( ex );\n          }\n        });\n        pm.on(\"ampl\", function(v) {\n          try {\n            CODE_BEHIND.paint.call( that, v );\n          }\n          catch( ex ) {\n            console.error(\n              'Exception in function behind \"paint\" of module \"mod/noise.tris.js\" for attribute \"ampl\"!'\n            );\n            console.error( ex );\n          }\n        });\n        pm.on(\"freqAtt\", function(v) {\n          try {\n            CODE_BEHIND.paint.call( that, v );\n          }\n          catch( ex ) {\n            console.error(\n              'Exception in function behind \"paint\" of module \"mod/noise.tris.js\" for attribute \"freqAtt\"!'\n            );\n            console.error( ex );\n          }\n        });\n        pm.on(\"amplAtt\", function(v) {\n          try {\n            CODE_BEHIND.paint.call( that, v );\n          }\n          catch( ex ) {\n            console.error(\n              'Exception in function behind \"paint\" of module \"mod/noise.tris.js\" for attribute \"amplAtt\"!'\n            );\n            console.error( ex );\n          }\n        });\n        //----------------------\n        // Initialize elements.\n        e_.class = \"noise-tris\";\n        e_2.class = \"flex\";\n        //------------------------\n        // Initialize attributes.\n        pm.set(\"loop\", defVal(args, \"loop\", 1));\n        pm.set(\"freq\", defVal(args, \"freq\", 1));\n        pm.set(\"ampl\", defVal(args, \"ampl\", 1));\n        pm.set(\"freqAtt\", defVal(args, \"freqAtt\", 1.1));\n        pm.set(\"amplAtt\", defVal(args, \"amplAtt\", 0.8));\n        pm.fire(\"loop\");\n        pm.fire(\"freq\");\n        pm.fire(\"ampl\");\n        pm.fire(\"freqAtt\");\n        pm.fire(\"amplAtt\");\n        // Initialization.\n        CODE_BEHIND.init.call( this );\n        $.addClass(this, 'view', 'custom');\n\n      }\n      catch( ex ) {\n        console.error('mod/noise.tris.js', ex);\n        throw Error('Instantiation error in XJS of \"mod/noise.tris.js\":\\n' + ex)\n      }\n    };\n    return ViewClass;\n  }();\n}\ncatch( ex ) {\n  throw Error('Definition error in XJS of \"mod/noise.tris.js\"\\n' + ex);\n}\n\r\n\r\n\r\nmodule.exports._ = _;\n})"]}