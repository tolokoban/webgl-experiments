{"version":3,"sources":["tfw.color.js"],"names":["require","module","exports","_","D","X","intl","arguments","all","Color","prototype","luminance","stringify","parse","copy","hsl2rgb","rgb2hsl","INSTANCE","instance","staticParse","staticLuminance","newRGB","newRGBA","code","R","G","B","A","H","S","L","INV6","INV15","INV99","INV255","INV359","min","Math","max","delta","abs","chroma","x","shift","color","hexa2","_text","text","input","trim","toUpperCase","parseHexa","call","parseRGB","parseRGBA","parseHSL","charAt","length","parseInt","substr","isNaN","RX_RGB","m","exec","clamp01","RX_RGBA","parseFloat","RX_HSL","value","out","floor","toString","newColor","red","green","blue","alpha","v"],"mappings":"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","sourcesContent":["/** @module tfw.color */require( 'tfw.color', function(require, module, exports) { var _=function(){var D={\"en\":{},\"fr\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\r\n   \"use strict\";\r\n\r\n/**\r\n * @class Color\r\n * Fast color manipulations.\r\n * Attributes R  (red), G  (green), B  (blue), A  (alpha), H  (hue), S\r\n * (saturation), and L (luminance) are all floats between 0 and 1.\r\n */\r\nmodule.exports = Color;\r\n\r\n\r\n/**\r\n * Uses R, G and B.\r\n * @return  {float}  The  luminance  of  this color,  to  be  used  in\r\n * grayscale, for instance.\r\n */\r\nColor.prototype.luminance = luminance;\r\n\r\n/**\r\n * Uses R, G, B and A.\r\n * @return {string} CSS color format. For instance: `#FE1795DD`\r\n */\r\nColor.prototype.stringify = stringify;\r\n\r\n/**\r\n * @param {string} text - A CSS representation for this color.\r\n * @return {array} `[red, green, blue, alpha]` with every item between\r\n * 0 and 1.\r\n */\r\nColor.prototype.parse = parse;\r\n\r\n/**\r\n * @return {Color} A clone of this object\r\n */\r\nColor.prototype.copy = copy;\r\n\r\n/**\r\n * Read H,S,L and write R,G,B.\r\n */\r\nColor.prototype.hsl2rgb = hsl2rgb;\r\n\r\n/**\r\n * Read R,G,B and write H,S,L.\r\n */\r\nColor.prototype.rgb2hsl = rgb2hsl;\r\n\r\nconst INSTANCE = new Color();\r\nColor.instance = INSTANCE;\r\nColor.parse = staticParse;\r\nColor.luminance = staticLuminance;\r\n\r\n/**\r\n * @param {float} red - Red value between 0 and 1.\r\n * @param {float} green - Green value between 0 and 1.\r\n * @param {float} blue - Blue value between 0 and 1.\r\n * @return {Color} A new color.\r\n */\r\nColor.newRGB = newRGB;\r\n\r\n/**\r\n * @param {float} red - Red value between 0 and 1.\r\n * @param {float} green - Green value between 0 and 1.\r\n * @param {float} blue - Blue value between 0 and 1.\r\n * @param {float} alpha - Alpha value between 0 and 1.\r\n * @return {Color} A new color.\r\n */\r\nColor.newRGBA = newRGBA;\r\n\r\n\r\n/*\r\n *    ##################\r\n *    # Implementation #\r\n *    ##################\r\n */\r\n\r\n/**\r\n * @constructor\r\n * @param {string} code - CSS color code.\r\n */\r\nfunction Color( code ) {\r\n    this.R = 0;\r\n    this.G = 0;\r\n    this.B = 0;\r\n    this.A = 0;\r\n    this.H = 0;\r\n    this.S = 0;\r\n    this.L = 0;\r\n\r\n    if ( typeof code === 'string' ) {\r\n        this.parse( code );\r\n    }\r\n}\r\n\r\nconst\r\n    INV6 = 1 / 6,\r\n    INV15 = 1 / 15,\r\n    INV99 = 1 / 99,\r\n    INV255 = 1 / 255,\r\n    INV359 = 1 / 359;\r\n\r\n/**\r\n * Read R,G,B and write H,S,L.\r\n * @this Color\r\n * @returns {undefined}\r\n */\r\nfunction rgb2hsl() {\r\n    const\r\n        R = this.R,\r\n        G = this.G,\r\n        B = this.B,\r\n        min = Math.min( R, G, B ),\r\n        max = Math.max( R, G, B ),\r\n        delta = max - min;\r\n\r\n    this.L = 0.5 * ( max + min );\r\n\r\n    if ( delta < 0.000001 ) {\r\n        this.H = 0;\r\n        this.S = 0;\r\n    } else {\r\n        this.S = delta / ( 1 - Math.abs( ( 2 * this.L ) - 1 ) );\r\n        if ( max === R ) {\r\n            if ( G >= B ) {\r\n                this.H = INV6 * ( ( G - B ) / delta );\r\n            } else {\r\n                this.H = 1 - ( INV6 * ( ( B - G ) / delta ) );\r\n            }\r\n        } else if ( max === G ) {\r\n            this.H = INV6 * ( 2 + ( ( B - R ) / delta ) );\r\n        } else {\r\n            this.H = INV6 * ( 4 + ( ( R - G ) / delta ) );\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * @see https://en.wikipedia.org/wiki/HSL_and_HSV#Converting_to_RGB\r\n * @this Color\r\n * @returns {undefined}\r\n */\r\nfunction hsl2rgb() {\r\n    const\r\n        H = 6 * this.H,\r\n        S = this.S,\r\n        L = this.L,\r\n        chroma = ( 1 - Math.abs( 2 * L - 1 ) ) * S,\r\n        x = chroma * ( 1 - Math.abs( H % 2 - 1 ) );\r\n\r\n    let\r\n        R = 0,\r\n        G = 0,\r\n        B = 0;\r\n\r\n    if ( H < 3 ) {\r\n        if ( H < 1 ) {\r\n            R = chroma;\r\n            G = x;\r\n            B = 0;\r\n        } else if ( H < 2 ) {\r\n            R = x;\r\n            G = chroma;\r\n            B = 0;\r\n        } else {\r\n            // H == 2.\r\n            R = 0;\r\n            G = chroma;\r\n            B = x;\r\n        }\r\n    } else if ( H < 4 ) {\r\n        R = 0;\r\n        G = x;\r\n        B = chroma;\r\n    } else if ( H < 5 ) {\r\n        R = x;\r\n        G = 0;\r\n        B = chroma;\r\n    } else {\r\n        R = chroma;\r\n        G = 0;\r\n        B = x;\r\n    }\r\n\r\n    const shift = L - chroma * 0.5;\r\n    this.R = R + shift;\r\n    this.G = G + shift;\r\n    this.B = B + shift;\r\n}\r\n\r\n/**\r\n * @see https://en.wikipedia.org/wiki/Grayscale\r\n * @this Color\r\n * @returns {undefined}\r\n */\r\nfunction luminance() {\r\n    return ( 0.2126 * this.R ) + ( 0.7152 * this.G ) + ( 0.0722 * this.B );\r\n}\r\n\r\n/**\r\n * @this Color\r\n * @returns {string} String value of the color. `#fd45a7`.\r\n */\r\nfunction stringify() {\r\n    let color = hexa2( this.R * 255 ) + hexa2( this.G * 255 ) + hexa2( this.B * 255 );\r\n    if ( this.A < 1 ) {\r\n        color += hexa2( this.A * 255 );\r\n    }\r\n    return `#${color}`;\r\n}\r\n\r\n\r\n/**\r\n * @this Color\r\n * @param {string} _text - CSS color code.\r\n * @returns {boolean} Success?\r\n */\r\nfunction parse( _text ) {\r\n    const\r\n        text = typeof _text !== 'undefined' ? _text : '#000000',\r\n        input = text.trim().toUpperCase();\r\n    if ( parseHexa.call( this, input ) ) return true;\r\n    if ( parseRGB.call( this, input ) ) return true;\r\n    if ( parseRGBA.call( this, input ) ) return true;\r\n    if ( parseHSL.call( this, input ) ) return true;\r\n    // @TODO hsl and hsla.\r\n    return false;\r\n}\r\n\r\n\r\n/**\r\n * @this Color\r\n * @param {string} text - CSS color code.\r\n * @returns {boolean} Success?\r\n */\r\nfunction parseHexa( text ) {\r\n    if ( text.charAt( 0 ) !== '#' ) return false;\r\n    let\r\n        R = 0,\r\n        G = 0,\r\n        B = 0,\r\n        A = 1;\r\n\r\n    switch ( text.length ) {\r\n    case 4:\r\n        R = parseInt( text.charAt( 1 ), 16 ) * INV15;\r\n        G = parseInt( text.charAt( 2 ), 16 ) * INV15;\r\n        B = parseInt( text.charAt( 3 ), 16 ) * INV15;\r\n        break;\r\n    case 5:\r\n        R = parseInt( text.charAt( 1 ), 16 ) * INV15;\r\n        G = parseInt( text.charAt( 2 ), 16 ) * INV15;\r\n        B = parseInt( text.charAt( 3 ), 16 ) * INV15;\r\n        A = parseInt( text.charAt( 4 ), 16 ) * INV15;\r\n        break;\r\n    case 7:\r\n        R = parseInt( text.substr( 1, 2 ), 16 ) * INV255;\r\n        G = parseInt( text.substr( 3, 2 ), 16 ) * INV255;\r\n        B = parseInt( text.substr( 5, 2 ), 16 ) * INV255;\r\n        break;\r\n    case 9:\r\n        R = parseInt( text.substr( 1, 2 ), 16 ) * INV255;\r\n        G = parseInt( text.substr( 3, 2 ), 16 ) * INV255;\r\n        B = parseInt( text.substr( 5, 2 ), 16 ) * INV255;\r\n        A = parseInt( text.substr( 7, 2 ), 16 ) * INV255;\r\n        break;\r\n    default:\r\n    }\r\n\r\n    if ( isNaN( R ) || isNaN( G ) || isNaN( B ) || isNaN( A ) ) {\r\n        this.R = this.G = this.B = this.A = 0;\r\n    } else {\r\n        this.R = R;\r\n        this.G = G;\r\n        this.B = B;\r\n        this.A = A;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nconst RX_RGB = /^RGB[\\s\\(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/;\r\n\r\n/**\r\n * @this Color\r\n * @param   {string} text - `rgb(200, 140, 50)`\r\n * @returns {boolean} `true` if `text` is a valid `rgb()` syntax.\r\n */\r\nfunction parseRGB( text ) {\r\n    const m = RX_RGB.exec( text );\r\n    if ( !m ) return false;\r\n    this.R = clamp01( parseInt( m[ 1 ], 10 ) * INV255 );\r\n    this.G = clamp01( parseInt( m[ 2 ], 10 ) * INV255 );\r\n    this.B = clamp01( parseInt( m[ 3 ], 10 ) * INV255 );\r\n    this.A = 1;\r\n    return true;\r\n}\r\n\r\nconst RX_RGBA = /^RGBA[\\s\\(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)[^0-9\\.]+([0-9\\.]+)/;\r\n\r\n/**\r\n * @this Color\r\n * @param   {string} text - `rgba(200, 140, 50, 0.5)`\r\n * @returns {boolean} `true` if `text` is a valid `rgba()` syntax.\r\n */\r\nfunction parseRGBA( text ) {\r\n    const m = RX_RGBA.exec( text );\r\n    if ( !m ) return false;\r\n    this.R = clamp01( parseInt( m[ 1 ], 10 ) * INV255 );\r\n    this.G = clamp01( parseInt( m[ 2 ], 10 ) * INV255 );\r\n    this.B = clamp01( parseInt( m[ 3 ], 10 ) * INV255 );\r\n    this.A = clamp01( parseFloat( m[ 4 ] ) );\r\n    return true;\r\n}\r\n\r\nconst RX_HSL = /^HSL[\\s\\(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/;\r\n\r\n/**\r\n * @this Color\r\n * @param   {string} text - `hsl(200, 140, 50)`\r\n * @returns {boolean} `true` if `text` is a valid `hsl()` syntax.\r\n */\r\nfunction parseHSL( text ) {\r\n    const m = RX_HSL.exec( text );\r\n    if ( !m ) return false;\r\n    this.H = clamp01( parseInt( m[ 1 ], 10 ) * INV359 );\r\n    this.S = clamp01( parseInt( m[ 2 ], 10 ) * INV99 );\r\n    this.L = clamp01( parseInt( m[ 3 ], 10 ) * INV99 );\r\n    this.A = 1;\r\n    this.hsl2rgb();\r\n    return true;\r\n}\r\n\r\nfunction hexa2( value ) {\r\n    let out = Math.floor( value ).toString( 16 );\r\n    if ( out.length < 2 ) out = \"0\" + out;\r\n    return out;\r\n}\r\n\r\n\r\nfunction copy() {\r\n    const newColor = new Color();\r\n    newColor.R = this.R;\r\n    newColor.G = this.G;\r\n    newColor.B = this.B;\r\n    newColor.A = this.A;\r\n    newColor.H = this.H;\r\n    newColor.S = this.S;\r\n    newColor.L = this.L;\r\n    return newColor;\r\n}\r\n\r\n\r\nfunction newRGB( red, green, blue ) {\r\n    const color = new Color();\r\n    color.R = red;\r\n    color.G = red;\r\n    color.B = red;\r\n    return color;\r\n}\r\n\r\nfunction newRGBA( red, green, blue, alpha ) {\r\n    const color = new Color();\r\n    color.R = red;\r\n    color.G = red;\r\n    color.B = red;\r\n    color.A = red;\r\n    return color;\r\n}\r\n\r\nfunction clamp01( v ) {\r\n    if ( v < 0 ) return 0;\r\n    if ( v > 1 ) return 1;\r\n    return v;\r\n}\r\n\r\n\r\nfunction staticParse( text ) {\r\n    const color = new Color();\r\n    color.parse( text );\r\n    return color;\r\n}\r\n\r\nfunction staticLuminance( text ) {\r\n    const color = staticParse( text );\r\n    return color.luminance();\r\n}\r\n\r\n\r\nmodule.exports._ = _;\n})"]}