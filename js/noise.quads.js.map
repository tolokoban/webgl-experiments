{"version":3,"sources":["quads.js"],"names":["require","module","exports","_","GLOBAL","CODE_BEHIND","init","paint","Dom","Resize","Program","canvas","$elements","$","gl","getContext","preserveDrawingBuffer","prg","vert","frag","buffVert","createBuffer","arrayVert","Float32Array","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","texture","createRandomTexture","requestAnimationFrame","watchSize","bind","call","console","log","use","$uniSize","size","$uniFactorX","width","$uniFactorY","height","mode","$uniMode","$uniRandom","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","bindAttribs","drawArrays","TRIANGLE_STRIP","data","createTexture","i","xRaw","Math","random","yRaw","len","sqrt","invlen","x","floor","y","push","texParameteri","TEXTURE_WRAP_S","REPEAT","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","texImage2D","RGBA","UNSIGNED_BYTE","Uint8Array","PM","Tag","Link","View","Converters","TfwViewCombo","TfwViewSlider","ensureCodeBehind","defVal","args","attName","attValue","undefined","conv_enum","get","conv_integer","ViewClass","that","pm","create","cast","e_","e_0","e_1","wide","label","keys","items","add","e_canvas","e_3","min","max","smooth","Object","defineProperty","value","writable","enumerable","configurable","A","obj","name","B","on","v","ex","error","class","set","fire","addClass","Error"],"mappings":"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","sourcesContent":["/** @module noise.quads */require( 'noise.quads', function(require, module, exports) { var _=function(){return ''}; const GLOBAL = {\n  \"vert\": \"attribute vec2 attXY;\\r\\n\\r\\nvoid main() {\\r\\n    gl_Position = vec4( attXY, 0, 1);\\r\\n}\\r\\n\",\n  \"frag\": \"precision mediump float;\\r\\n\\r\\nuniform float uniFactorX;\\r\\nuniform float uniFactorY;\\r\\nuniform float uniSize;\\r\\nuniform float uniMode;\\r\\n\\r\\nuniform sampler2D uniRandom;\\r\\n\\r\\nconst vec3 ORANGE = vec3(1., .5, 0.);\\r\\nconst vec3 BLUE = vec3(0, .4, .867);\\r\\n\\r\\nfloat interpolate( float a ) {\\r\\n  if( uniMode > 1.5 ) return a*a*a*(a*(a*6.-15.)+10.);\\r\\n  if( uniMode > 0.5 ) return smoothstep( 0.0, 1.0, a );\\r\\n  return a;\\r\\n}\\r\\n\\r\\nvoid main() {\\r\\n  float INV = 1.0 / 32.0;\\r\\n  \\r\\n  vec2 A = vec2( 0, 0 );\\r\\n  vec2 B = vec2( 0, INV );\\r\\n  vec2 C = vec2( INV, INV );\\r\\n  vec2 D = vec2( INV, 0 );\\r\\n\\r\\n  vec2 coords = uniSize * vec2( gl_FragCoord.x * uniFactorX, gl_FragCoord.y * uniFactorY ) * INV;\\r\\n  coords += 0.5 + uniSize * INV;\\r\\n  \\r\\n  vec2 cellA = fract( coords * 32.0 );\\r\\n  vec2 cellB = cellA - vec2(0, 1);\\r\\n  vec2 cellC = cellA - vec2(1, 1);\\r\\n  vec2 cellD = cellA - vec2(1, 0);\\r\\n\\r\\n  coords = coords - cellA * INV;\\r\\n\\r\\n  vec2 gradA = 2.0 * (texture2D( uniRandom, coords + A ).xy - 0.5);\\r\\n  vec2 gradB = 2.0 * (texture2D( uniRandom, coords + B ).xy - 0.5);\\r\\n  vec2 gradC = 2.0 * (texture2D( uniRandom, coords + C ).xy - 0.5);\\r\\n  vec2 gradD = 2.0 * (texture2D( uniRandom, coords + D ).xy - 0.5);\\r\\n\\r\\n  float vA = dot( cellA, gradA );\\r\\n  float vB = dot( cellB, gradB );\\r\\n  float vC = dot( cellC, gradC );\\r\\n  float vD = dot( cellD, gradD );\\r\\n\\r\\n  float alphaX = interpolate( cellA.x );\\r\\n  float alphaY = interpolate( cellA.y );\\r\\n\\r\\n  float vAB = mix(vA, vB, alphaY);\\r\\n  float vCD = mix(vD, vC, alphaY);\\r\\n\\r\\n  float v = 2.0 * mix(vAB, vCD, alphaX);\\r\\n\\r\\n  // Les valeurs positives seront orange,\\r\\n  if( v > 0.0 ) gl_FragColor = vec4( v * ORANGE, 1 );\\r\\n  // les négatives seront bleu.\\r\\n  else gl_FragColor = vec4( -v * BLUE, 1 );\\r\\n\\r\\n  // Ajouter les liserés blancs.\\r\\n  gl_FragColor.a = smoothstep(0.0, 0.2, abs( v ) );\\r\\n}\\r\\n\"};\n  \"use strict\";\r\n\r\n\r\n/* exported CODE_BEHIND */\r\nconst CODE_BEHIND = { init, paint };\r\n\r\n\r\nconst Dom = require(\"dom\"),\r\n      Resize = require(\"webgl.resize\"),\r\n      Program = require(\"webgl.program\");\r\n\r\n\r\n/**\r\n * This function is called by the XJS code.\r\n *\r\n * @this Quads\r\n */\r\nfunction init(  ) {\r\n  const canvas = this.$elements.canvas.$,\r\n        gl = canvas.getContext(\"webgl\", { preserveDrawingBuffer: false });\r\n\r\n  this.prg = new Program(gl, {\r\n    vert: GLOBAL.vert,\r\n    frag: GLOBAL.frag\r\n  });\r\n  this.buffVert = gl.createBuffer();\r\n  const arrayVert = new Float32Array([ -1, -1, +1, -1, -1, +1, +1, +1 ]);\r\n\r\n  gl.bindBuffer(gl.ARRAY_BUFFER, this.buffVert);\r\n  gl.bufferData(gl.ARRAY_BUFFER, arrayVert, gl.STATIC_DRAW);\r\n\r\n  this.gl = gl;\r\n  this.texture = createRandomTexture( gl );\r\n  requestAnimationFrame( watchSize.bind( this ) );\r\n}\r\n\r\n\r\nfunction watchSize() {\r\n  requestAnimationFrame( watchSize.bind( this ) );\r\n\r\n  const {gl} = this;\r\n  if( gl && Resize( gl ) ) paint.call( this );\r\n}\r\n\r\n\r\nfunction paint() {\r\n  const { gl, prg, buffVert, texture } = this;\r\n  if( !gl ) return;\r\n\r\n  console.log(\"paint...\");\r\n  \r\n  prg.use();\r\n  prg.$uniSize = this.size;\r\n  prg.$uniFactorX = 1 / gl.canvas.width;\r\n  prg.$uniFactorY = 1 / gl.canvas.height;\r\n\r\n  if( this.mode === 'linear' ) prg.$uniMode = 0;\r\n  else if( this.mode === 'cubic' ) prg.$uniMode = 1;\r\n  else prg.$uniMode = 2;\r\n\r\n  prg.$uniRandom = 0;\r\n\r\n  gl.activeTexture( gl.TEXTURE0 );\r\n  gl.bindTexture( gl.TEXTURE_2D, texture );\r\n\r\n  prg.bindAttribs( buffVert, \"attXY\" );\r\n  gl.bindBuffer( gl.ARRAY_BUFFER, buffVert );\r\n  gl.drawArrays( gl.TRIANGLE_STRIP, 0, 4 );\r\n}\r\n\r\n\r\n//#(texture)\r\nfunction createRandomTexture( gl ) {\r\n  // Les coordonnées R, G, B et A sont des entiers entre 0 et 255.\r\n  // On va créer des vecteurs normés et on stoquera la coordonnée X\r\n  // dans R et la coordonnée Y dans G.\r\n  // Les coordonnées X et Y sont des nombres décimaux compris entre -1 et +1.\r\n  // Il faudra donc les transformer en nombres entiers entre 0 et 255.\r\n  const data = [];\r\n  const texture = gl.createTexture();\r\n  const width = 32;\r\n  const height = 32;\r\n\r\n  for( let i = 0; i < width * height; i++ ) {\r\n    const xRaw = Math.random() - 0.5,\r\n          yRaw = Math.random() - 0.5,\r\n          len = 2 * Math.sqrt( xRaw * xRaw + yRaw * yRaw ),\r\n          invlen = 256 / len,\r\n          x = Math.floor( 128 + invlen * xRaw ),\r\n          y = Math.floor( 128 + invlen * yRaw );\r\n    data.push( x, y, 0, 255 );\r\n  }\r\n\r\n  gl.bindTexture(gl.TEXTURE_2D, texture);\r\n\r\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\r\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\r\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n\r\n  gl.texImage2D(\r\n    gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0,\r\n    gl.RGBA, gl.UNSIGNED_BYTE, new Uint8Array( data )\r\n  );\r\n\r\n  return texture;\r\n}\r\n//#(texture)\r\n\n\n\n//===============================\n// XJS:View autogenerated code.\ntry {\n  module.exports = function() {\n    //--------------------\n    // Dependent modules.\n    const $ = require('dom');\n    const PM = require('tfw.binding.property-manager');\n    const Tag = require('tfw.view').Tag;\n    const Link = require('tfw.binding.link');\n    const View = require('tfw.view');;\n    const Converters = require('tfw.binding.converters');\n    const TfwViewCombo = require('tfw.view.combo');\n    const TfwViewSlider = require('tfw.view.slider');\n    //-------------------------------------------------------\n    // Check if needed functions are defined in code behind.\n    View.ensureCodeBehind( CODE_BEHIND, \"paint\", \"init\" );\n    //-------------------\n    // Global functions.\n    function defVal(args, attName, attValue) { return args[attName] === undefined ? attValue : args[attName]; };\n    //-------------------\n    // Global variables.\n    const conv_enum = Converters.get('enum');\n    const conv_integer = Converters.get('integer');\n    //-------------------\n    // Class definition.\n    const ViewClass = function( args ) {\n      try {\n        if( typeof args === 'undefined' ) args = {};\n        this.$elements = {};\n                const that = this;\n        const pm = PM(this);\n        //--------------------\n        // Create attributes.\n        pm.create(\"mode\", { cast: conv_enum([\"linear\",\"cubic\",\"pentic\"]), init: \"cubic\" });\n        pm.create(\"size\", { cast: conv_integer(0) });\n        //------------------\n        // Create elements.\n        const e_ = new Tag('DIV', [\"class\"]);\n        const e_0 = new Tag('CENTER');\n        const e_1 = new TfwViewCombo({\n          wide: false,\n          label: \"Interpolation\",\n          keys: [\n            \"linear\",\n            \"cubic\",\n            \"pentic\"\n          ],\n          items: [\n            \"f(a)=a\",\n            \"f(a)=3a²-2a³\",\n            \"f(a)=6a⁵-15a⁴+10x³\"\n          ]\n        });\n        $.add( e_0, e_1 );\n        const e_canvas = new Tag('CANVAS');\n        this.$elements.canvas = e_canvas;\n        const e_3 = new TfwViewSlider({\n          min: 1,\n          max: 32,\n          smooth: true\n        });\n        $.add( e_, e_0, e_canvas, e_3 );\n        //-----------------------\n        // Declare root element.\n        Object.defineProperty( this, '$', {\n          value: e_.$,\n          writable: false, \n          enumerable: false, \n          configurable: false\n        });\n        //-------\n        // Links\n        new Link({\n          A:{obj: that,\n              name: 'mode'},\n          B:{obj: e_1,\n              name: 'value'},\n          name:\"mode > e_1/value\"\n        });\n        new Link({\n          A:{obj: that,\n              name: 'size'},\n          B:{obj: e_3,\n              name: 'value'},\n          name:\"size > e_3/value\"\n        });\n        //-----------------------\n        // On attribute changed.\n        pm.on(\"mode\", function(v) {\n          try {\n            CODE_BEHIND.paint.call( that, v );\n          }\n          catch( ex ) {\n            console.error(\n              'Exception in function behind \"paint\" of module \"mod/noise.quads.js\" for attribute \"mode\"!'\n            );\n            console.error( ex );\n          }\n        });\n        pm.on(\"size\", function(v) {\n          try {\n            CODE_BEHIND.paint.call( that, v );\n          }\n          catch( ex ) {\n            console.error(\n              'Exception in function behind \"paint\" of module \"mod/noise.quads.js\" for attribute \"size\"!'\n            );\n            console.error( ex );\n          }\n        });\n        //----------------------\n        // Initialize elements.\n        e_.class = \"noise-quads\";\n        //------------------------\n        // Initialize attributes.\n        pm.set(\"mode\", defVal(args, \"mode\", \"cubic\"));\n        pm.set(\"size\", defVal(args, \"size\", 14));\n        pm.fire(\"mode\");\n        pm.fire(\"size\");\n        // Initialization.\n        CODE_BEHIND.init.call( this );\n        $.addClass(this, 'view', 'custom');\n\n      }\n      catch( ex ) {\n        console.error('mod/noise.quads.js', ex);\n        throw Error('Instantiation error in XJS of \"mod/noise.quads.js\":\\n' + ex)\n      }\n    };\n    return ViewClass;\n  }();\n}\ncatch( ex ) {\n  throw Error('Definition error in XJS of \"mod/noise.quads.js\"\\n' + ex);\n}\n\r\n\r\n\r\nmodule.exports._ = _;\n})"]}