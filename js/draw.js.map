{"version":3,"sources":["draw.js"],"names":["require","module","exports","_","D","X","intl","arguments","all","$","MARGIN","init","Draw","args","ORANGE","BLUE","width","height","parseInt","canvas","tag","css","boxShadow","background","float","ctx","getContext","clearRect","lineJoin","element","readOnly","_ctx","_w","_h","x","w","radius","Y","y","h","setColor","font","lineCap","call","prototype","color","fillStyle","strokeStyle","setLine","lineWidth","fillRect","x1","y1","x2","y2","Math","min","max","axes","save","w2","floor","h2","beginPath","moveTo","lineTo","stroke","restore","dot","xx","yy","text","attach","arc","PI","fill","getBestAttach","txt","toUpperCase","indexOf","textAlign","textBaseline","fillText","drawVector","drawLine","vxx","vyy","len","sqrt","thickness","vx","vy","ang","C","cos","S","sin","SIZE","xo","yo","xa","ya","xb","yb","xh","yh","drawTri","tri","x3","y3","closePath","opacity","globalAlpha","setOpacity","fillTri","fillQuad","x4","y4","drawQuad","txtLB","txtL","txtR","txtT","txtB","txtLT","txtRT","txtRB","target","properties","key","val","Object","defineProperty","value","writable","configurable","EPSILON","absX","abs","absY","atan","index"],"mappings":"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","sourcesContent":["/** @module draw */require( 'draw', function(require, module, exports) { var _=function(){var D={\"en\":{},\"fr\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\r\n   \"use strict\";\r\n\r\nconst $ = require(\"dom\");\r\nconst MARGIN = 20;\r\n\r\nmodule.exports = function(init) {\r\n    const Draw = function(args) {\r\n        this.ORANGE = \"#f70\";\r\n        this.BLUE = \"#28f\";\r\n\r\n        if( typeof args === 'undefined' ) args = {};\r\n\r\n        if( typeof args.width === 'undefined' ) args.width = 300;\r\n        if( typeof args.height === 'undefined' ) args.height = 300;\r\n        args.width = parseInt( args.width );\r\n        args.height = parseInt( args.height );\r\n        if( typeof args.width !== 'number' ) args.width = 300;\r\n        if( typeof args.height !== 'number' ) args.height = 300;\r\n\r\n        var canvas = $.tag(\"canvas\", { width: args.width, height: args.height });\r\n        $.css( canvas, {\r\n            boxShadow: \"none\",\r\n            background: \"transparent\"\r\n        });\r\n        if( typeof args.float === 'string' ) {\r\n            $.css( canvas, { float: args.float } );\r\n        }\r\n\r\n        const ctx = canvas.getContext(\"2d\");\r\n        ctx.clearRect( 0, 0, args.width, args.height );\r\n        ctx.lineJoin = \"round\";\r\n        this.element = canvas;\r\n\r\n        readOnly( this, {\r\n            _ctx: ctx,\r\n            _w: args.width,\r\n            _h: args.height,\r\n            X: function(x) {\r\n                var w = args.width;\r\n                var radius = 0.5 * w - MARGIN;\r\n                return w * 0.5 + x * radius;\r\n            },\r\n            Y: function(y) {\r\n                var h = args.height;\r\n                var radius = 0.5 * h - MARGIN;\r\n                return h * 0.5 - y * radius;\r\n            }\r\n        });\r\n\r\n        this.setColor(\"#000\");\r\n        ctx.font = \"11px sans-serif\";\r\n        ctx.lineCap = \"round\";\r\n        ctx.lineJoin = \"round\";\r\n        \r\n        init.call( this, args );\r\n    };\r\n\r\n    Draw.prototype.setColor = function( color ) {\r\n        this._ctx.fillStyle = color;\r\n        this._ctx.strokeStyle = color;\r\n        return this;\r\n    };\r\n\r\n    Draw.prototype.setLine = function( lineWidth ) {\r\n        this._ctx.lineWidth = lineWidth;\r\n        return this;\r\n    };\r\n\r\n    Draw.prototype.fillRect = function(x1, y1, x2, y2) {\r\n        x1 = this.X( x1 );\r\n        y1 = this.Y( y1 );\r\n        x2 = this.X( x2 );\r\n        y2 = this.Y( y2 );\r\n        var x = Math.min( x1, x2 );\r\n        var y = Math.min( y1, y2 );\r\n        var w = Math.max( x1, x2 ) - x;\r\n        var h = Math.max( y1, y2 ) - y;\r\n        this._ctx.fillRect( x, y, w, h );\r\n        return this;\r\n    };\r\n\r\n    Draw.prototype.axes = function() {\r\n        var ctx = this._ctx;\r\n        ctx.save();\r\n        this\r\n            .setColor(\"#ddd\")\r\n            .fillRect( -1, -1, 1, 1 )\r\n            .setColor(\"#aaa\");\r\n        var w = this._w;\r\n        var w2 = Math.floor( w * 0.5 ) - 0.5;\r\n        var h = this._h;\r\n        var h2 = Math.floor( h * 0.5 ) - 0.5;\r\n        ctx.beginPath();\r\n        ctx.moveTo( 0, h2 );\r\n        ctx.lineTo( w, h2 );\r\n        ctx.moveTo( w2, 0 );\r\n        ctx.lineTo( w2, h );\r\n        ctx.stroke();\r\n        ctx.restore();\r\n        return this;\r\n    };\r\n\r\n    Draw.prototype.dot = function(xx, yy, text, attach) {\r\n        var x = this.X( xx );\r\n        var y = this.Y( yy );\r\n        var ctx = this._ctx;\r\n        ctx.beginPath();\r\n        ctx.arc( x, y, 3, 0, 2 * Math.PI, true );\r\n        ctx.fill();\r\n        if( typeof text === 'string' ) {\r\n            if( typeof attach === 'undefined' ) attach = getBestAttach( xx, yy );\r\n\r\n            this.txt( text, xx, yy, attach );\r\n        }\r\n        return this;\r\n    };\r\n\r\n    Draw.prototype.txt = function( text, x, y, attach ) {\r\n        if( typeof attach !== 'string' ) attach = \"\";\r\n        attach = attach.toUpperCase();\r\n\r\n        x = this.X( x );\r\n        y = this.Y( y );\r\n        var ctx = this._ctx;\r\n        if( attach.indexOf(\"L\") !== -1 ) {\r\n            ctx.textAlign = \"start\";\r\n            x += 4;\r\n        }\r\n        else if( attach.indexOf(\"R\") !== -1 ) {\r\n            ctx.textAlign = \"end\";\r\n            x -= 4;\r\n        }\r\n        else ctx.textAlign = \"center\";\r\n        if( attach.indexOf(\"T\") !== -1 ) {\r\n            ctx.textBaseline  = \"top\";\r\n            y += 4;\r\n        }\r\n        else if( attach.indexOf(\"B\") !== -1 ) {\r\n            ctx.textBaseline = \"bottom\";\r\n            y -= 4;\r\n        }\r\n        else ctx.textBaseline = \"middle\";\r\n        ctx.fillText( text, x, y );\r\n        return this;\r\n    };\r\n\r\n    Draw.prototype.drawVector = function( x1, y1, x2, y2 ) {\r\n        this.drawLine( x1, y1, x2, y2 );\r\n        const vxx = x1 - x2,\r\n              vyy = y1 - y2,\r\n              len = Math.sqrt( vxx * vxx + vyy * vyy ),\r\n              thickness = this._ctx.lineWidth / this._w;\r\n        if( len < 3 * thickness ) return this;\r\n        const vx = thickness * vxx / len,\r\n              vy = thickness * vyy / len,\r\n              ang = Math.PI * 0.12,\r\n              C = Math.cos( ang ),\r\n              S = Math.sin( ang ),\r\n              SIZE = 6,\r\n              xo = x2,\r\n              yo = y2,\r\n              xa = x2 + SIZE * (C * vx - S * vy),\r\n              ya = y2 + SIZE * (S * vx + C * vy),\r\n              xb = x2 + SIZE * (C * vx + S * vy),\r\n              yb = y2 + SIZE * (- S * vx + C * vy),\r\n              xh = x2 + vx * SIZE * 0.5,\r\n              yh = y2 + vy * SIZE * 0.5;\r\n        this.drawTri( xo, yo, xh, yh, xa, ya );\r\n        this.drawTri( xo, yo, xh, yh, xb, yb );\r\n        return this;\r\n    };\r\n\r\n    Draw.prototype.drawLine = function( x1, y1, x2, y2 ) {\r\n        x1 = this.X( x1 );\r\n        y1 = this.Y( y1 );\r\n        x2 = this.X( x2 );\r\n        y2 = this.Y( y2 );\r\n        var ctx = this._ctx;\r\n        ctx.beginPath();\r\n        ctx.moveTo(x1, y1);\r\n        ctx.lineTo(x2, y2);\r\n        ctx.stroke();\r\n        return this;\r\n    };\r\n\r\n    Draw.prototype.tri = function( x1, y1, x2, y2, x3, y3 ) {\r\n        x1 = this.X( x1 );\r\n        y1 = this.Y( y1 );\r\n        x2 = this.X( x2 );\r\n        y2 = this.Y( y2 );\r\n        x3 = this.X( x3 );\r\n        y3 = this.Y( y3 );\r\n        var ctx = this._ctx;\r\n        ctx.beginPath();\r\n        ctx.moveTo(x1, y1);\r\n        ctx.lineTo(x2, y2);\r\n        ctx.lineTo(x3, y3);\r\n        ctx.closePath();\r\n        return this;\r\n    };\r\n\r\n    Draw.prototype.opacity = function( opacity ) {\r\n        this._ctx.globalAlpha = opacity;\r\n        return this;\r\n    };\r\n\r\n    Draw.prototype.setOpacity = function( opacity ) {\r\n        this._ctx.globalAlpha = opacity;\r\n        return this;\r\n    };\r\n\r\n    Draw.prototype.fillTri = function( x1, y1, x2, y2, x3, y3 ) {\r\n        var ctx = this._ctx;\r\n        this.tri( x1, y1, x2, y2, x3, y3 );\r\n        ctx.fill();\r\n        return this;\r\n    };\r\n\r\n    Draw.prototype.fillQuad = function( x1, y1, x2, y2, x3, y3, x4, y4 ) {\r\n        return this.fillTri( x1, y1, x2, y2, x3, y3 )\r\n            .fillTri( x1, y1, x3, y3, x4, y4 );\r\n    };\r\n\r\n    Draw.prototype.drawQuad = function( x1, y1, x2, y2, x3, y3, x4, y4 ) {\r\n        return this.drawTri( x1, y1, x2, y2, x3, y3 )\r\n            .drawTri( x1, y1, x3, y3, x4, y4 );\r\n    };\r\n\r\n    Draw.prototype.drawTri = function( x1, y1, x2, y2, x3, y3 ) {\r\n        var ctx = this._ctx;\r\n        this.tri( x1, y1, x2, y2, x3, y3 );\r\n        ctx.stroke();\r\n        return this;\r\n    };\r\n\r\n    Draw.prototype.txtLB = function( text, x, y ) {\r\n        return this.txt( text, x, y, \"LB\" );\r\n    };\r\n\r\n    Draw.prototype.txtL  = function( text, x, y ) { return this.txt( text, x, y, \"L\");  };\r\n    Draw.prototype.txtR  = function( text, x, y ) { return this.txt( text, x, y, \"R\");  };\r\n    Draw.prototype.txtT  = function( text, x, y ) { return this.txt( text, x, y, \"T\");  };\r\n    Draw.prototype.txtB  = function( text, x, y ) { return this.txt( text, x, y, \"B\");  };\r\n    Draw.prototype.txtLT = function( text, x, y ) { return this.txt( text, x, y, \"LT\"); };\r\n    Draw.prototype.txtLB = function( text, x, y ) { return this.txt( text, x, y, \"LB\"); };\r\n    Draw.prototype.txtRT = function( text, x, y ) { return this.txt( text, x, y, \"RT\"); };\r\n    Draw.prototype.txtRB = function( text, x, y ) { return this.txt( text, x, y, \"RB\"); };\r\n\r\n    return Draw;\r\n};\r\n\r\n\r\n\r\nfunction readOnly( target, properties ) {\r\n    var key, val;\r\n    for( key in properties ) {\r\n        val = properties[key];\r\n        Object.defineProperty( target, key, {\r\n            value: val,\r\n            writable: false,\r\n            configurable: false\r\n        });\r\n    }\r\n}\r\n\r\nvar EPSILON = 0.000001;\r\nvar PI = Math.PI;\r\n\r\nfunction getBestAttach( x, y ) {\r\n    if( x*x + y*y < 0.01 ) return \"B\";\r\n    var absX = Math.abs( x );\r\n    var absY = Math.abs( y );\r\n    var ang = absX < EPSILON ? PI / 2 : Math.atan( absY / absX );\r\n    if( x < 0 ) {\r\n        if( y < 0 ) {\r\n            // x < 0 ; y < 0\r\n            ang += PI;\r\n        }\r\n        else {\r\n            // x < 0 ; y > 0\r\n            ang = PI - ang;\r\n        }\r\n    }\r\n    else if( y < 0 ) {\r\n        // x > 0 ; y < 0\r\n        ang = 2 * PI - ang;\r\n    }\r\n    ang += PI / 8;\r\n\r\n    var index = Math.floor( 4 * ang / PI ) % 8;\r\n    return [\r\n        \"L\", \"LB\", \"B\", \"RB\", \"R\", \"RT\", \"T\", \"LT\"\r\n    ][index];\r\n}\r\n\r\n\r\n\r\nmodule.exports._ = _;\n})"]}