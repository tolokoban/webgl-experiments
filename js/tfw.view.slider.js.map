{"version":3,"sources":["tfw.view.slider.js"],"names":["require","module","exports","_","D","X","intl","arguments","all","CODE_BEHIND","onValueChanged","onTapBack","onDragStart","onDrag","onDragEnd","Dom","v","_dragging","min","value","max","displayedValue","valueToDisplayedValue","call","moveToValue","evt","xToValue","x","rect","$","getBoundingClientRect","percent","width","range","Math","floor","step","valueToX","_value","_rect","tx","clamp","x0","css","$elements","button","transform","smooth","factor","shift","toFixed","left","PM","Tag","Link","View","Converters","ensureCodeBehind","defVal","args","attName","attValue","undefined","conv_integer","get","conv_boolean","conv_float","conv_string","ViewClass","that","pm","create","cast","e_","e_button","add","Object","defineProperty","writable","enumerable","configurable","events","bind","A","obj","name","B","on","ex","console","error","class","set","fire","addClass","Error"],"mappings":"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","sourcesContent":["/** @module tfw.view.slider */require( 'tfw.view.slider', function(require, module, exports) { var _=function(){var D={\"en\":{},\"fr\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\r\n   \"use strict\";\r\n\r\n\r\n/* exported CODE_BEHIND */\r\nconst CODE_BEHIND = { onValueChanged, onTapBack, onDragStart, onDrag, onDragEnd };\r\n\r\nconst Dom = require(\"dom\");\r\n\r\n\r\n/**\r\n * @this viewXJS\r\n * @param {integer} v - New value.\r\n * @returns {undefined}\r\n */\r\nfunction onValueChanged(v) {\r\n    // If dragging is in progress, we don't want to mix a move and a translation.\r\n    if (this._dragging) return;\r\n\r\n    if (v < this.min) {\r\n        this.value = this.min;\r\n        return;\r\n    }\r\n    if (v > this.max) {\r\n        this.value = this.max;\r\n        return;\r\n    }\r\n\r\n    this.displayedValue = valueToDisplayedValue.call(this, v);\r\n    moveToValue.call(this, v);\r\n}\r\n\r\n/**\r\n * @this ViewXJS\r\n * @param {object} evt - {}\r\n * @returns {undefined}\r\n */\r\nfunction onTapBack(evt) {\r\n    this.value = xToValue.call(this, evt.x);\r\n}\r\n\r\n/**\r\n * Convert a X position into the nearest value.\r\n *\r\n * @this ViewXJS\r\n * @param   {float} x - X position relative to the View.\r\n * @returns {integer} The nearest integer value.\r\n */\r\nfunction xToValue(x) {\r\n    const\r\n        rect = this.$.getBoundingClientRect(),\r\n        percent = x / rect.width,\r\n        range = this.max - this.min,\r\n        value = Math.floor(percent * range + 0.5);\r\n    return this.min + this.step * Math.floor(value / this.step);\r\n}\r\n\r\n/**\r\n * Convert a value into X position relative to View.\r\n *\r\n * @this ViewXJS\r\n * @param   {integer} value - Current value.\r\n * @returns {float} X position.\r\n */\r\nfunction valueToX(value) {\r\n    const\r\n        rect = this.$.getBoundingClientRect(),\r\n        percent = (value - this.min) / (this.max - this.min);\r\n    return rect.width * percent;\r\n}\r\n\r\n/**\r\n * We store the Bounding Client Rect to prevent from querying it at every next drag.\r\n *\r\n * @this ViewXJS\r\n * @returns {undefined}\r\n */\r\nfunction onDragStart() {\r\n    this._dragging = true;\r\n    this._value = this.value;\r\n    this._rect = this.$.getBoundingClientRect();\r\n}\r\n\r\n/**\r\n * Drag the button.\r\n *\r\n * @this ViewXJS\r\n * @param   {object} evt - `{ x, ... }`\r\n * @returns {undefined}\r\n */\r\nfunction onDrag(evt) {\r\n    const\r\n        rect = this._rect,\r\n        x = valueToX.call(this, this._value),\r\n        min = -x,\r\n        max = rect.width - x,\r\n        tx = clamp(evt.x - evt.x0, min, max),\r\n        value = xToValue.call(this, x + tx);\r\n    Dom.css(this.$elements.button, { transform: `translateX(${tx}px)` });\r\n    this.displayedValue = valueToDisplayedValue.call(this, value);\r\n    if (this.smooth) {\r\n        this._dragging = true;\r\n        this.value = value;\r\n    }\r\n}\r\n\r\n/**\r\n * Enf of grag for the button. We can remove the temporaty translation.\r\n *\r\n * @this ViewXJS\r\n * @param   {object} evt - `{ x, ... }`\r\n * @returns {undefined}\r\n */\r\nfunction onDragEnd(evt) {\r\n    this._dragging = false;\r\n\r\n    const\r\n        rect = this._rect,\r\n        x = valueToX.call(this, this._value),\r\n        min = -x,\r\n        max = rect.width - x,\r\n        tx = clamp(evt.x - evt.x0, min, max);\r\n    Dom.css(this.$elements.button, { transform: `translateX(0px)` });\r\n    this.value = xToValue.call(this, x + tx);\r\n}\r\n\r\n/**\r\n * Displayed value is a linear transformation of the real value.\r\n *\r\n * @this ViewXJS\r\n * @param   {integer} value [description]\r\n * @returns {float}       [description]\r\n */\r\nfunction valueToDisplayedValue(value) {\r\n    return (this.factor * value + this.shift).toFixed(0);\r\n}\r\n\r\n/**\r\n * Move button to a position mapping the value.\r\n *\r\n * @this ViewXJS\r\n * @param   {integer} value - Value.\r\n * @returns {undefined}\r\n */\r\nfunction moveToValue(value) {\r\n    const left = 100 * (value - this.min) / (this.max - this.min);\r\n    Dom.css(this.$elements.button, { left: `${left}%` });\r\n}\r\n\r\n/**\r\n * Force a value to lay in a setAttributesAndRegisterElementsWithSpecialColors\r\n *\r\n * @param   {float} value - Value to clamp.\r\n * @param   {float} min   - Lower bound of the range.\r\n * @param   {float} max  - Upper bound of the range.\r\n * @returns {float} The clamped value.\r\n */\r\nfunction clamp(value, min, max) {\r\n    if (value < min) return min;\r\n    if (value > max) return max;\r\n    return value;\r\n}\n\n\n//===============================\n// XJS:View autogenerated code.\ntry {\n  module.exports = function() {\n    //--------------------\n    // Dependent modules.\n    const $ = require('dom');\n    const PM = require('tfw.binding.property-manager');\n    const Tag = require('tfw.view').Tag;\n    const Link = require('tfw.binding.link');\n    const View = require('tfw.view');;\n    const Converters = require('tfw.binding.converters');\n    //-------------------------------------------------------\n    // Check if needed functions are defined in code behind.\n    View.ensureCodeBehind( CODE_BEHIND, \"onValueChanged\", \"onTapBack\", \"onDragStart\", \"onDrag\", \"onDragEnd\" );\n    //-------------------\n    // Global functions.\n    function defVal(args, attName, attValue) { return args[attName] === undefined ? attValue : args[attName]; };\n    //-------------------\n    // Global variables.\n    const conv_integer = Converters.get('integer');\n    const conv_boolean = Converters.get('boolean');\n    const conv_float = Converters.get('float');\n    const conv_string = Converters.get('string');\n    //-------------------\n    // Class definition.\n    const ViewClass = function( args ) {\n      try {\n        if( typeof args === 'undefined' ) args = {};\n        this.$elements = {};\n                const that = this;\n        const pm = PM(this);\n        //--------------------\n        // Create attributes.\n        pm.create(\"value\", { cast: conv_integer(0) });\n        pm.create(\"min\", { cast: conv_integer(0) });\n        pm.create(\"max\", { cast: conv_integer(0) });\n        pm.create(\"step\", { cast: conv_integer(0) });\n        pm.create(\"smooth\", { cast: conv_boolean });\n        pm.create(\"shift\", { cast: conv_float(0) });\n        pm.create(\"factor\", { cast: conv_float(0) });\n        pm.create(\"displayedValue\", { cast: conv_string });\n        //------------------\n        // Create elements.\n        const e_ = new Tag('DIV', [\"class\"]);\n        const e_button = new Tag('DIV', [\"class\",\"textcontent\"]);\n        this.$elements.button = e_button;\n        $.add( e_, e_button );\n        //-----------------------\n        // Declare root element.\n        Object.defineProperty( this, '$', {\n          value: e_.$,\n          writable: false, \n          enumerable: false, \n          configurable: false\n        });\n        //---------\n        // Events.\n        View.events(e_, {\n          \"tap\": CODE_BEHIND.onTapBack.bind( this )\n        });\n        View.events(e_button, {\n          \"dragstart\": CODE_BEHIND.onDragStart.bind( this ),\n          \"drag\": CODE_BEHIND.onDrag.bind( this ),\n          \"dragend\": CODE_BEHIND.onDragEnd.bind( this )\n        });\n        //-------\n        // Links\n        new Link({\n          A:{obj: that,\n              name: 'displayedValue'},\n          B:{obj: e_button,\n              name: 'textcontent'},\n          name:\"displayed-value > e_button/textcontent\"\n        });\n        //-----------------------\n        // On attribute changed.\n        pm.on(\"value\", function(v) {\n          try {\n            CODE_BEHIND.onValueChanged.call( that, v );\n          }\n          catch( ex ) {\n            console.error(\n              'Exception in function behind \"onValueChanged\" of module \"mod/tfw.view.slider.js\" for attribute \"value\"!'\n            );\n            console.error( ex );\n          }\n        });\n        //----------------------\n        // Initialize elements.\n        e_.class = \"tfw-view-slider thm-ele2 thm-bgPD\";\n        e_button.class = \"thm-ele4 thm-bgPL thm-fg\";\n        //------------------------\n        // Initialize attributes.\n        pm.set(\"value\", defVal(args, \"value\", 0));\n        pm.set(\"min\", defVal(args, \"min\", 0));\n        pm.set(\"max\", defVal(args, \"max\", 100));\n        pm.set(\"step\", defVal(args, \"step\", 1));\n        pm.set(\"smooth\", defVal(args, \"smooth\", false));\n        pm.set(\"shift\", defVal(args, \"shift\", 0));\n        pm.set(\"factor\", defVal(args, \"factor\", 1));\n        pm.set(\"displayedValue\", defVal(args, \"displayedValue\", 1));\n        pm.fire(\"value\");\n        pm.fire(\"min\");\n        pm.fire(\"max\");\n        pm.fire(\"step\");\n        pm.fire(\"smooth\");\n        pm.fire(\"shift\");\n        pm.fire(\"factor\");\n        pm.fire(\"displayedValue\");\n        $.addClass(this, 'view', 'custom');\n\n      }\n      catch( ex ) {\n        console.error('mod/tfw.view.slider.js', ex);\n        throw Error('Instantiation error in XJS of \"mod/tfw.view.slider.js\":\\n' + ex)\n      }\n    };\n    return ViewClass;\n  }();\n}\ncatch( ex ) {\n  throw Error('Definition error in XJS of \"mod/tfw.view.slider.js\"\\n' + ex);\n}\n\r\n\r\n\r\nmodule.exports._ = _;\n})"]}