{"version":3,"sources":["tfw.event.js"],"names":["require","module","exports","_","D","X","intl","arguments","all","Event","_list","prototype","add","listener","remove","i","length","push","x","splice","clear","fire","args","Array","slice","call","apply"],"mappings":";;AAAA;AAAwBA,OAAO,CAAE,WAAF,EAAe,UAASA,OAAT,EAAkBC,MAAlB,EAA0BC,OAA1B,EAAmC;AAAE,MAAIC,CAAC,GAAC,YAAU;AAAC,QAAIC,CAAC,GAAC;AAAC,YAAK,EAAN;AAAS,YAAK;AAAd,KAAN;AAAA,QAAwBC,CAAC,GAACL,OAAO,CAAC,GAAD,CAAP,CAAaM,IAAvC;;AAA4C,aAASH,CAAT,GAAY;AAAC,aAAOE,CAAC,CAACD,CAAD,EAAGG,SAAH,CAAR;AAAuB;;AAAAJ,IAAAA,CAAC,CAACK,GAAF,GAAMJ,CAAN;AAAQ,WAAOD,CAAP;AAAS,GAA5G,EAAN;AAChF;;;;;;AAIH,MAAIM,KAAK,GAAG,SAARA,KAAQ,GAAW;AACnB,SAAKC,KAAL,GAAa,EAAb;AACH,GAFD;AAIA;;;;;;;;AAMAD,EAAAA,KAAK,CAACE,SAAN,CAAgBC,GAAhB,GAAsB,UAASC,QAAT,EAAmB;AACrC,QAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC,OAAO,KAAP;AACpC,SAAKC,MAAL,CAAYD,QAAZ;;AACA,SAAK,IAAIE,CAAC,GAAG,CAAb,EAAiBA,CAAC,GAAG,KAAKL,KAAL,CAAWM,MAAhC,EAAyCD,CAAC,EAA1C,EAA8C;AAC1C,UAAIF,QAAQ,KAAK,KAAKH,KAAtB,EAA8B,OAAO,KAAP;AACjC;;AACD,SAAKA,KAAL,CAAWO,IAAX,CAAiBJ,QAAjB;;AACA,WAAO,IAAP;AACH,GARD;AAUA;;;;;;;AAKAJ,EAAAA,KAAK,CAACE,SAAN,CAAgBG,MAAhB,GAAyB,UAASD,QAAT,EAAmB;AACxC,QAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC,OAAO,KAAP;;AACpC,SAAK,IAAIE,CAAC,GAAG,CAAb,EAAiBA,CAAC,GAAG,KAAKL,KAAL,CAAWM,MAAhC,EAAyCD,CAAC,EAA1C,EAA8C;AAC1C,UAAIG,CAAC,GAAG,KAAKR,KAAb;;AACA,UAAIG,QAAQ,KAAKK,CAAjB,EAAqB;AACjB,aAAKR,KAAL,CAAWS,MAAX,CAAkBJ,CAAlB,EAAqB,CAArB;;AACA,eAAO,IAAP;AACH;AACJ;;AACD,WAAO,KAAP;AACH,GAVD;AAYA;;;;;AAGAN,EAAAA,KAAK,CAACE,SAAN,CAAgBS,KAAhB,GAAwB,YAAW;AAC/B,SAAKV,KAAL,GAAa,EAAb;AACH,GAFD;AAIA;;;;;AAGAD,EAAAA,KAAK,CAACE,SAAN,CAAgBU,IAAhB,GAAuB,YAAW;AAC9B,QAAIN,CAAJ;AAAA,QAAOF,QAAP;AAAA,QACIS,IAAI,GAAGC,KAAK,CAACZ,SAAN,CAAgBa,KAAhB,CAAsBC,IAAtB,CAA4BlB,SAA5B,CADX;;AAEA,SAAKQ,CAAC,GAAG,CAAT,EAAaA,CAAC,GAAG,KAAKL,KAAL,CAAWM,MAA5B,EAAqCD,CAAC,EAAtC,EAA0C;AACtCF,MAAAA,QAAQ,GAAG,KAAKH,KAAL,CAAWK,CAAX,CAAX;AACA,UAAI,UAAUF,QAAQ,CAACa,KAAT,CAAeb,QAAf,EAAyBS,IAAzB,CAAd,EAA8C,OAAO,KAAP;AACjD;;AACD,WAAO,IAAP;AACH,GARD;;AAWArB,EAAAA,MAAM,CAACC,OAAP,GAAiBO,KAAjB;AAIAR,EAAAA,MAAM,CAACC,OAAP,CAAeC,CAAf,GAAmBA,CAAnB;AACC,CApE8B,CAAP","sourcesContent":["/** @module tfw.event */require( 'tfw.event', function(require, module, exports) { var _=function(){var D={\"en\":{},\"fr\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\r\n   /**\r\n * Gestion d'une liste de fonctions devant réagir à des événements.\r\n * @class\r\n */\r\nvar Event = function() {\r\n    this._list = [];\r\n};\r\n\r\n/**\r\n * Ajouter un __listener__ à la liste.\r\n * @param listener{function} Fonction à appeler quand l'énément est déclenché.\r\n * @return false  si le __listener__  n'a pas été ajouté  (parce qu'il\r\n * existe déjà ou parce qu'il n'est pas une fonction).\r\n */\r\nEvent.prototype.add = function(listener) {\r\n    if (typeof listener !== 'function') return false;\r\n    this.remove(listener);\r\n    for (var i = 0 ; i < this._list.length ; i++) {\r\n        if( listener === this._list ) return false;\r\n    }\r\n    this._list.push( listener );\r\n    return true;\r\n};\r\n\r\n/**\r\n * Supprimer le __listener__ de la liste.\r\n * @param listener{function} Fonction à appeler quand l'événement est déclenché.\r\n * @return false si le __listener__  n'existe pas.\r\n */\r\nEvent.prototype.remove = function(listener) {\r\n    if (typeof listener !== 'function') return false;\r\n    for (var i = 0 ; i < this._list.length ; i++) {\r\n        var x = this._list;\r\n        if( listener === x ) {\r\n            this._list.splice(i, 1);            \r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n};\r\n\r\n/**\r\n * Supprimer tous les __event__ de la liste.\r\n */\r\nEvent.prototype.clear = function() {\r\n    this._list = [];\r\n};\r\n\r\n/**\r\n * Emettre l'événement. Si un listener retourne ```false```, on n'appelle pas les event suivants.\r\n */\r\nEvent.prototype.fire = function() {\r\n    var i, listener,\r\n        args = Array.prototype.slice.call( arguments );\r\n    for (i = 0 ; i < this._list.length ; i++) {\r\n        listener = this._list[i];\r\n        if (false === listener.apply(listener, args)) return false;\r\n    }    \r\n    return true;\r\n};\r\n\r\n\r\nmodule.exports = Event;\r\n\r\n\r\n\r\nmodule.exports._ = _;\n})"]}