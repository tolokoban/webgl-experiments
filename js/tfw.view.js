"use strict";require("tfw.view",function(require,module,exports){function Tag(tagName,attribs){tagName=tagName.trim().toLowerCase();var elem="svg"===tagName?$.svgRoot():newTag(tagName);if(Object.defineProperty(this,"$",{value:elem,writable:!1,enumerable:!0,configurable:!1}),Array.isArray(attribs)){var that=this;attribs.forEach(function(attName){switch(attName.toLowerCase()){case"value":defineAttribValue.call(that,elem);break;case"focus":defineAttribFocus.call(that,elem);break;case"textcontent":defineAttribTextContent.call(that,elem);break;case"innerhtml":defineAttribInnerHTML.call(that,elem);break;default:defineStandardAttrib.call(that,elem,attName);}})}}function newTag(name){return-1===SVG_TAGS.indexOf(name.toLowerCase())?$.tag(name):$.svg(name)}function defineAttribValue(elem){var that=this,lastSettedValue=null;PM(this).create("value",{get:function get(){return lastSettedValue},set:function set(v){elem.value=v,lastSettedValue=v}}),elem.addEventListener("input",function(evt){PM(that).change("value",evt.target.value)},!1)}function defineAttribFocus(elem){var that=this;PM(this).create("focus",{cast:Converters.get("boolean")(),delay:1}),PM(this).on("focus",function(v){v?elem.focus():elem.blur()}),elem.addEventListener("focus",function(){that.focus=!0},!1),elem.addEventListener("blur",function(){that.focus=!1},!1)}function defineAttribTextContent(elem){["textContent","textcontent"].forEach(function(name){PM(this).create(name,{get:function get(){return elem.textContent},set:function set(v){"string"!=typeof v&&(v=""+v),"<html>"===v.substr(0,6)?elem.innerHTML=v.substr(6):elem.textContent=v}})},this)}function defineAttribInnerHTML(elem){["innerHTML","innerhtml"].forEach(function(name){PM(this).create(name,{get:function get(){return elem.innerHTML},set:function set(v){elem.innerHTML=v}})},this)}function defineStandardAttrib(elem,attName){PM(this).create(attName,{get:function get(){return elem.getAttribute(attName)},set:function set(v){elem.setAttribute(attName,v)}})}function events(target,events){$.on(target,events)}var _=function(){function _(){return X(D,arguments)}var D={en:{},fr:{}},X=require("$").intl;return _.all=D,_}();var $=require("dom"),PM=require("tfw.binding.property-manager"),Converters=require("tfw.binding.converters");exports.Tag=Tag,exports.ensureCodeBehind=function(code_behind){if("undefined"==typeof code_behind)throw"Missing mandatory global variable CODE_BEHIND!";var i,funcName;for(i=1;i<arguments.length;i++)if(funcName=arguments[i],"function"!=typeof code_behind[funcName])throw"Expected CODE_BEHIND."+funcName+" to be a function!"},exports.events=events,exports.defVal=function(target,args,defaultValues){var key,val;for(key in defaultValues)val=defaultValues[key],target[key]="undefined"==typeof args[key]?val:args[key]},exports.addClassIfTrue=function(element,className,value){value?$.addClass(element,className):$.removeClass(element,className)},exports.addClassIfFalse=function(element,className,value){value?$.removeClass(element,className):$.addClass(element,className)},exports.addAttribIfTrue=function(element,attribName,value){value?$.att(element,attribName):$.removeAtt(element,attribName)},exports.addAttribIfFalse=function(element,attribName,value){value?$.removeAtt(element,attribName):$.att(element,attribName)},Tag.prototype.applyClass=function(newClasses,id){var elem=this.$;"undefined"==typeof id&&(id=0),"undefined"==typeof this._applyer&&(this._applyer={}),Array.isArray(newClasses)||(newClasses=[newClasses]);var oldClasses=this._applyer[id];Array.isArray(oldClasses)&&oldClasses.forEach($.removeClass.bind($,elem)),this._applyer[id]=newClasses,newClasses.forEach($.addClass.bind($,elem))};var SVG_TAGS=["g","rect","circle","line","path","defs"];module.exports._=_});
//# sourceMappingURL=tfw.view.js.map