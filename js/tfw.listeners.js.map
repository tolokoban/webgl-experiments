{"version":3,"sources":["tfw.listeners.js"],"names":["require","module","_","X","D","arguments","intl","all","Listeners","_list","prototype","add","listener","obj","remove","i","length","push","x","splice","clear","fire","args","Array","slice","call","apply","exports"],"mappings":"aAA4BA,OAAO,CAAE,eAAF,CAAmB,SAASA,OAAT,CAAkBC,MAAlB,CAAmC,IAAMC,CAAAA,CAAC,CAAC,UAAU,CAAqC,QAASA,CAAAA,CAAT,EAAY,CAAC,MAAOC,CAAAA,CAAC,CAACC,CAAD,CAAGC,SAAH,CAAe,CAAxE,GAAID,CAAAA,CAAC,CAAC,CAAC,GAAK,EAAN,CAAN,CAAgBD,CAAC,CAACH,OAAO,CAAC,GAAD,CAAP,CAAaM,IAA/B,CAAgF,MAARJ,CAAAA,CAAC,CAACK,GAAF,CAAMH,CAAE,CAAOF,CAAE,CAApG,EAAR,CAKrFM,SAAS,CAAG,UAAW,CACvB,KAAKC,KAAL,CAAa,EAChB,CAPwF,CAezFD,SAAS,CAACE,SAAV,CAAoBC,GAApB,CAA0B,SAASC,QAAT,CAAmBC,GAAnB,CAAwB,CAC9C,GAAwB,UAApB,QAAOD,CAAAA,QAAX,CAAoC,SACpC,KAAKE,MAAL,CAAYF,QAAZ,CAF8C,CAG9C,IAAK,GAAIG,CAAAA,CAAC,CAAG,CAAb,CAAiBA,CAAC,CAAG,KAAKN,KAAL,CAAWO,MAAhC,CAAyCD,CAAC,EAA1C,CACI,GAAIH,QAAQ,GAAK,KAAKH,KAAL,CAAWM,CAAX,CAAjB,CAAgC,SAGpC,MADA,MAAKN,KAAL,CAAWQ,IAAX,CAAgB,CAACL,QAAD,CAAWC,GAAX,CAAhB,CACA,GACH,CAvBwF,CA8BzFL,SAAS,CAACE,SAAV,CAAoBI,MAApB,CAA6B,SAASF,QAAT,CAAmBC,GAAnB,CAAwB,CACjD,GAAwB,UAApB,QAAOD,CAAAA,QAAX,CAAoC,SACpC,IAAK,GACGM,CAAAA,CADH,CAAIH,CAAC,CAAG,CAAb,CAAiBA,CAAC,CAAG,KAAKN,KAAL,CAAWO,MAAhC,CAAyCD,CAAC,EAA1C,CAEI,GADIG,CACJ,CADQ,KAAKT,KAAL,CAAWM,CAAX,CACR,CAAIH,QAAQ,GAAKM,CAAC,CAAC,CAAD,CAAd,EAAqBL,GAAG,GAAKK,CAAC,CAAC,CAAD,CAAlC,CAEI,MADA,MAAKT,KAAL,CAAWU,MAAX,CAAkBJ,CAAlB,CAAqB,CAArB,CACA,IAGR,QACH,CAxCwF,CA6CzFP,SAAS,CAACE,SAAV,CAAoBU,KAApB,CAA4B,UAAW,CACnC,KAAKX,KAAL,CAAa,EAChB,CA/CwF,CAoDzFD,SAAS,CAACE,SAAV,CAAoBW,IAApB,CAA2B,UAAW,CAClC,GAAIN,CAAAA,CAAJ,CAAOH,QAAP,CAAiBC,GAAjB,CAAsBK,CAAtB,CACII,IAAI,CAAGC,KAAK,CAACb,SAAN,CAAgBc,KAAhB,CAAsBC,IAAtB,CAA4BpB,SAA5B,CADX,CAEA,IAAKU,CAAC,CAAG,CAAT,CAAaA,CAAC,CAAG,KAAKN,KAAL,CAAWO,MAA5B,CAAqCD,CAAC,EAAtC,CAII,GAHAG,CAAC,CAAG,KAAKT,KAAL,CAAWM,CAAX,CAGJ,CAFAH,QAAQ,CAAGM,CAAC,CAAC,CAAD,CAEZ,CADAL,GAAG,CAAGK,CAAC,CAAC,CAAD,CACP,CAAI,KAAUN,QAAQ,CAACc,KAAT,CAAeb,GAAf,CAAoBS,IAApB,CAAd,CAAyC,SAE7C,QACH,CA9DwF,CAiEzFrB,MAAM,CAAC0B,OAAP,CAAiBnB,SAjEwE,CAqEzFP,MAAM,CAAC0B,OAAP,CAAezB,CAAf,CAAmBA,CAClB,CAtEkC,C","sourcesContent":["/** @module tfw.listeners */require( 'tfw.listeners', function(require, module, exports) { var _=function(){var D={\"en\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\r\n   /**\r\n * Gestion d'une liste de fonctions devant réagir à des événements.\r\n * @class\r\n */\r\nvar Listeners = function() {\r\n    this._list = [];\r\n};\r\n\r\n/**\r\n * Ajouter un __listener__ à la liste.\r\n * @param listener{function} Fonction à appeler quand l'énément est déclenché.\r\n * @return false  si le __listener__  n'a pas été ajouté  (parce qu'il\r\n * existe déjà ou parce qu'il n'est pas une fonction).\r\n */\r\nListeners.prototype.add = function(listener, obj) {\r\n    if (typeof listener !== 'function') return false;\r\n    this.remove(listener);\r\n    for (var i = 0 ; i < this._list.length ; i++) {\r\n        if (listener === this._list[i]) return false;\r\n    }\r\n    this._list.push([listener, obj]);\r\n    return true;\r\n};\r\n\r\n/**\r\n * Supprimer le __listener__ de la liste.\r\n * @param listener{function} Fonction à appeler quand l'énément est déclenché.\r\n * @return false si le __listener__  n'existe pas.\r\n */\r\nListeners.prototype.remove = function(listener, obj) {\r\n    if (typeof listener !== 'function') return false;\r\n    for (var i = 0 ; i < this._list.length ; i++) {\r\n        var x = this._list[i];\r\n        if (listener === x[0] && obj === x[1]) {\r\n            this._list.splice(i, 1);            \r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n};\r\n\r\n/**\r\n * Supprimer tous les __listeners__ de la liste.\r\n */\r\nListeners.prototype.clear = function() {\r\n    this._list = [];\r\n};\r\n\r\n/**\r\n * Emettre l'événement. Si un listener retourne ```false```, on n'appelle pas les listeners suivants.\r\n */\r\nListeners.prototype.fire = function() {\r\n    var i, listener, obj, x,\r\n        args = Array.prototype.slice.call( arguments );\r\n    for (i = 0 ; i < this._list.length ; i++) {\r\n        x = this._list[i];\r\n        listener = x[0];\r\n        obj = x[1];\r\n        if (false === listener.apply(obj, args)) return false;\r\n    }    \r\n    return true;\r\n};\r\n\r\n\r\nmodule.exports = Listeners;\r\n\r\n\r\n\r\nmodule.exports._ = _;\n})"]}