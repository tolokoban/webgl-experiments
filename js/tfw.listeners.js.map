{"version":3,"sources":["tfw.listeners.js"],"names":["require","module","exports","_","D","X","intl","arguments","all","Listeners","_list","prototype","add","listener","obj","remove","i","length","push","x","splice","clear","fire","args","Array","slice","call","apply"],"mappings":"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","sourcesContent":["/** @module tfw.listeners */require( 'tfw.listeners', function(require, module, exports) { var _=function(){var D={\"en\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\r\n   /**\r\n * Gestion d'une liste de fonctions devant réagir à des événements.\r\n * @class\r\n */\r\nvar Listeners = function() {\r\n    this._list = [];\r\n};\r\n\r\n/**\r\n * Ajouter un __listener__ à la liste.\r\n * @param listener{function} Fonction à appeler quand l'énément est déclenché.\r\n * @return false  si le __listener__  n'a pas été ajouté  (parce qu'il\r\n * existe déjà ou parce qu'il n'est pas une fonction).\r\n */\r\nListeners.prototype.add = function(listener, obj) {\r\n    if (typeof listener !== 'function') return false;\r\n    this.remove(listener);\r\n    for (var i = 0 ; i < this._list.length ; i++) {\r\n        if (listener === this._list[i]) return false;\r\n    }\r\n    this._list.push([listener, obj]);\r\n    return true;\r\n};\r\n\r\n/**\r\n * Supprimer le __listener__ de la liste.\r\n * @param listener{function} Fonction à appeler quand l'énément est déclenché.\r\n * @return false si le __listener__  n'existe pas.\r\n */\r\nListeners.prototype.remove = function(listener, obj) {\r\n    if (typeof listener !== 'function') return false;\r\n    for (var i = 0 ; i < this._list.length ; i++) {\r\n        var x = this._list[i];\r\n        if (listener === x[0] && obj === x[1]) {\r\n            this._list.splice(i, 1);            \r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n};\r\n\r\n/**\r\n * Supprimer tous les __listeners__ de la liste.\r\n */\r\nListeners.prototype.clear = function() {\r\n    this._list = [];\r\n};\r\n\r\n/**\r\n * Emettre l'événement. Si un listener retourne ```false```, on n'appelle pas les listeners suivants.\r\n */\r\nListeners.prototype.fire = function() {\r\n    var i, listener, obj, x,\r\n        args = Array.prototype.slice.call( arguments );\r\n    for (i = 0 ; i < this._list.length ; i++) {\r\n        x = this._list[i];\r\n        listener = x[0];\r\n        obj = x[1];\r\n        if (false === listener.apply(obj, args)) return false;\r\n    }    \r\n    return true;\r\n};\r\n\r\n\r\nmodule.exports = Listeners;\r\n\r\n\r\n\r\nmodule.exports._ = _;\n})"]}