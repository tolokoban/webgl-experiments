"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}require("tfw.binding.converters",function(require,module,exports){function cssUnitConverter(v){if("number"==typeof v)return v+"px";if("string"!=typeof v)return"0";if(v=(""+v).trim().toLowerCase(),"auto"===v||"inherit"===v)return v;var m=RX_CSS_UNIT.exec(v);if(!m)return"0";var scalar=parseFloat(m[1]);if(isNaN(scalar)||0==scalar)return"0";var unit=m[2];return 1>unit.length&&(unit="px"),scalar+unit}function validatorConverter(v){switch(_typeof(v)){case"string":if(0===v.trim().length)return TRUE_FUNC;var rx=new RegExp(v);return function(text){return rx.test(text)};case"function":return function(value){return booleanConverter(v(value))};}return TRUE_FUNC}function booleanConverter(v){switch(_typeof(v)){case"string":return"true"===v.trim().toLowerCase();case"number":return 0!==v;default:return!!v;}}function keysConverter(v){if(!v)return[];var keys=[];for(var key in v)keys.push(key);return keys}function arrayConverter(v){return List.isList(v)?v.slice():Array.isArray(v)?v:[v]}function isEmptyConverter(v){return!v||("string"==typeof v?0===v.trim().length:!("number"!=typeof v.length)&&0===v.length)}function stringConverter(v){return null===v||void 0===v?"":"object"===_typeof(v)?Array.isArray(v)?JSON.stringify(v):intlConverter(v):""+v}function multilangConverter(v){if(!Array.isArray(v)&&"object"!==_typeof(v)){var def={};return def[$.lang()]=""+v,def}return v}function intlConverter(v){if("string"==typeof v)return v;if("undefined"==typeof v)return"";if(null===v)return"";var result=v[$.lang()];if(!result)for(var lang in v){result=v[lang];break}return"string"==typeof result?result:""}function floatConverter(valueForNaN){return"number"==typeof valueForNaN?function(v){var n=parseFloat(v);return isNaN(n)?valueForNaN:n}:parseFloat}function number2time(v){return new Date(v)}function string2time(v){for(var hours=0,minutes=0,seconds=0,digit=0,index=0,len=v.length,count=0;index<len&&-1==="0123456789".indexOf(v.charAt(index));)index++;for(count=0;index<len&&2>count&&-1!==(digit="0123456789".indexOf(v.charAt(index)));)hours=10*hours+digit,index++,count++;for(;index<len&&-1==="0123456789".indexOf(v.charAt(index));)index++;for(count=0;index<len&&2>count&&-1!==(digit="0123456789".indexOf(v.charAt(index)));)minutes=10*minutes+digit,count++,index++;for(;index<len&&-1==="0123456789".indexOf(v.charAt(index));)index++;for(count=0;index<len&&2>count&&-1!==(digit="0123456789".indexOf(v.charAt(index)));)seconds=10*seconds+digit,index++,count++;var d=new Date(0);return d.setHours(hours),d.setMinutes(minutes),d.setSeconds(seconds),d}var _=function(){function _(){return X(D,arguments)}var D={en:{},fr:{}},X=require("$").intl;return _.all=D,_}();var $=require("$"),List=require("tfw.binding.list"),Color=require("tfw.color"),CONVERTERS={areMany:function(v){return!!(v&&"number"==typeof v.length)&&1<v.length},areNotMany:function(v){return!(v&&"number"==typeof v.length)||1>=v.length},array:arrayConverter,boolean:booleanConverter,booleans:function(v){return Array.isArray(v)?v.map(booleanConverter):[]},color:function(v){return"string"==typeof v?Color.instance.parse(v)?Color.instance.stringify():"#000":"#000"},date:function(v){if(v instanceof Date)return v},deg2rad:function(value){var toFloat=floatConverter(0),deg=toFloat(value);return .017453292519943295*deg},divBy100:function(value){var toFloat=floatConverter(0);return .01*toFloat(value)},enum:function(list){list=arrayConverter(list);var caseInsensitiveList=list.map(function(x){return x.toLowerCase()});return function(v){var idx=Math.max(0,caseInsensitiveList.indexOf((""+v).toLowerCase()));return list[idx]}},float:floatConverter,integer:function(valueForNaN){return"number"==typeof valueForNaN?function(v){var n=parseInt(v);return isNaN(n)?valueForNaN:n}:parseInt},intl:intlConverter,isEmpty:isEmptyConverter,isNotEmpty:function(v){return!isEmptyConverter(v)},isNull:function(v){return!!isNaN(v)||!v},isStrictlyPositive:function(v_){var v="number"==typeof _v?_v:parseFloat(v_);return!isNaN(v)&&0<v},isZero:function(v){return 0===v},keys:keysConverter,length:function(v){return v?"number"==typeof v.length?v.length:0:0},list:function(v){return List.isList(v)?v:new List(arrayConverter(v))},multilang:multilangConverter,not:function(v){return!booleanConverter(v)},sortedKeys:function(v){var keys=keysConverter(v);return keys.sort()},string:stringConverter,strings:function(v){return Array.isArray(v)?v.map(function(v){return""+v}):[]},time:function(v){return v instanceof Date?v:"number"==typeof v?number2time(v):"string"==typeof v?string2time(v):null},unit:cssUnitConverter,units:function(v){return Array.isArray(v)?v.map(cssUnitConverter):[]},validator:validatorConverter};exports.get=function(converterName){var converter=CONVERTERS[converterName];if("function"!=typeof converter)throw Error("Converter not found: \"".concat(converterName,"\"!\n")+"Registred converters are: ".concat(Object.keys(CONVERTERS).sort().join(", "),"."));return converter},exports.set=function(converterName,converter){"function"==typeof converter?CONVERTERS[converterName]=converter:delete CONVERTERS[converterName]};var RX_CSS_UNIT=/^(-?[.0-9]+)[ \n\r]*([a-z%]*)/,TRUE_FUNC=function(){return!0};module.exports._=_});
//# sourceMappingURL=tfw.binding.converters.js.map