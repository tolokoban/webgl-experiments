{"output":{"innerCSS":{"*, .dom, .dom * {\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n}\n\nhtml, body {\n    height: 100%;\n    margin: 0;\n    padding: 0;\n    font-family: Josefin Sans;\n    font-size: 19px;\n    background: #cfd8dc;\n}\n\nsection, nav {\n    padding: 1rem;\n    margin: 1rem;\n    display: inline-block;\n    vertical-align: top;\n    max-width: 1000px;\n}\n\nspan, strong, b, em, i, code {\n    display: inline;\n    margin: 0;\n    padding: 0;\n}\n\nbody.theme-webgl .theme-label {\n    color: rgba(0,0,0,.8);\n    font-family: sans-serif;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    font-variant: small-caps;\n    line-height: 1rem;\n    font-size: .8rem;\n    padding: 0 .5rem;\n    margin: 0;\n    text-align: left;\n    vertical-align: middle;\n}\n\nbody.theme-webgl .theme-info {\n    color: #000;\n    background: #fff;\n    margin: .5rem;\n    padding: 1rem;\n    text-align: justify;\n    box-shadow: 0 0 1px rgba(0,0,0,.4);\n}\n\n/* Elevations: https://material.google.com/what-is-material/elevation-shadows.html#elevation-shadows-elevation-android- */\n\nbody.theme-webgl .theme-elevation-0 {\n    box-shadow: none;\n    z-index: 0;\n}\n\nbody.theme-webgl .theme-elevation-1 {\n    box-shadow: 0 .5px 1px rgba(0,0,0,.4);\n    transform: translateY(-.5px);\n    z-index: 1;\n}\n\nbody.theme-webgl .theme-elevation-2 {\n    box-shadow: 0 1px 2px rgba(0,0,0,.4);\n    transform: translateY(-1px);\n    z-index: 2;\n}\n\nbody.theme-webgl .theme-elevation-3 {\n    box-shadow: 0 1.5px 3px rgba(0,0,0,.4);\n    transform: translateY(-1.5px);\n    z-index: 3;\n}\n\nbody.theme-webgl .theme-elevation-4 {\n    box-shadow: 0 2px 4px rgba(0,0,0,.4);\n    transform: translateY(-2px);\n    z-index: 4;\n}\n\nbody.theme-webgl .theme-elevation-6 {\n    box-shadow: 0 3px 6px rgba(0,0,0,.4);\n    transform: translateY(-3px);\n    z-index: 6;\n}\n\nbody.theme-webgl .theme-elevation-8 {\n    box-shadow: 0 4px 8px rgba(0,0,0,.4);\n    transform: translateY(-4px);\n    z-index: 8;\n}\n\nbody.theme-webgl .theme-elevation-9 {\n    box-shadow: 0 4.5px 9px rgba(0,0,0,.4);\n    transform: translateY(-4.5px);\n    z-index: 9;\n}\n\nbody.theme-webgl .theme-elevation-12 {\n    box-shadow: 0 6px 12px rgba(0,0,0,.4);\n    transform: translateY(-6px);\n    z-index: 12;\n}\n\nbody.theme-webgl .theme-elevation-16 {\n    box-shadow: 0 8px 16px rgba(0,0,0,.4);\n    transform: translateY(-8px);\n    z-index: 16;\n}\n\nbody.theme-webgl .theme-elevation-18 {\n    box-shadow: 0 9px 18px rgba(0,0,0,.4);\n    transform: translateY(-9px);\n    z-index: 18;\n}\n\nbody.theme-webgl .theme-elevation-24 {\n    box-shadow: 0 12px 24px rgba(0,0,0,.4);\n    transform: translateY(-12px);\n    z-index: 24;\n}\n\n/* main */\nbody.theme-webgl .theme-color-bg-0{background-color: #EEFFFF}\nbody.theme-webgl .theme-color-0{color: #EEFFFF}\nbody.theme-webgl .theme-color-bg-1{background-color: #DDF5F8}\nbody.theme-webgl .theme-color-1{color: #DDF5F8}\nbody.theme-webgl .theme-color-bg-2{background-color: #CCEBF1}\nbody.theme-webgl .theme-color-2{color: #CCEBF1}\nbody.theme-webgl .theme-color-bg-3{background-color: #BBE0EB}\nbody.theme-webgl .theme-color-3{color: #BBE0EB}\nbody.theme-webgl .theme-color-bg-4{background-color: #AAD6E4}\nbody.theme-webgl .theme-color-4{color: #AAD6E4}\nbody.theme-webgl .theme-color-bg-5{background-color: #99ccdd}\nbody.theme-webgl .theme-color-5{color: #99ccdd}\nbody.theme-webgl .theme-color-bg-6{background-color: #7AB8CC}\nbody.theme-webgl .theme-color-6{color: #7AB8CC}\nbody.theme-webgl .theme-color-bg-7{background-color: #5CA3BB}\nbody.theme-webgl .theme-color-7{color: #5CA3BB}\nbody.theme-webgl .theme-color-bg-8{background-color: #3D8FAA}\nbody.theme-webgl .theme-color-8{color: #3D8FAA}\nbody.theme-webgl .theme-color-bg-9{background-color: #1F7A99}\nbody.theme-webgl .theme-color-9{color: #1F7A99}\nbody.theme-webgl .theme-color-bg-10{background-color: #006688}\nbody.theme-webgl .theme-color-10{color: #006688}\n/* accent */\nbody.theme-webgl .theme-color-bg-A0{background-color: #FFFFCC}\nbody.theme-webgl .theme-color-A0{color: #FFFFCC}\nbody.theme-webgl .theme-color-bg-A1{background-color: #FFE7A3}\nbody.theme-webgl .theme-color-A1{color: #FFE7A3}\nbody.theme-webgl .theme-color-bg-A2{background-color: #FFCF7A}\nbody.theme-webgl .theme-color-A2{color: #FFCF7A}\nbody.theme-webgl .theme-color-bg-A3{background-color: #FFB852}\nbody.theme-webgl .theme-color-A3{color: #FFB852}\nbody.theme-webgl .theme-color-bg-A4{background-color: #FFA029}\nbody.theme-webgl .theme-color-A4{color: #FFA029}\nbody.theme-webgl .theme-color-bg-A5{background-color: #ff8800}\nbody.theme-webgl .theme-color-A5{color: #ff8800}\nbody.theme-webgl .theme-color-bg-A6{background-color: #F07C00}\nbody.theme-webgl .theme-color-A6{color: #F07C00}\nbody.theme-webgl .theme-color-bg-A7{background-color: #E16F00}\nbody.theme-webgl .theme-color-A7{color: #E16F00}\nbody.theme-webgl .theme-color-bg-A8{background-color: #D16300}\nbody.theme-webgl .theme-color-A8{color: #D16300}\nbody.theme-webgl .theme-color-bg-A9{background-color: #C25600}\nbody.theme-webgl .theme-color-A9{color: #C25600}\nbody.theme-webgl .theme-color-bg-A10{background-color: #B34A00}\nbody.theme-webgl .theme-color-A10{color: #B34A00}\n/* back */\nbody.theme-webgl .theme-color-bg-B0{background-color: #FFFFFF}\nbody.theme-webgl .theme-color-B0{color: #FFFFFF}\nbody.theme-webgl .theme-color-bg-B1{background-color: #F5F7F8}\nbody.theme-webgl .theme-color-B1{color: #F5F7F8}\nbody.theme-webgl .theme-color-bg-B2{background-color: #ECEFF1}\nbody.theme-webgl .theme-color-B2{color: #ECEFF1}\nbody.theme-webgl .theme-color-bg-B3{background-color: #E2E8EA}\nbody.theme-webgl .theme-color-B3{color: #E2E8EA}\nbody.theme-webgl .theme-color-bg-B4{background-color: #D9E0E3}\nbody.theme-webgl .theme-color-B4{color: #D9E0E3}\nbody.theme-webgl .theme-color-bg-B5{background-color: #cfd8dc}\nbody.theme-webgl .theme-color-B5{color: #cfd8dc}\nbody.theme-webgl .theme-color-bg-B6{background-color: #BECACF}\nbody.theme-webgl .theme-color-B6{color: #BECACF}\nbody.theme-webgl .theme-color-bg-B7{background-color: #ACBBC2}\nbody.theme-webgl .theme-color-B7{color: #ACBBC2}\nbody.theme-webgl .theme-color-bg-B8{background-color: #9BADB6}\nbody.theme-webgl .theme-color-B8{color: #9BADB6}\nbody.theme-webgl .theme-color-bg-B9{background-color: #899EA9}\nbody.theme-webgl .theme-color-B9{color: #899EA9}\nbody.theme-webgl .theme-color-bg-B10{background-color: #78909C}\nbody.theme-webgl .theme-color-B10{color: #78909C}\n":1,"pre.highlight {\n    position: relative;\n    margin: 4px;\n    padding: 8px;\n    background: #000;\n    border: 2px solid #555;\n    box-shadow: 0 0 5px #fff;\n    color: #ccc;\n    border-radius: .5em;\n    overflow-x: auto;\n}\n\npre.highlight.js::after {\n    content: \"Javascript\";\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 4px;\n    font-variant: small-fonts;\n    opacity: .3;\n    color: #fff;\n}\n\npre.highlight .keyword {\n    color: #07f;\n    font-weight: bold;\n}\n\npre.highlight .keyword2 {\n    color: #0ff;\n    font-weight: bold;\n}\n\npre.highlight .function {\n    color: #fff;\n    font-weight: bold;\n}\n\npre.highlight .symbol {\n    color: #f08;\n}\n\npre.highlight .operator {\n    color: #f80;\n}\n\npre.highlight .comment {\n    color: #777;\n}\n\npre.highlight .string {\n    color: #0f0;\n}\n\npre.highlight .regexp {\n    background: #ff8;\n    color: #000;\n}\n":1,"pre.highlight {\n    position: relative;\n    margin: 4px;\n    padding: 8px;\n    background: #000;\n    border: 2px solid #555;\n    box-shadow: 0 0 5px #fff;\n    color: #ccc;\n    border-radius: .5em;\n    overflow-x: auto;\n    font-size: 85%;\n}\n\npre.highlight.js::after {\n    content: \"Javascript\";\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 4px;\n    font-variant: small-fonts;\n    opacity: .3;\n    color: #fff;\n}\n\npre.highlight .keyword {\n    color: #07f;\n    font-weight: bold;\n}\n\npre.highlight .keyword2 {\n    color: #0ff;\n    font-weight: bold;\n}\n\npre.highlight .function {\n    color: #fff;\n    font-weight: bold;\n}\n\npre.highlight .symbol {\n    color: #f08;\n}\n\npre.highlight .operator {\n    color: #f80;\n}\n\npre.highlight .comment {\n    color: #777;\n}\n\npre.highlight .string {\n    color: #0f0;\n}\n\npre.highlight .regexp {\n    background: #ff8;\n    color: #000;\n}\n":1},"outerCSS":{},"innerJS":{},"require":{"mod/x-widget":1,"mod/wdg.gl0":1},"modules":[],"initJS":{"var W = require('x-widget');":1,"        W('wdg.gl013', 'wdg.gl0', {\n            width: \"240\",\n            height: \"160\"})":1},"postInitJS":{},"include":{"mod/wdg.gl0.js":1,"mod/gl0.vertex.c":1,"mod/gl0.fragment.c":1,"nav.htm":1},"resource":{},"dynamicModules":{},"root":{"children":[{"type":1,"name":"html","children":[{"type":1,"name":"head","children":[{"type":1,"name":"link","attribs":{"href":"https://fonts.googleapis.com/css?family=Josefin+Sans","rel":"stylesheet","type":"text/css"}},{"type":1,"name":"title","attribs":{},"children":[{"type":2,"text":"webgl-experiments"}]},{"type":1,"name":"meta","attribs":{"charset":"utf-8"},"void":true},{"type":1,"name":"meta","attribs":{"name":"viewport","content":"width=device-width, initial-scale=1, maximum-scale=1"},"void":true}]},{"type":1,"name":"body","children":[{"type":1,"name":"section","attribs":{"class":"theme-color-bg-B0 theme-elevation-4"},"children":[{"children":[{"type":1,"name":"h1","attribs":{"id":"comprendre-webgl"},"children":[{"type":2,"text":"Comprendre WebGL"}],"pos":0},{"type":2,"text":"\n"},{"type":1,"name":"h2","attribs":{"id":"introduction"},"children":[{"type":2,"text":"Introduction"}],"pos":48},{"type":2,"text":"\n"},{"type":1,"name":"p","attribs":{},"children":[{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"WebGL"}],"pos":91},{"type":2,"text":" est une bibliothèque qui permet de faire de l&#39;"},{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"Open GL"}],"pos":164},{"type":2,"text":" sur le web. Et l&#39;"},{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"Open GL"}],"pos":210},{"type":2,"text":" est une bibliothèque qui permet d&#39;afficher des pixels à l&#39;écran en tirant profit de l&#39;"},{"type":1,"name":"em","attribs":{},"children":[{"type":2,"text":"architecture parallèle"}],"pos":333},{"type":2,"text":" des cartes graphiques."}],"pos":88},{"type":2,"text":"\n"},{"type":1,"name":"p","attribs":{},"children":[{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"Open GL"}],"pos":395},{"type":2,"text":" est donc à la fois "},{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"puissante"}],"pos":439},{"type":2,"text":" et "},{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"complexe"}],"pos":469},{"type":2,"text":"."}],"pos":392},{"type":2,"text":"\n"},{"type":1,"name":"p","attribs":{},"children":[{"type":2,"text":"Commençons par ce qui prendrait trois lignes avec un canvas 2d : le dessin d&#39;un triangle."}],"pos":500},{"type":2,"text":"\n"},{"type":1,"name":"p","attribs":{},"children":[{"type":1,"name":"div","attribs":{"id":"wdg.gl013","style":"display:none"},"children":[],"pos":604}],"pos":601},{"type":2,"text":"\n"},{"type":1,"name":"h3","attribs":{"id":"un-peu-de-th-orie"},"children":[{"type":2,"text":"Un peu de théorie"}],"pos":656},{"type":2,"text":"\n"},{"type":1,"name":"p","attribs":{},"children":[{"type":2,"text":"Basiquement, WebGL est capable de dessiner des triangles, des lignes et des points. Et c&#39;est tout !\nTout réside en fait dans la façon dont il dessine ces trois formes de base."}],"pos":706},{"type":2,"text":"\n"},{"type":1,"name":"p","attribs":{},"children":[{"type":2,"text":"Pour chaque affichage, il y a deux étapes obligatoires :"}],"pos":893},{"type":2,"text":"\n"},{"type":1,"name":"ul","attribs":{},"children":[{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"La création de points"}],"pos":966},{"type":2,"text":" (un point se dit "},{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"vertex"}],"pos":1022},{"type":2,"text":" en anglais)."}],"pos":962},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"La création de pixels"}],"pos":1068},{"type":2,"text":"."}],"pos":1064},{"type":2,"text":"\n"}],"pos":957},{"type":2,"text":"\n"},{"type":1,"name":"p","attribs":{},"children":[{"type":2,"text":"Par exemple, pour dessiner un triangle, il faut :"}],"pos":1119},{"type":2,"text":"\n"},{"type":1,"name":"ul","attribs":{},"children":[{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":2,"text":"Créer trois points possèdant chacun 3 coordonnées : X, Y et Z."}],"pos":1181},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":2,"text":"Déterminer pour chaque pixel dans la région de ce triangle, sa couleur, s&#39;il faut l&#39;afficher, s&#39;il faut le mélanger à l&#39;arrière-plan, etc..."}],"pos":1253},{"type":2,"text":"\n"}],"pos":1176},{"type":2,"text":"\n"},{"type":1,"name":"p","attribs":{},"children":[{"type":2,"text":"Pour cela, WebGL met à notre disposition le "},{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"vertex shader"}],"pos":1472},{"type":2,"text":" et le "},{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"fragment shader"}],"pos":1509},{"type":2,"text":"."}],"pos":1425},{"type":2,"text":"\n"},{"type":1,"name":"p","attribs":{},"children":[{"type":2,"text":"Le principe est alors le suivant :"}],"pos":1547},{"type":2,"text":"\n"},{"type":1,"name":"ul","attribs":{},"children":[{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":2,"text":"On définit un "},{"type":1,"name":"em","attribs":{},"children":[{"type":2,"text":"point"}],"pos":1612},{"type":2,"text":" comme un ensemble d&#39;attributs.\nPar exemple, "},{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"I"}],"pos":1675},{"type":2,"text":", "},{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"J"}],"pos":1695},{"type":2,"text":", "},{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"C"}],"pos":1715},{"type":2,"text":" et "},{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"W"}],"pos":1737},{"type":2,"text":". Ces attributs n&#39;ont aucun sens pour la carte graphique et peuvent donc avoir le nom qu&#39;on veut et être aussi nombreux qu&#39;on souhaite."}],"pos":1594},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":2,"text":"La carte graphique possède plusieurs processeurs capables d&#39;exécuter un "},{"type":1,"name":"em","attribs":{},"children":[{"type":2,"text":"vertex shader"}],"pos":1988},{"type":2,"text":".\nDu coup, nos "},{"type":1,"name":"em","attribs":{},"children":[{"type":2,"text":"points"}],"pos":2025},{"type":2,"text":" vont être transformés en "},{"type":1,"name":"em","attribs":{},"children":[{"type":2,"text":"coordonnées 3D"}],"pos":2066},{"type":2,"text":" en parallèle.\nAinsi, à chaque ensemble "},{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"(I, J, C, W)"}],"pos":2129},{"type":2,"text":" va correspondre trois valeurs "},{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"(x, y, z)"}],"pos":2189},{"type":2,"text":" qui sont des coordonnées qui doivent toutes être comprises entre -1.0 et +1.0."}],"pos":1908},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":2,"text":"La carte graphique utilise alors les valeurs "},{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"x"}],"pos":2349},{"type":2,"text":" et "},{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"y"}],"pos":2371},{"type":2,"text":" pour déterminer la position exacte de chaque vertex sur l&#39;écran.\n"},{"type":1,"name":"code","attribs":{},"children":[{"type":2,"text":"(-1.0, -1.0)"}],"pos":2459},{"type":2,"text":" correspond au pixel en bas à gauche et "},{"type":1,"name":"code","attribs":{},"children":[{"type":2,"text":"(1.0, 1.0)"}],"pos":2524},{"type":2,"text":" à celui en haut à droite. La coordonnée "},{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"z"}],"pos":2588},{"type":2,"text":" sert à définir si un point et devant ou derrière un autre."}],"pos":2300},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":2,"text":"Ensuite, si on lui a demandé de dessiner des triangles, il va déterminer quels sont les pixels qu&#39;il faut afficher.\nIl va donc passer les valeurs "},{"type":1,"name":"code","attribs":{},"children":[{"type":2,"text":"(x, y, z)"}],"pos":2825},{"type":2,"text":" de chaque futur pixel au "},{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"fragment shader"}],"pos":2873},{"type":2,"text":" qui va retourner la couleur à utiliser."}],"pos":2671},{"type":2,"text":"\n"}],"pos":1589},{"type":2,"text":"\n"},{"type":1,"name":"h3","attribs":{"id":"tr-ve-de-bavardage-passons-au-code-"},"children":[{"type":2,"text":"Trève de bavardage, passons au code."}],"pos":2957},{"type":2,"text":"\n"},{"type":1,"name":"p","attribs":{},"children":[{"type":2,"text":"On commence par récupérer le contexte "},{"type":1,"name":"em","attribs":{},"children":[{"type":2,"text":"webgl"}],"pos":3085},{"type":2,"text":" d&#39;un canvas :\n"},{"type":1,"name":"pre","attribs":{"class":"custom highlight js"},"children":[{"type":2,"text":"\n    var gl "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"="}],"pos":3163},{"type":2,"text":" canvas."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"getContext"}],"pos":3202},{"type":2,"text":"("},{"type":1,"name":"span","attribs":{"class":"string"},"children":[{"type":2,"text":"\"webgl\""}],"pos":3243},{"type":2,"text":")\n            "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"||"}],"pos":3292},{"type":2,"text":" canvas."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"getContext"}],"pos":3332},{"type":2,"text":"("},{"type":1,"name":"span","attribs":{"class":"string"},"children":[{"type":2,"text":"\"experimental-webgl\""}],"pos":3373},{"type":2,"text":");"}],"pos":3118}],"pos":3044},{"type":2,"text":"\n"},{"type":1,"name":"p","attribs":{},"children":[{"type":2,"text":"Ensuite, il faut créer un "},{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"programme de shading"}],"pos":3463},{"type":2,"text":".\nIl s&#39;agit de code, ressemblant fort à du C, qui sera compilé dans la carte graphique et utilisé simultanément par ses nombreux processeurs pour mettre à jour les pixels.\nNous reviendrons un peu plus tard sur cela.\n"},{"type":1,"name":"pre","attribs":{"class":"custom highlight js"},"children":[{"type":2,"text":"\n    var shaderProgram "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"="}],"pos":3776},{"type":2,"text":" gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"createProgram"}],"pos":3811},{"type":2,"text":"();\n    gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"attachShader"}],"pos":3865},{"type":2,"text":"(shaderProgram, "},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"getVertexShader"}],"pos":3923},{"type":2,"text":"(gl, GLOBAL['vertex']) );\n    gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"attachShader"}],"pos":4001},{"type":2,"text":"(shaderProgram, "},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"getFragmentShader"}],"pos":4059},{"type":2,"text":"(gl, GLOBAL['fragment']) );\n    gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"linkProgram"}],"pos":4141},{"type":2,"text":"(shaderProgram);\n    gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"useProgram"}],"pos":4206},{"type":2,"text":"(shaderProgram);"}],"pos":3720}],"pos":3434},{"type":2,"text":"\n"},{"type":1,"name":"p","attribs":{},"children":[{"type":2,"text":"Nous allons maintenant définir les coordonnées des sommets (vertices) de notre triangle rectangle. Chaque coordonnée est exprimée en trois dimensions.\n"},{"type":1,"name":"pre","attribs":{"class":"custom highlight js"},"children":[{"type":2,"text":"\n    "},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// Définition des attributs de nos trois points.\n    "}],"pos":4465},{"type":2,"text":"var arrPoints "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"="}],"pos":4561},{"type":1,"name":"span","attribs":{"class":"keyword"},"children":[{"type":2,"text":" new"}],"pos":4592},{"type":2,"text":" "},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"Float32Array"}],"pos":4626},{"type":2,"text":"([\n        "},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// attI, attJ, attC.r, attC.g, attC.b\n    "}],"pos":4679},{"type":2,"text":"        "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"-"}],"pos":4758},{"type":2,"text":".4, "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"+"}],"pos":4793},{"type":2,"text":".8,  1,      0,      0,\n            "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"+"}],"pos":4860},{"type":2,"text":".8, "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"-"}],"pos":4895},{"type":2,"text":".8,  0,      1,      0,\n            "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"-"}],"pos":4962},{"type":2,"text":".8, "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"-"}],"pos":4997},{"type":2,"text":".8,  0,      0,      1\n    ]);\n    "},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// Taille d'une valeur en octets.\n    "}],"pos":5063},{"type":2,"text":"var bpe "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"="}],"pos":5138},{"type":2,"text":" arrPoints.BYTES_PER_ELEMENT;\n    "},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// Nombre d'octets utilisés par point.\n    "}],"pos":5203},{"type":2,"text":"var block "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"="}],"pos":5285},{"type":2,"text":" 5 "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"*"}],"pos":5319},{"type":2,"text":" bpe;\n    "},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// Création d'un buffer dans la carte graphique.\n    "}],"pos":5360},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// Un buffer est un tableau de nombres.\n    "}],"pos":5442},{"type":2,"text":"var triangleVerticesBuffer "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"="}],"pos":5542},{"type":2,"text":" gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"createBuffer"}],"pos":5577},{"type":2,"text":"();\n    "},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// Définir ce buffer comme le buffer actif.\n    "}],"pos":5627},{"type":2,"text":"gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"bindBuffer"}],"pos":5707},{"type":2,"text":"(gl.ARRAY_BUFFER, triangleVerticesBuffer);\n    "},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// Copier des données dans le buffer actif.\n    "}],"pos":5794},{"type":2,"text":"gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"bufferData"}],"pos":5874},{"type":2,"text":"(gl.ARRAY_BUFFER, arrPoints, gl.STATIC_DRAW);"}],"pos":4427}],"pos":4273},{"type":2,"text":"\n"},{"type":1,"name":"p","attribs":{},"children":[{"type":2,"text":"Il faut ensuite déclarer un "},{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"attribut"}],"pos":6001},{"type":2,"text":" qui sera utilisé par les shaders.\nL&#39;attribut que nous créons sera nommé "},{"type":1,"name":"code","attribs":{},"children":[{"type":2,"text":"attVertexPosition"}],"pos":6103},{"type":2,"text":".\n"},{"type":1,"name":"pre","attribs":{"class":"custom highlight js"},"children":[{"type":2,"text":"\n    var attI "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"="}],"pos":6182},{"type":2,"text":" gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"getAttribLocation"}],"pos":6217},{"type":2,"text":"(shaderProgram, "},{"type":1,"name":"span","attribs":{"class":"string"},"children":[{"type":2,"text":"\"attI\""}],"pos":6280},{"type":2,"text":");\n    gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"enableVertexAttribArray"}],"pos":6324},{"type":2,"text":"(attI);\n    gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"vertexAttribPointer"}],"pos":6392},{"type":2,"text":"(attI, 1, gl.FLOAT, false, block, 0);"},{"type":1,"name":"span","attribs":{"class":"keyword"},"children":[{"type":2,"text":"\n    var"}],"pos":6478},{"type":2,"text":" attJ "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"="}],"pos":6521},{"type":2,"text":" gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"getAttribLocation"}],"pos":6556},{"type":2,"text":"(shaderProgram, "},{"type":1,"name":"span","attribs":{"class":"string"},"children":[{"type":2,"text":"\"attJ\""}],"pos":6619},{"type":2,"text":");\n    gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"enableVertexAttribArray"}],"pos":6663},{"type":2,"text":"(attJ);\n    gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"vertexAttribPointer"}],"pos":6731},{"type":2,"text":"(attJ, 1, gl.FLOAT, false, block, 1 "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"*"}],"pos":6816},{"type":2,"text":" bpe);"},{"type":1,"name":"span","attribs":{"class":"keyword"},"children":[{"type":2,"text":"\n    var"}],"pos":6853},{"type":2,"text":" attC "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"="}],"pos":6896},{"type":2,"text":" gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"getAttribLocation"}],"pos":6931},{"type":2,"text":"(shaderProgram, "},{"type":1,"name":"span","attribs":{"class":"string"},"children":[{"type":2,"text":"\"attC\""}],"pos":6994},{"type":2,"text":");\n    gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"enableVertexAttribArray"}],"pos":7038},{"type":2,"text":"(attC);\n    gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"vertexAttribPointer"}],"pos":7106},{"type":2,"text":"(attC, 3, gl.FLOAT, false, block, 2 "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"*"}],"pos":7191},{"type":2,"text":" bpe);"}],"pos":6135}],"pos":5970},{"type":2,"text":"\n"},{"type":1,"name":"p","attribs":{},"children":[{"type":2,"text":"Pour finir, on lance le rendu. D&#39;abord on définit la couleur de fond (un bleu tout simple). Puis on efface l&#39;écran et on dessine un triangle.\n"},{"type":1,"name":"pre","attribs":{"class":"custom highlight js"},"children":[{"type":2,"text":"\n    "},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// Définir le noir (0,0,0) comme couleur d'arrière-plan.\n    "}],"pos":7430},{"type":2,"text":"gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"clearColor"}],"pos":7523},{"type":2,"text":"(0.0, 0.0, 0.0, 1.0);\n    "},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// Effacer l'écran actuel.\n    "}],"pos":7589},{"type":2,"text":"gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"clear"}],"pos":7652},{"type":2,"text":"(gl.COLOR_BUFFER_BIT "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"|"}],"pos":7708},{"type":2,"text":" gl.DEPTH_BUFFER_BIT);\n    "},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// Lancer le dessin du triangle composé de 3 points.\n    "}],"pos":7766},{"type":2,"text":"gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"drawArrays"}],"pos":7855},{"type":2,"text":"(gl.TRIANGLE_STRIP, 0, 3);"}],"pos":7392}],"pos":7239},{"type":2,"text":"\n"},{"type":1,"name":"p","attribs":{},"children":[{"type":2,"text":"Vous avez pratiquement tout le code pour faire la même chose. Il ne manque que les shaders qui ont été ici remplacés par "},{"type":1,"name":"code","attribs":{},"children":[{"type":2,"text":"GLOBAL[&#39;vertex&#39;]"}],"pos":8056},{"type":2,"text":" et "},{"type":1,"name":"code","attribs":{},"children":[{"type":2,"text":"GLOBAL[&#39;fragment&#39;]"}],"pos":8097},{"type":2,"text":". \nAinsi que les fonctions utilitaires "},{"type":1,"name":"code","attribs":{},"children":[{"type":2,"text":"getFragmentShader"}],"pos":8175},{"type":2,"text":" et "},{"type":1,"name":"code","attribs":{},"children":[{"type":2,"text":"getVertexShader"}],"pos":8209},{"type":2,"text":" :\n"},{"type":1,"name":"pre","attribs":{"class":"custom highlight js"},"children":[{"type":2,"text":"\n    function "},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"getShader"}],"pos":8287},{"type":2,"text":"( type, gl, code ) {\n       "},{"type":1,"name":"span","attribs":{"class":"keyword"},"children":[{"type":2,"text":" var"}],"pos":8354},{"type":2,"text":" shader "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"="}],"pos":8395},{"type":2,"text":" gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"createShader"}],"pos":8430},{"type":2,"text":"( type );\n        gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"shaderSource"}],"pos":8493},{"type":2,"text":"( shader, code );\n        gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"compileShader"}],"pos":8564},{"type":2,"text":"( shader );\n       "},{"type":1,"name":"span","attribs":{"class":"keyword"},"children":[{"type":2,"text":" if"}],"pos":8626},{"type":2,"text":" (!gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"getShaderParameter"}],"pos":8664},{"type":2,"text":"(shader, gl.COMPILE_STATUS)) {\n            console."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"log"}],"pos":8763},{"type":2,"text":"( code );\n            console."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"error"}],"pos":8826},{"type":2,"text":"("},{"type":1,"name":"span","attribs":{"class":"string"},"children":[{"type":2,"text":"\"An error occurred compiling the shader: \""}],"pos":8862},{"type":2,"text":" "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"+"}],"pos":8933},{"type":2,"text":" gl."},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"getShaderInfoLog"}],"pos":8968},{"type":2,"text":"(shader));\n           "},{"type":1,"name":"span","attribs":{"class":"keyword"},"children":[{"type":2,"text":" return"}],"pos":9036},{"type":2,"text":" null;\n        }\n    \n       "},{"type":1,"name":"span","attribs":{"class":"keyword"},"children":[{"type":2,"text":" return"}],"pos":9101},{"type":2,"text":" shader;\n    }\n    "},{"type":1,"name":"span","attribs":{"class":"keyword"},"children":[{"type":2,"text":"\n    function"}],"pos":9156},{"type":2,"text":" "},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"getFragmentShader"}],"pos":9199},{"type":2,"text":"( gl, code ) {\n       "},{"type":1,"name":"span","attribs":{"class":"keyword"},"children":[{"type":2,"text":" return"}],"pos":9268},{"type":2,"text":" "},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"getShader"}],"pos":9305},{"type":2,"text":"( gl.FRAGMENT_SHADER, gl, code );\n    }\n    "},{"type":1,"name":"span","attribs":{"class":"keyword"},"children":[{"type":2,"text":"\n    function"}],"pos":9388},{"type":2,"text":" "},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"getVertexShader"}],"pos":9431},{"type":2,"text":"( gl, code ) {\n       "},{"type":1,"name":"span","attribs":{"class":"keyword"},"children":[{"type":2,"text":" return"}],"pos":9498},{"type":2,"text":" "},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"getShader"}],"pos":9535},{"type":2,"text":"( gl.VERTEX_SHADER, gl, code );\n    }"}],"pos":8240}],"pos":7932},{"type":2,"text":"\n"},{"type":1,"name":"p","attribs":{},"children":[{"type":1,"name":"pre","attribs":{"class":"custom highlight js"},"children":[{"type":2,"text":"\n    var GLOBAL "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"="}],"pos":9674},{"type":2,"text":" {\n      vertex:\n        "},{"type":1,"name":"span","attribs":{"class":"string"},"children":[{"type":2,"text":"\"attribute float attI;\""}],"pos":9730},{"type":2,"text":" "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"+"}],"pos":9782},{"type":2,"text":"\n        "},{"type":1,"name":"span","attribs":{"class":"string"},"children":[{"type":2,"text":"\"attribute float attJ;\""}],"pos":9822},{"type":2,"text":" "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"+"}],"pos":9874},{"type":2,"text":"\n        "},{"type":1,"name":"span","attribs":{"class":"string"},"children":[{"type":2,"text":"\"attribute vec3 attC;\""}],"pos":9914},{"type":2,"text":" "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"+"}],"pos":9965},{"type":2,"text":"\n        "},{"type":1,"name":"span","attribs":{"class":"string"},"children":[{"type":2,"text":"\"varying vec3 varColor;\""}],"pos":10005},{"type":2,"text":" "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"+"}],"pos":10058},{"type":2,"text":"\n        "},{"type":1,"name":"span","attribs":{"class":"string"},"children":[{"type":2,"text":"\"void main() {\""}],"pos":10098},{"type":2,"text":" "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"+"}],"pos":10142},{"type":2,"text":"\n        "},{"type":1,"name":"span","attribs":{"class":"string"},"children":[{"type":2,"text":"\"  gl_Position = vec4( attI, attJ, 0.0, 1.0 );\""}],"pos":10182},{"type":2,"text":" "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"+"}],"pos":10258},{"type":2,"text":"\n        "},{"type":1,"name":"span","attribs":{"class":"string"},"children":[{"type":2,"text":"\"  varColor = attC;\""}],"pos":10298},{"type":2,"text":" "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"+"}],"pos":10347},{"type":2,"text":"\n        "},{"type":1,"name":"span","attribs":{"class":"string"},"children":[{"type":2,"text":"\"}\""}],"pos":10387},{"type":2,"text":",\n      fragment:\n        "},{"type":1,"name":"span","attribs":{"class":"string"},"children":[{"type":2,"text":"\"precision mediump float;\""}],"pos":10444},{"type":2,"text":" "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"+"}],"pos":10499},{"type":2,"text":"\n        "},{"type":1,"name":"span","attribs":{"class":"string"},"children":[{"type":2,"text":"\"varying vec3 varColor;\""}],"pos":10539},{"type":2,"text":" "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"+"}],"pos":10592},{"type":2,"text":"\n        "},{"type":1,"name":"span","attribs":{"class":"string"},"children":[{"type":2,"text":"\"void main() {\""}],"pos":10632},{"type":2,"text":" "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"+"}],"pos":10676},{"type":2,"text":"\n        "},{"type":1,"name":"span","attribs":{"class":"string"},"children":[{"type":2,"text":"\"  gl_FragColor = vec4(varColor.rgb, 1.0);\""}],"pos":10716},{"type":2,"text":" "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"+"}],"pos":10788},{"type":2,"text":"\n        "},{"type":1,"name":"span","attribs":{"class":"string"},"children":[{"type":2,"text":"\"}\""}],"pos":10828},{"type":2,"text":"\n    };"}],"pos":9625}],"pos":9622},{"type":2,"text":"\n"},{"type":1,"name":"p","attribs":{},"children":[{"type":2,"text":"Pour plus de clarté, voici les codes originaux :\n"},{"type":1,"name":"pre","attribs":{"class":"custom highlight js"},"children":[{"type":2,"text":"\n    attribute float attI;\n    attribute float attJ;\n    "},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// `vec3` est un vecteur à trois dimensions.\n    "}],"pos":11019},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// On peut lire les valeurs de ces dimensions\n    "}],"pos":11097},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// de plusieurs façons :\n    "}],"pos":11176},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"//   * attC.r == attC.x\n    "}],"pos":11234},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"//   * attC.g == attC.y\n    "}],"pos":11291},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"//   * attC.b == attC.z\n    "}],"pos":11348},{"type":2,"text":"attribute vec3 attC;\n    \n    "},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// Les `varying` sont des variables qu'on peut\n    "}],"pos":11435},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// passer du vertex shader au fragment shader.\n    "}],"pos":11515},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// Leurs valeurs sont interpolées entre les\n    "}],"pos":11595},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// vertex les plus proches.\n    "}],"pos":11672},{"type":2,"text":"varying vec3 varColor;\n    \n    \n    "},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// La fonction principale d'un shader soit toujours\n    "}],"pos":11770},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// s'appeler `main`, n'avoir aucun argument et\n    "}],"pos":11855},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// ne rien retourner.\n    "}],"pos":11935},{"type":2,"text":"void "},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"main"}],"pos":11995},{"type":2,"text":"() {\n      "},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// `gl_Position` est une variable SPECIALE de WebGL.\n    "}],"pos":12040},{"type":2,"text":"  "},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// Il faut obligatoirement la renseigner pour\n    "}],"pos":12128},{"type":2,"text":"  "},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// définir les coordonnées du vertex résultant.\n    "}],"pos":12209},{"type":2,"text":"  gl_Position "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"="}],"pos":12304},{"type":2,"text":" "},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"vec4"}],"pos":12336},{"type":2,"text":"( attI, attJ, 0.0, 1.0 );\n      "},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// On transmet la couleur au fragment color.\n    "}],"pos":12402},{"type":2,"text":"  varColor "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"="}],"pos":12491},{"type":2,"text":" attC;\n    }"}],"pos":10929},{"type":2,"text":"\n"},{"type":1,"name":"pre","attribs":{"class":"custom highlight js"},"children":[{"type":2,"text":"\n    "},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// Préciser la précision par défaut.\n    "}],"pos":12579},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// Une ligne qu'il est conseillé de mettre\n    "}],"pos":12649},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// au début de tous vos fragment shaders\n    "}],"pos":12725},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// pour éviter de devoir préciser la précision\n    "}],"pos":12799},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// à chaque déclaration de variable.\n    "}],"pos":12879},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// Les précisions possibles sont\n    "}],"pos":12949},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// lowp, mediump et highp.\n    "}],"pos":13015},{"type":2,"text":"precision mediump float;\n    \n    varying vec3 varColor;\n    "},{"type":1,"name":"span","attribs":{"class":"keyword"},"children":[{"type":2,"text":"\n    void"}],"pos":13136},{"type":2,"text":" "},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"main"}],"pos":13175},{"type":2,"text":"() {\n      "},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// `gl_FragColor` est une variable SPECIALE de WebGL.\n    "}],"pos":13220},{"type":2,"text":"  "},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// Elle permet de déterminer la couleur du fragment.\n    "}],"pos":13309},{"type":2,"text":"  "},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// C'est un vecteur à 4 dimensions : rouge, vert, bleu\n    "}],"pos":13397},{"type":2,"text":"  "},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// et alpha (l'opacité). Toutes les valeurs sont entre\n    "}],"pos":13487},{"type":2,"text":"  "},{"type":1,"name":"span","attribs":{"class":"comment"},"children":[{"type":2,"text":"// 0.0 et 1.0.\n    "}],"pos":13577},{"type":2,"text":"  gl_FragColor "},{"type":1,"name":"span","attribs":{"class":"operator"},"children":[{"type":2,"text":"="}],"pos":13640},{"type":2,"text":" "},{"type":1,"name":"span","attribs":{"class":"function"},"children":[{"type":2,"text":"vec4"}],"pos":13672},{"type":2,"text":"(varColor.rgb, 1.0);\n    }"}],"pos":12541}],"pos":10877},{"type":2,"text":"\n"},{"type":1,"name":"p","attribs":{},"children":[{"type":2,"text":"Basiquement, un shader est une fonction "},{"type":1,"name":"code","attribs":{},"children":[{"type":2,"text":"void main()"}],"pos":13786},{"type":2,"text":" qui doit mettre à jour des variables."}],"pos":13743},{"type":2,"text":"\n"},{"type":1,"name":"ul","attribs":{},"children":[{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":2,"text":"Le "},{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"vertex shader"}],"pos":13865},{"type":2,"text":" est appelé en premier pour chaque point (vertex). Il doit définir la variable "},{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"gl_Position"}],"pos":13974},{"type":2,"text":" qui est un vecteur de dimension 4. Les deux premières coordonnées sont l&#39;abscisse et l&#39;ordonnée du pixel sur l&#39;écran. Mais attention ! Le système de coordonnée de l&#39;écran est particulier. Le point central est (0,0), le point supérieur droit est (+1,+1) et le point inférieur gauche est (-1,-1). Et ceci, quelque soit la taille réalle du canvas."}],"pos":13858},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":2,"text":"Le "},{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"fragment shader"}],"pos":14376},{"type":2,"text":" vient après et il est appelé pour chaque pixel de l&#39;écran. Il doit définir la couleur de ce pixel en mettant à jour la variable "},{"type":1,"name":"strong","attribs":{},"children":[{"type":2,"text":"gl_FragColor"}],"pos":14541},{"type":2,"text":" qui est un vecteur de dimension 4 : rouge, vert, bleu et opacité."}],"pos":14369},{"type":2,"text":"\n"}],"pos":13853},{"type":2,"text":"\n"},{"type":1,"name":"h2","attribs":{"id":"pour-aller-plus-loin"},"children":[{"type":2,"text":"Pour aller plus loin"}],"pos":14648},{"type":2,"text":"\n"},{"type":1,"name":"p","attribs":{},"children":[{"type":2,"text":"Pour ceux qui veulent rentrer dans les détails des commandes WebGL, voici des liens vers la documentation (en anglais) des fonctions utilisée dans cette page :"}],"pos":14704},{"type":2,"text":"\n"},{"type":1,"name":"ul","attribs":{},"children":[{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":1,"name":"a","attribs":{"href":"https://www.khronos.org/opengles/sdk/docs/man/xhtml/glCreateProgram.xml"},"children":[{"type":2,"text":"createProgram"}],"pos":14880}],"pos":14876},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":1,"name":"a","attribs":{"href":"https://www.khronos.org/opengles/sdk/docs/man/xhtml/glAttachShader.xml"},"children":[{"type":2,"text":"attachShader"}],"pos":14989}],"pos":14985},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":1,"name":"a","attribs":{"href":"https://www.khronos.org/opengles/sdk/docs/man/xhtml/glLinkProgram.xml"},"children":[{"type":2,"text":"linkProgram"}],"pos":15096}],"pos":15092},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":1,"name":"a","attribs":{"href":"https://www.khronos.org/opengles/sdk/docs/man/xhtml/glUseProgram.xml"},"children":[{"type":2,"text":"useProgram"}],"pos":15201}],"pos":15197},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":1,"name":"a","attribs":{"href":"https://www.khronos.org/opengles/sdk/docs/man/xhtml/glGenBuffers.xml"},"children":[{"type":2,"text":"createBuffer"}],"pos":15304}],"pos":15300},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":1,"name":"a","attribs":{"href":"https://www.khronos.org/opengles/sdk/docs/man/xhtml/glBindBuffer.xml"},"children":[{"type":2,"text":"bindBuffer"}],"pos":15409}],"pos":15405},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":1,"name":"a","attribs":{"href":"https://www.khronos.org/opengles/sdk/docs/man/xhtml/glBufferData.xml"},"children":[{"type":2,"text":"bufferData"}],"pos":15512}],"pos":15508},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":1,"name":"a","attribs":{"href":"https://www.khronos.org/opengles/sdk/docs/man/xhtml/glGetAttribLocation.xml"},"children":[{"type":2,"text":"getAttribLocation"}],"pos":15615}],"pos":15611},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":1,"name":"a","attribs":{"href":"https://www.khronos.org/opengles/sdk/docs/man/xhtml/glEnableVertexAttribArray.xml"},"children":[{"type":2,"text":"enableVertexAttribArray"}],"pos":15732}],"pos":15728},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":1,"name":"a","attribs":{"href":"https://www.khronos.org/opengles/sdk/docs/man/xhtml/glVertexAttribPointer.xml"},"children":[{"type":2,"text":"vertexAttribPointer"}],"pos":15861}],"pos":15857},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":1,"name":"a","attribs":{"href":"https://www.khronos.org/opengles/sdk/docs/man/xhtml/glClearColor.xml"},"children":[{"type":2,"text":"clearColor"}],"pos":15982}],"pos":15978},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":1,"name":"a","attribs":{"href":"https://www.khronos.org/opengles/sdk/docs/man/xhtml/glClear.xml"},"children":[{"type":2,"text":"clear"}],"pos":16085}],"pos":16081},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":1,"name":"a","attribs":{"href":"https://www.khronos.org/opengles/sdk/docs/man/xhtml/glDrawArrays.xml"},"children":[{"type":2,"text":"drawArrays"}],"pos":16178}],"pos":16174},{"type":2,"text":"\n"}],"pos":14871},{"type":2,"text":"\n"},{"type":1,"name":"p","attribs":{},"children":[{"type":2,"text":"Si vous savez lire l&#39;anglais et que vous voulez devenir un maître du langage de shading, consulter "},{"type":1,"name":"a","attribs":{"href":"http://www.khronos.org/registry/gles/specs/2.0/GLSL_ES_Specification_1.0.17.pdf"},"children":[{"type":2,"text":"cette documentation"}],"pos":16389},{"type":2,"text":"."}],"pos":16283},{"type":2,"text":"\n"},{"type":1,"name":"p","attribs":{},"children":[{"type":1,"name":"hr","attribs":{},"children":[],"pos":16511,"autoclose":true}],"pos":16508},{"type":2,"text":"\n"},{"type":1,"name":"ul","attribs":{},"children":[{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":2,"text":"Chapitre suivant : "},{"type":1,"name":"a","attribs":{"href":"chap1.html"},"children":[{"type":2,"text":"Changer le système de coordonnées 2D"}],"pos":16549},{"type":2,"text":"."}],"pos":16526},{"type":2,"text":"\n"}],"pos":16521},{"type":2,"text":"\n"}]}]},{"type":1,"name":"nav","attribs":{"class":"theme-color-bg-B2 theme-elevation-2"},"children":[{"children":[{"type":1,"name":"p","attribs":{},"children":[{"type":2,"text":" Sommaire :"}],"pos":0},{"type":2,"text":"\n"},{"type":1,"name":"ul","attribs":{},"children":[{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":1,"name":"a","attribs":{"href":"index.html"},"children":[{"type":2,"text":"Comprendre WebGL"}],"pos":28}],"pos":24},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":1,"name":"a","attribs":{"href":"chap1.html"},"children":[{"type":2,"text":"Changer le système de coordonnées 2D"}],"pos":79}],"pos":75},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":1,"name":"a","attribs":{"href":"chap2.html"},"children":[{"type":2,"text":"Vivent les polygones"}],"pos":150}],"pos":146},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":1,"name":"a","attribs":{"href":"chap3.html"},"children":[{"type":2,"text":"Textures procédurales"}],"pos":205}],"pos":201},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":1,"name":"a","attribs":{"href":"chap4.html"},"children":[{"type":2,"text":"Animations"}],"pos":261}],"pos":257},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":1,"name":"a","attribs":{"href":"chap5.html"},"children":[{"type":2,"text":"Textures bitmaps"}],"pos":306}],"pos":302},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":1,"name":"a","attribs":{"href":"chap6.html"},"children":[{"type":2,"text":"Un point c&#39;est tout"}],"pos":357}],"pos":353},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":1,"name":"a","attribs":{"href":"chap7.html"},"children":[{"type":2,"text":"Particules"}],"pos":415}],"pos":411},{"type":2,"text":"\n"},{"type":1,"name":"li","attribs":{},"children":[{"type":1,"name":"a","attribs":{"href":"chap8.html"},"children":[{"type":2,"text":"Framebuffer"}],"pos":460}],"pos":456},{"type":2,"text":"\n"}],"pos":19},{"type":2,"text":"\n"}]},{"type":2,"text":"\n"}]}],"attribs":{"class":"theme-webgl theme-color-bg-B5"}}],"pos":2}]}}}