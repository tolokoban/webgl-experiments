<page>
Dans les options de `gl.drawArrays()`, il y a une valeur qui semble à priori inutile : __`gl.POINTS`__. Ce chapitre va nous montrer qu'on peut bien s'amuser avec. Cet exemple utilise 6 vertices, par exemple :

<wdg:flex>
  <content>
    <center>
      <div>Sans z-buffer</div>
      <wdg:gl6 $width="320" $height="320" />
    </center>
    <center>
      <div>Avec z-buffer</div>
      <wdg:gl6 $width="320" $height="320" $zbuffer="true"/>
  </center>
  </content>
</wdg:flex>

Pour qu'un point puisse être visualisé comme une sphère, on utilise deux variable du GLSL :
* __gl_PointSize__: détermine la taille en pixels d'un point (dans le vertex shader).
* __gl_PointCoord__: vecteur à deux dimensions dont les valeurs des scalaires sont
comprises entre 0 et 1.
On peut comparer cela aux coordonnées UV utilisées pour les textures.
Ainsi, (0,0) représente le coin supérieur gauche du point
(qui est en fait un carré de côté _gl_PointSize_).

Voici les shaders qui sont utilisés ici :

<ex label="Vertex Shader" src="mod/gl6.vertex-a.c" />

<ex label="fragment Shader" src="mod/gl6.fragment-a.c" />


Il reste cependant un problème de taille que l'on constate dans l'animation de gauche :
les balles qui sont à l'arrière-plan passent parfois devant celles de devant,
ruinant ainsi le bel effet 3D auquel on s'attendait.

Cela est dû au fait que nous avons demandé à WebGL de superposer les images sans
tenir compte du Z-buffer (technique utilisée pour ne pas afficher un pixel si le
précedent à un `z` plus grand).

Voici donc l'intérêt de la composante Z du `gl_Position` ! Grâce au z-buffer,
quelque soit l'ordre dans lequel on affiche les éléments, les pixels les plus
éloignés ne cacheront pas les plus proches.

En WebGl, le z-buffer est appelé __test de profondeur__ (depth test en anglais).
Pour utiliser ce z-buffer, il faut l'activer dans les options du contexte webgl:
<x-code>
var gl = canvas.getContext('webgl', { depth: true });
</x-code>

Ensuite, il faut déclarer qu'on souhaite l'utiliser et avec quelle 
[méthode](https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/depthFunc) :
<x-code src="mod/wdg.gl6" section="zbuffer"/>

</page>
